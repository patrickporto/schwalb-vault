import"./DsnmJJEf.js";import"./DdC0RNGD.js";import{o as de,u as ce,v as V,w as q,k as w,x as wt,L as yt,F as z,z as At,R as Z,j as T,B as p,A as y,G as Tt,I as g,ad as ue,y as s,t as W,a2 as _t,b7 as he,n as Ft}from"./DzRT0qSm.js";import{I as tt,s as et}from"./Byjcbj0b.js";import{l as rt,s as at,p as U,i as X}from"./DV-HjJ0V.js";import{d as zt,f as fe,s as O,j as te,o as ve,e as Ot,r as ge}from"./9QvhKPlK.js";import{s as ht,j as pe,a as pt,e as Zt,$ as me,i as be,f as Wt,r as xe}from"./DmTIwYKB.js";import{M as _e,P as ye,X as ee,T as we}from"./BJHf1IjA.js";import{x as gt,v as Ae,t as $e,b as Me}from"./WcsszTkO.js";import{s as Pe,a as Gt}from"./FHgTlLI2.js";import{b as qt}from"./DoXFKFJ1.js";import{C as Ce}from"./B42Mvk0m.js";function Le(c,i,d){de(()=>{var l=ce(()=>i(c,d?.())||{});if(l?.destroy)return()=>l.destroy()})}function yr(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"}],["circle",{cx:"12",cy:"13",r:"3"}]];tt(c,at({name:"camera"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function wr(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"m15 18-6-6 6-6"}]];tt(c,at({name:"chevron-left"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function Ar(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];tt(c,at({name:"clock"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function Be(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"}],["path",{d:"M6 18h.01"}],["path",{d:"M10 14h.01"}],["path",{d:"M15 6h.01"}],["path",{d:"M18 9h.01"}]];tt(c,at({name:"dices"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function $r(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M9 10h.01"}],["path",{d:"M15 10h.01"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"}]];tt(c,at({name:"ghost"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function Xt(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];tt(c,at({name:"history"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function Mr(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];tt(c,at({name:"layout-dashboard"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function Ie(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M5 12h14"}]];tt(c,at({name:"minus"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function Pr(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"m11 19-6-6"}],["path",{d:"m5 21-2-2"}],["path",{d:"m8 16-4 4"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5"}]];tt(c,at({name:"sword"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}function Ee(c,i){const d=rt(i,["children","$$slots","$$events","$$legacy"]);const l=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];tt(c,at({name:"zoom-in"},()=>d,{get iconNode(){return l},children:(h,b)=>{var u=V(),v=q(u);et(v,i,"default",{}),w(h,u)},$$slots:{default:!0}}))}var Ne=T('<div class="space-y-6"><div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 text-center shadow-inner relative overflow-hidden group"><div class="absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div> <div class="flex justify-center items-center gap-8 mb-4 relative z-10"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-500/20 text-slate-300 hover:text-red-400 border border-slate-700 hover:border-red-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg" aria-label="Diminuir"><!></button> <div class="flex flex-col items-center min-w-[100px]"><span> </span></div> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-500/20 text-slate-300 hover:text-green-400 border border-slate-700 hover:border-green-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg" aria-label="Aumentar"><!></button></div> <div class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] relative z-10"> </div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-4 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-indigo-600/20 transition-all active:scale-[0.98] uppercase tracking-widest text-sm"><!> </button></div>');function Cr(c,i){wt(i,!0);let d=U(i,"initialModifier",3,0),l=U(i,"label",3,"Boons / Banes"),h=U(i,"rollLabel",3,"ROLAR"),b=Z(0);yt(()=>{i.isOpen&&z(b,d())});var u=V(),v=q(u);{var N=F=>{_e(F,{get isOpen(){return i.isOpen},get onClose(){return i.onClose},get title(){return i.title},children:(D,M)=>{var A=Ne(),L=p(A),B=y(p(L),2),S=p(B);S.__click=()=>Tt(b,-1);var m=p(S);Ie(m,{size:24}),g(S);var o=y(S,2),n=p(o),e=p(n);g(n),g(o);var t=y(o,2);t.__click=()=>Tt(b);var a=p(t);ye(a,{size:24}),g(t),g(B);var r=y(B,2),$=p(r,!0);g(r),g(L);var j=y(L,2);fe(j,()=>i.children??ue);var H=y(j,2);H.__click=()=>i.onRoll(s(b));var G=p(H);Be(G,{size:18});var K=y(G);g(H),g(A),W(()=>{ht(n,1,`text-5xl font-black ${s(b)>0?"text-green-400":s(b)<0?"text-red-400":"text-slate-500"} tabular-nums drop-shadow-sm transition-colors duration-300`),O(e,`${s(b)>0?"+":""}${s(b)??""}`),O($,l()),O(K,` ${h()??""}`)}),w(D,A)},$$slots:{default:!0}})};X(v,F=>{i.isOpen&&F(N)})}w(c,u),At()}zt(["click"]);var Dt={exports:{}},Yt;function je(){return Yt||(Yt=1,(function(c,i){(function(d){c.exports=d()})(function(d){var l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function h(o,n){var e=o[0],t=o[1],a=o[2],r=o[3];e+=(t&a|~t&r)+n[0]-680876936|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&a)+n[1]-389564586|0,r=(r<<12|r>>>20)+e|0,a+=(r&e|~r&t)+n[2]+606105819|0,a=(a<<17|a>>>15)+r|0,t+=(a&r|~a&e)+n[3]-1044525330|0,t=(t<<22|t>>>10)+a|0,e+=(t&a|~t&r)+n[4]-176418897|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&a)+n[5]+1200080426|0,r=(r<<12|r>>>20)+e|0,a+=(r&e|~r&t)+n[6]-1473231341|0,a=(a<<17|a>>>15)+r|0,t+=(a&r|~a&e)+n[7]-45705983|0,t=(t<<22|t>>>10)+a|0,e+=(t&a|~t&r)+n[8]+1770035416|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&a)+n[9]-1958414417|0,r=(r<<12|r>>>20)+e|0,a+=(r&e|~r&t)+n[10]-42063|0,a=(a<<17|a>>>15)+r|0,t+=(a&r|~a&e)+n[11]-1990404162|0,t=(t<<22|t>>>10)+a|0,e+=(t&a|~t&r)+n[12]+1804603682|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&a)+n[13]-40341101|0,r=(r<<12|r>>>20)+e|0,a+=(r&e|~r&t)+n[14]-1502002290|0,a=(a<<17|a>>>15)+r|0,t+=(a&r|~a&e)+n[15]+1236535329|0,t=(t<<22|t>>>10)+a|0,e+=(t&r|a&~r)+n[1]-165796510|0,e=(e<<5|e>>>27)+t|0,r+=(e&a|t&~a)+n[6]-1069501632|0,r=(r<<9|r>>>23)+e|0,a+=(r&t|e&~t)+n[11]+643717713|0,a=(a<<14|a>>>18)+r|0,t+=(a&e|r&~e)+n[0]-373897302|0,t=(t<<20|t>>>12)+a|0,e+=(t&r|a&~r)+n[5]-701558691|0,e=(e<<5|e>>>27)+t|0,r+=(e&a|t&~a)+n[10]+38016083|0,r=(r<<9|r>>>23)+e|0,a+=(r&t|e&~t)+n[15]-660478335|0,a=(a<<14|a>>>18)+r|0,t+=(a&e|r&~e)+n[4]-405537848|0,t=(t<<20|t>>>12)+a|0,e+=(t&r|a&~r)+n[9]+568446438|0,e=(e<<5|e>>>27)+t|0,r+=(e&a|t&~a)+n[14]-1019803690|0,r=(r<<9|r>>>23)+e|0,a+=(r&t|e&~t)+n[3]-187363961|0,a=(a<<14|a>>>18)+r|0,t+=(a&e|r&~e)+n[8]+1163531501|0,t=(t<<20|t>>>12)+a|0,e+=(t&r|a&~r)+n[13]-1444681467|0,e=(e<<5|e>>>27)+t|0,r+=(e&a|t&~a)+n[2]-51403784|0,r=(r<<9|r>>>23)+e|0,a+=(r&t|e&~t)+n[7]+1735328473|0,a=(a<<14|a>>>18)+r|0,t+=(a&e|r&~e)+n[12]-1926607734|0,t=(t<<20|t>>>12)+a|0,e+=(t^a^r)+n[5]-378558|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^a)+n[8]-2022574463|0,r=(r<<11|r>>>21)+e|0,a+=(r^e^t)+n[11]+1839030562|0,a=(a<<16|a>>>16)+r|0,t+=(a^r^e)+n[14]-35309556|0,t=(t<<23|t>>>9)+a|0,e+=(t^a^r)+n[1]-1530992060|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^a)+n[4]+1272893353|0,r=(r<<11|r>>>21)+e|0,a+=(r^e^t)+n[7]-155497632|0,a=(a<<16|a>>>16)+r|0,t+=(a^r^e)+n[10]-1094730640|0,t=(t<<23|t>>>9)+a|0,e+=(t^a^r)+n[13]+681279174|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^a)+n[0]-358537222|0,r=(r<<11|r>>>21)+e|0,a+=(r^e^t)+n[3]-722521979|0,a=(a<<16|a>>>16)+r|0,t+=(a^r^e)+n[6]+76029189|0,t=(t<<23|t>>>9)+a|0,e+=(t^a^r)+n[9]-640364487|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^a)+n[12]-421815835|0,r=(r<<11|r>>>21)+e|0,a+=(r^e^t)+n[15]+530742520|0,a=(a<<16|a>>>16)+r|0,t+=(a^r^e)+n[2]-995338651|0,t=(t<<23|t>>>9)+a|0,e+=(a^(t|~r))+n[0]-198630844|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~a))+n[7]+1126891415|0,r=(r<<10|r>>>22)+e|0,a+=(e^(r|~t))+n[14]-1416354905|0,a=(a<<15|a>>>17)+r|0,t+=(r^(a|~e))+n[5]-57434055|0,t=(t<<21|t>>>11)+a|0,e+=(a^(t|~r))+n[12]+1700485571|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~a))+n[3]-1894986606|0,r=(r<<10|r>>>22)+e|0,a+=(e^(r|~t))+n[10]-1051523|0,a=(a<<15|a>>>17)+r|0,t+=(r^(a|~e))+n[1]-2054922799|0,t=(t<<21|t>>>11)+a|0,e+=(a^(t|~r))+n[8]+1873313359|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~a))+n[15]-30611744|0,r=(r<<10|r>>>22)+e|0,a+=(e^(r|~t))+n[6]-1560198380|0,a=(a<<15|a>>>17)+r|0,t+=(r^(a|~e))+n[13]+1309151649|0,t=(t<<21|t>>>11)+a|0,e+=(a^(t|~r))+n[4]-145523070|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~a))+n[11]-1120210379|0,r=(r<<10|r>>>22)+e|0,a+=(e^(r|~t))+n[2]+718787259|0,a=(a<<15|a>>>17)+r|0,t+=(r^(a|~e))+n[9]-343485551|0,t=(t<<21|t>>>11)+a|0,o[0]=e+o[0]|0,o[1]=t+o[1]|0,o[2]=a+o[2]|0,o[3]=r+o[3]|0}function b(o){var n=[],e;for(e=0;e<64;e+=4)n[e>>2]=o.charCodeAt(e)+(o.charCodeAt(e+1)<<8)+(o.charCodeAt(e+2)<<16)+(o.charCodeAt(e+3)<<24);return n}function u(o){var n=[],e;for(e=0;e<64;e+=4)n[e>>2]=o[e]+(o[e+1]<<8)+(o[e+2]<<16)+(o[e+3]<<24);return n}function v(o){var n=o.length,e=[1732584193,-271733879,-1732584194,271733878],t,a,r,$,j,H;for(t=64;t<=n;t+=64)h(e,b(o.substring(t-64,t)));for(o=o.substring(t-64),a=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)r[t>>2]|=o.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(h(e,r),t=0;t<16;t+=1)r[t]=0;return $=n*8,$=$.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt($[2],16),H=parseInt($[1],16)||0,r[14]=j,r[15]=H,h(e,r),e}function N(o){var n=o.length,e=[1732584193,-271733879,-1732584194,271733878],t,a,r,$,j,H;for(t=64;t<=n;t+=64)h(e,u(o.subarray(t-64,t)));for(o=t-64<n?o.subarray(t-64):new Uint8Array(0),a=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)r[t>>2]|=o[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(h(e,r),t=0;t<16;t+=1)r[t]=0;return $=n*8,$=$.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt($[2],16),H=parseInt($[1],16)||0,r[14]=j,r[15]=H,h(e,r),e}function F(o){var n="",e;for(e=0;e<4;e+=1)n+=l[o>>e*8+4&15]+l[o>>e*8&15];return n}function D(o){var n;for(n=0;n<o.length;n+=1)o[n]=F(o[n]);return o.join("")}D(v("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function o(n,e){return n=n|0||0,n<0?Math.max(n+e,0):Math.min(n,e)}ArrayBuffer.prototype.slice=function(n,e){var t=this.byteLength,a=o(n,t),r=t,$,j,H,G;return e!==d&&(r=o(e,t)),a>r?new ArrayBuffer(0):($=r-a,j=new ArrayBuffer($),H=new Uint8Array(j),G=new Uint8Array(this,a,$),H.set(G),j)}})();function M(o){return/[\u0080-\uFFFF]/.test(o)&&(o=unescape(encodeURIComponent(o))),o}function A(o,n){var e=o.length,t=new ArrayBuffer(e),a=new Uint8Array(t),r;for(r=0;r<e;r+=1)a[r]=o.charCodeAt(r);return n?a:t}function L(o){return String.fromCharCode.apply(null,new Uint8Array(o))}function B(o,n,e){var t=new Uint8Array(o.byteLength+n.byteLength);return t.set(new Uint8Array(o)),t.set(new Uint8Array(n),o.byteLength),t}function S(o){var n=[],e=o.length,t;for(t=0;t<e-1;t+=2)n.push(parseInt(o.substr(t,2),16));return String.fromCharCode.apply(String,n)}function m(){this.reset()}return m.prototype.append=function(o){return this.appendBinary(M(o)),this},m.prototype.appendBinary=function(o){this._buff+=o,this._length+=o.length;var n=this._buff.length,e;for(e=64;e<=n;e+=64)h(this._hash,b(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},m.prototype.end=function(o){var n=this._buff,e=n.length,t,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r;for(t=0;t<e;t+=1)a[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(a,e),r=D(this._hash),o&&(r=S(r)),this.reset(),r},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},m.prototype.setState=function(o){return this._buff=o.buff,this._length=o.length,this._hash=o.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(o,n){var e=n,t,a,r;if(o[e>>2]|=128<<(e%4<<3),e>55)for(h(this._hash,o),e=0;e<16;e+=1)o[e]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(t[2],16),r=parseInt(t[1],16)||0,o[14]=a,o[15]=r,h(this._hash,o)},m.hash=function(o,n){return m.hashBinary(M(o),n)},m.hashBinary=function(o,n){var e=v(o),t=D(e);return n?S(t):t},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(o){var n=B(this._buff.buffer,o),e=n.length,t;for(this._length+=o.byteLength,t=64;t<=e;t+=64)h(this._hash,u(n.subarray(t-64,t)));return this._buff=t-64<e?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(o){var n=this._buff,e=n.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a,r;for(a=0;a<e;a+=1)t[a>>2]|=n[a]<<(a%4<<3);return this._finish(t,e),r=D(this._hash),o&&(r=S(r)),this.reset(),r},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var o=m.prototype.getState.call(this);return o.buff=L(o.buff),o},m.ArrayBuffer.prototype.setState=function(o){return o.buff=A(o.buff,!0),m.prototype.setState.call(this,o)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(o,n){var e=N(new Uint8Array(o)),t=D(e);return n?S(t):t},m})})(Dt)),Dt.exports}var De=je();const Se=pe(De),Vt=5;async function Lr(c){if(c.size>Vt*1024*1024)throw new Error(`Imagem muito grande. Máximo de ${Vt}MB.`);const i=await c.arrayBuffer(),d=Se.ArrayBuffer.hash(i);if(gt.has(d))return d;const l=new FileReader,b=await new Promise((u,v)=>{l.onload=()=>u(l.result),l.onerror=v,l.readAsDataURL(c)});return gt.set(d,b),d}function ze(c,i){if(!c)return i(void 0),()=>{};i(gt.get(c));const d=l=>{const h=gt.get(c);i(h)};return gt.observe(d),()=>{gt.unobserve(d)}}var Ue=T('<img class="w-full h-full object-cover rounded-full border border-white/10 shadow-sm"/>'),He=T('<div class="w-full h-full bg-slate-800 rounded-full border border-white/10 flex items-center justify-center font-black text-slate-500 shadow-sm"> </div>'),Re=T("<div><!></div>");function Br(c,i){wt(i,!0);let d=U(i,"size",3,"md"),l=U(i,"fallbackText",3,"?"),h=Z(void 0),b;yt(()=>{b&&b(),i.hash?b=ze(i.hash,M=>{z(h,M,!0)}):z(h,void 0)}),te(()=>{b&&b()});const u={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-lg",xl:"w-20 h-20 text-xl",custom:"w-full h-full"};var v=Re(),N=p(v);{var F=M=>{var A=Ue();W(()=>{pt(A,"src",s(h)),pt(A,"alt",i.alt)}),w(M,A)},D=M=>{var A=He(),L=p(A,!0);g(A),W(()=>O(L,l())),w(M,A)};X(N,M=>{s(h)?M(F):M(D,!1)})}g(v),W(()=>ht(v,1,`${u[d()]??""} relative flex-shrink-0`)),w(c,v),At()}var Te=T('<div class="fixed inset-0 bg-black/50 z-[90] lg:hidden backdrop-blur-sm" role="button" tabindex="-1"></div>'),Fe=T('<div class="flex flex-col items-center justify-center h-full text-slate-600 opacity-50"><div class="w-16 h-16 border-2 border-dashed border-slate-800 rounded-full flex items-center justify-center mb-4"><!></div> <p class="text-sm font-bold uppercase tracking-widest italic"> </p></div>'),Oe=T('<span class="text-[10px] text-white/50 font-black uppercase tracking-tighter"> </span>'),Ze=T('<div class="text-[10px] text-slate-400 font-medium italic mt-1 leading-relaxed opacity-80 whitespace-pre-wrap"> </div>'),We=T('<span class="text-[8px] font-black uppercase tracking-widest bg-indigo-500/10 text-indigo-300 px-2 py-0.5 rounded-full border border-indigo-500/20"> </span>'),Ge=T('<div class="flex flex-wrap gap-1 mb-3"></div>'),qe=T('<div class="absolute inset-0 bg-yellow-400/5 animate-pulse"></div>'),Xe=T('<span class="text-[10px] animate-bounce">✨</span>'),Ye=T('<div class="relative bg-black/40 rounded-xl p-3 flex justify-between items-center border border-white/5 group-hover:border-white/10 transition-colors overflow-hidden"><!> <div class="flex flex-col"><span class="text-[10px] text-slate-500 font-black uppercase tracking-widest mb-0.5"> </span> <div class="text-xs font-mono text-indigo-300 font-bold"> </div></div> <div class="flex flex-col items-end"><span class="text-[10px] text-slate-500 font-black uppercase tracking-widest mb-0.5"> </span> <div> <!></div></div></div>'),Ve=T('<div class="relative bg-slate-800/40 hover:bg-slate-800/60 transition-colors rounded-2xl border border-white/5 p-4 shadow-xl overflow-hidden group animate-in slide-in-from-right-8 duration-300"><div></div> <div class="flex justify-between items-start mb-3"><div class="flex flex-col"><div class="flex items-center gap-2"><span> </span> <!></div></div> <span class="text-[9px] text-slate-500 font-black tracking-widest uppercase"> </span></div> <div class="flex items-center gap-3 mb-2"><div class="flex-1"><div class="font-black text-white text-sm uppercase tracking-tight leading-snug"> </div> <!></div></div> <!> <!></div>'),Je=T('<!> <aside><div class="px-6 py-5 border-b border-white/5 flex justify-between items-center bg-slate-950/50"><div class="flex items-center gap-3"><div class="p-2 bg-indigo-500/10 rounded-lg border border-indigo-500/20"><!></div> <div><h3 class="font-black text-white uppercase tracking-widest text-sm"> </h3> <p class="text-[10px] text-slate-500 font-bold uppercase tracking-tighter"> </p></div></div> <button class="p-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-90"><!></button></div> <div class="flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 custom-scrollbar"><!> <!></div> <div class="p-6 border-t border-white/5 bg-slate-950/80"><button class="w-full py-3 text-xs font-black uppercase tracking-[0.2em] text-red-400/70 hover:text-red-400 border border-red-900/30 rounded-xl hover:bg-red-900/20 transition-all flex items-center justify-center gap-3 active:scale-[0.98]"><!> </button></div></aside>',1);function Ir(c,i){wt(i,!0);const d=()=>Gt(me,"$t",h),l=()=>Gt($e,"$rollHistory",h),[h,b]=Pe();let u=U(i,"isOpen",3,!1);var v=Je(),N=q(v);{var F=P=>{var _=Te();_.__click=function(...x){i.onClose?.apply(this,x)},W(x=>pt(_,"aria-label",x),[()=>d()("character.history.close")]),w(P,_)};X(N,P=>{u()&&P(F)})}var D=y(N,2),M=p(D),A=p(M),L=p(A),B=p(L);Xt(B,{size:20,class:"text-indigo-400"}),g(L);var S=y(L,2),m=p(S),o=p(m,!0);g(m);var n=y(m,2),e=p(n);g(n),g(S),g(A);var t=y(A,2);t.__click=function(...P){i.onClose?.apply(this,P)};var a=p(t);ee(a,{size:24}),g(t),g(M);var r=y(M,2),$=p(r);{var j=P=>{var _=Fe(),x=p(_),Y=p(x);Xt(Y,{size:32}),g(x);var J=y(x,2),nt=p(J,!0);g(J),g(_),W(lt=>O(nt,lt),[()=>d()("character.history.none")]),w(P,_)};X($,P=>{l().length===0&&P(j)})}var H=y($,2);Zt(H,1,l,P=>P.id,(P,_)=>{var x=Ve(),Y=p(x),J=y(Y,2),nt=p(J),lt=p(nt),it=p(lt),Ct=p(it,!0);g(it);var Lt=y(it,2);{var $t=I=>{var E=Oe(),k=p(E,!0);g(E),W(()=>O(k,s(_).charName)),w(I,E)};X(Lt,I=>{s(_).charName&&s(_).charName!==s(_).source&&I($t)})}g(lt),g(nt);var Mt=y(nt,2),Bt=p(Mt,!0);g(Mt),g(J);var ft=y(J,2),vt=p(ft),mt=p(vt),dt=p(mt,!0);g(mt);var ot=y(mt,2);{var It=I=>{var E=Ze(),k=p(E,!0);g(E),W(()=>O(k,s(_).description)),w(I,E)};X(ot,I=>{s(_).description&&I(It)})}g(vt),g(ft);var Pt=y(ft,2);{var f=I=>{var E=Ge();Zt(E,21,()=>s(_).effectsApplied,be,(k,Et)=>{var ut=We(),bt=p(ut,!0);g(ut),W(()=>O(bt,s(Et))),w(k,ut)}),g(E),w(I,E)};X(Pt,I=>{s(_).effectsApplied?.length>0&&I(f)})}var C=y(Pt,2);{var R=I=>{var E=Ye(),k=p(E);{var Et=st=>{var xt=qe();w(st,xt)};X(k,st=>{s(_).crit&&st(Et)})}var ut=y(k,2),bt=p(ut),ae=p(bt,!0);g(bt);var Ut=y(bt,2),ne=p(Ut,!0);g(Ut),g(ut);var Ht=y(ut,2),Nt=p(Ht),ie=p(Nt,!0);g(Nt);var jt=y(Nt,2),Rt=p(jt),oe=y(Rt);{var se=st=>{var xt=Xe();w(st,xt)};X(oe,st=>{s(_).crit&&st(se)})}g(jt),g(Ht),g(E),W((st,xt,le)=>{O(ae,st),O(ne,xt),O(ie,le),ht(jt,1,`text-3xl font-black font-mono leading-none flex items-baseline gap-1 ${s(_).crit?"text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.3)]":"text-white"}`),O(Rt,`${s(_).total??""} `)},[()=>d()("character.history.formula"),()=>s(_).formula||d()("character.history.fixed"),()=>d()("character.history.total")]),w(I,E)};X(C,I=>{(s(_).formula||s(_).total!==void 0)&&I(R)})}g(x),W(I=>{ht(Y,1,`absolute left-0 top-0 bottom-0 w-1 ${s(_).source==="GM"?"bg-indigo-500":"bg-emerald-500"}`),ht(it,1,`text-[10px] px-1.5 py-0.5 rounded ${s(_).source==="GM"?"bg-indigo-500/20 text-indigo-400":"bg-emerald-500/20 text-emerald-400"} uppercase font-black tracking-widest leading-none border border-current opacity-70`),O(Ct,s(_).source),O(Bt,I),O(dt,s(_).name)},[()=>new Date(s(_).timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]),w(P,x)}),g(r);var G=y(r,2),K=p(G);K.__click=function(...P){Ae.clearHistory?.apply(this,P)};var Q=p(K);we(Q,{size:16});var ct=y(Q);g(K),g(G),g(D),W((P,_,x)=>{ht(D,1,`fixed top-0 right-0 h-full w-full sm:w-96 bg-slate-900/95 backdrop-blur-xl border-l border-white/10 z-[100] transition-transform duration-500 ease-out shadow-[0_0_50px_rgba(0,0,0,0.5)] flex flex-col ${u()?"translate-x-0":"translate-x-full"}`),O(o,P),O(e,`${l().length??""} ${_??""}`),O(ct,` ${x??""}`)},[()=>d()("character.history.title"),()=>d()("character.history.rolls_count"),()=>d()("character.history.clear")]),w(c,v),At(),b()}zt(["click"]);function Jt(c,i,d){return c>=i*d?{width:i*d,height:i}:{width:c,height:c/d}}function St(c,i,d,l){return{x:Kt(c.x,i.width,d.width,l),y:Kt(c.y,i.height,d.height,l)}}function Kt(c,i,d,l){let h=i*l/2-d/2;return l<1&&(h=d/2-i*l/2),Math.min(h,Math.max(c,-h))}function Qt(c,i){return Math.sqrt(Math.pow(c.y-i.y,2)+Math.pow(c.x-i.x,2))}function Ke(c,i,d,l,h,b=!0){const u=b?Qe:ke,v={x:u(100,((i.width-d.width/h)/2-c.x/h)/i.width*100),y:u(100,((i.height-d.height/h)/2-c.y/h)/i.height*100),width:u(100,d.width/i.width*100/h),height:u(100,d.height/i.height*100/h)},N=u(i.naturalWidth,v.width*i.naturalWidth/100,!0),F=u(i.naturalHeight,v.height*i.naturalHeight/100,!0),M=i.naturalWidth>=i.naturalHeight*l?{width:Math.round(F*l),height:F}:{width:N,height:Math.round(N/l)},A={...M,x:u(i.naturalWidth-M.width,v.x*i.naturalWidth/100,!0),y:u(i.naturalHeight-M.height,v.y*i.naturalHeight/100,!0)};return{croppedAreaPercentages:v,croppedAreaPixels:A}}function Qe(c,i,d=!1){const l=d?Math.round(i):i;return Math.min(c,Math.max(0,l))}function ke(c,i){return i}function kt(c,i){return{x:(i.x+c.x)/2,y:(i.y+c.y)/2}}var tr=T('<div data-testid="cropper"></div>'),er=T('<div class="svelte-easy-crop-container svelte-1yetlj5" role="button" data-testid="container"><img class="svelte-easy-crop-image svelte-1yetlj5" alt=""/> <!></div>');function rr(c,i){wt(i,!0);let d=U(i,"crop",31,()=>_t({x:0,y:0})),l=U(i,"zoom",15,1),h=U(i,"minZoom",11,1),b=U(i,"maxZoom",11,3),u=U(i,"aspect",3,4/3),v=U(i,"cropSize",3,null),N=U(i,"cropShape",3,"rect"),F=U(i,"showGrid",3,!0),D=U(i,"zoomSpeed",3,1),M=U(i,"crossOrigin",3,null),A=U(i,"restrictPosition",3,!0),L=U(i,"tabindex",3,void 0),B=Z(null),S=Z(_t({width:0,height:0,naturalWidth:0,naturalHeight:0})),m=Z(null),o=Z(null),n=Z(null),e=Z(_t({x:0,y:0})),t=Z(_t({x:0,y:0})),a=Z(0),r=Z(null),$=Z(null);ve(()=>{s(n)&&s(n).complete&&G(),s(m)&&(s(m).addEventListener("gesturestart",j),s(m).addEventListener("gesturechange",j))}),te(()=>{s(m)&&(s(m).removeEventListener("gesturestart",j),s(m).removeEventListener("gesturechange",j)),H()});const j=f=>f.preventDefault(),H=()=>{typeof document<"u"&&(document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",it),document.removeEventListener("touchmove",J),document.removeEventListener("touchend",it))},G=()=>{Q(),vt()},K=()=>v()?v().width/v().height:u(),Q=()=>{s(n)&&(z(S,{width:s(n).width,height:s(n).height,naturalWidth:s(n).naturalWidth,naturalHeight:s(n).naturalHeight},!0),z(B,v()?v():Jt(s(n).width,s(n).height,u()),!0)),s(m)&&z(o,s(m).getBoundingClientRect(),!0)},ct=f=>({x:Number(f.clientX),y:Number(f.clientY)}),P=f=>({x:Number(f.clientX),y:Number(f.clientY)}),_=f=>{f.preventDefault(),document.addEventListener("mousemove",x),document.addEventListener("mouseup",it),nt(ct(f))},x=f=>lt(ct(f)),Y=f=>{f.preventDefault(),document.addEventListener("touchmove",J,{passive:!1}),document.addEventListener("touchend",it),f.touches.length===2?Ct(f):f.touches.length===1&&nt(P(f.touches[0]))},J=f=>{f.preventDefault(),f.touches.length===2?Lt(f):f.touches.length===1&&lt(P(f.touches[0]))},nt=({x:f,y:C})=>{z(e,{x:f,y:C},!0),z(t,{x:d().x,y:d().y},!0)},lt=({x:f,y:C})=>{s(r)&&window.cancelAnimationFrame(s(r)),z(r,window.requestAnimationFrame(()=>{if(f===void 0||C===void 0||!s(B))return;const R=f-s(e).x,I=C-s(e).y,E={x:s(t).x+R,y:s(t).y+I};d(A()?St(E,s(S),s(B),l()):E)}),!0)},it=()=>{H(),vt()},Ct=f=>{const C=P(f.touches[0]),R=P(f.touches[1]);z(a,Qt(C,R),!0),nt(kt(C,R))},Lt=f=>{const C=P(f.touches[0]),R=P(f.touches[1]),I=kt(C,R);lt(I),s($)&&window.cancelAnimationFrame(s($)),z($,window.requestAnimationFrame(()=>{const E=Qt(C,R),k=l()*(E/s(a));ft(k,I),z(a,E,!0)}),!0)},$t=f=>{f.preventDefault();const C=ct(f),R=l()-f.deltaY*D()/200;ft(R,C)},Mt=({x:f,y:C})=>{if(!s(o))throw new Error("The Cropper is not mounted");return{x:s(o).width/2-(f-s(o).left),y:s(o).height/2-(C-s(o).top)}},Bt=({x:f,y:C})=>({x:(f+d().x)/l(),y:(C+d().y)/l()}),ft=(f,C)=>{if(!s(B))return;const R=Mt(C),I=Bt(R);l(Math.min(b(),Math.max(f,h())));const E={x:I.x*l()-R.x,y:I.y*l()-R.y};d(A()?St(E,s(S),s(B),l()):E)},vt=()=>{if(!s(B)||s(B).width===0)return;const f=A()?St(d(),s(S),s(B),l()):d(),{croppedAreaPercentages:C,croppedAreaPixels:R}=Ke(f,s(S),s(B),K(),l(),A());i.oncropcomplete?.({percent:C,pixels:R})};yt(()=>{s(n)&&z(B,v()?v():Jt(s(n).width,s(n).height,u()),!0)}),yt(()=>{l()&&vt()});const mt=f=>{yt(()=>(f.addEventListener("touchstart",Y),f.addEventListener("mousedown",_),f.addEventListener("wheel",$t,{passive:!1}),()=>{f.removeEventListener("touchstart",Y),f.removeEventListener("mousedown",_),f.removeEventListener("wheel",$t)}))};var dt=er();Ot("resize",he,Q);var ot=p(dt);qt(ot,f=>z(n,f),()=>s(n));var It=y(ot,2);{var Pt=f=>{var C=tr();let R;W(()=>{R=ht(C,1,"svelte-easy-crop-area svelte-1yetlj5",null,R,{"svelte-easy-crop-round":N()==="round","svelte-easy-crop-grid":F()}),Wt(C,`width: ${s(B).width??""}px; height: ${s(B).height??""}px;`)}),w(f,C)};X(It,f=>{s(B)&&f(Pt)})}g(dt),qt(dt,f=>z(m,f),()=>s(m)),Le(dt,f=>mt?.(f)),W(()=>{pt(dt,"tabindex",L()),pt(ot,"src",i.image),Wt(ot,`transform: translate(${d().x??""}px, ${d().y??""}px) scale(${l()??""});`),pt(ot,"crossorigin",M())}),Ot("load",ot,G),ge(ot),w(c,dt),At()}const ar=c=>new Promise((i,d)=>{const l=new Image;l.addEventListener("load",()=>i(l)),l.addEventListener("error",h=>d(h)),l.setAttribute("crossOrigin","anonymous"),l.src=c});function re(c){return c*Math.PI/180}function nr(c,i,d){const l=re(d);return{width:Math.abs(Math.cos(l)*c)+Math.abs(Math.sin(l)*i),height:Math.abs(Math.sin(l)*c)+Math.abs(Math.cos(l)*i)}}async function ir(c,i,d=0,l={horizontal:!1,vertical:!1}){const h=await ar(c),b=document.createElement("canvas"),u=b.getContext("2d");if(!u)return null;const v=re(d),{width:N,height:F}=nr(h.width,h.height,d);b.width=N,b.height=F,u.translate(N/2,F/2),u.rotate(v),u.scale(l.horizontal?-1:1,l.vertical?-1:1),u.translate(-h.width/2,-h.height/2),u.drawImage(h,0,0);const D=u.getImageData(i.x,i.y,i.width,i.height);return b.width=i.width,b.height=i.height,u.putImageData(D,0,0),new Promise((M,A)=>{b.toBlob(L=>{M(L)},"image/jpeg",.8)})}var or=T('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> Processando...',1),sr=T("<!> Salvar Foto",1),lr=T('<div class="fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4 animate-in fade-in duration-200" role="dialog" aria-modal="true"><div class="bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-2xl flex flex-col shadow-2xl overflow-hidden max-h-[90vh]"><div class="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-950"><h3 class="font-bold text-white flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500"></div> Editar Imagem</h3> <button class="text-slate-400 hover:text-white p-2 rounded-lg hover:bg-slate-800 transition-colors"><!></button></div> <div class="relative flex-1 bg-black min-h-[400px]"><!></div> <div class="p-4 bg-slate-950 border-t border-slate-800 space-y-4"><div class="flex items-center gap-4"><div class="flex items-center gap-2 text-slate-400 w-full px-4"><!> <input type="range" min="1" max="3" step="0.1" class="w-full accent-indigo-500 h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer"/></div></div> <div class="flex justify-end gap-3 pt-2"><button class="px-6 py-2.5 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all text-sm border border-slate-700">Cancelar</button> <button class="px-8 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all text-sm shadow-lg shadow-indigo-900/20 flex items-center gap-2"><!></button></div></div></div></div>');function Er(c,i){wt(i,!0);let d=U(i,"isOpen",3,!1),l=U(i,"imageUrl",3,""),h=U(i,"aspectRatio",3,1),b=Z(_t({x:0,y:0})),u=Z(1),v=Z(null),N=Z(!1);async function F(){if(console.log("handleSave called",{isProcessing:s(N),pixelCrop:s(v)}),!(s(N)||!s(v))){z(N,!0);try{console.log("Calling getCroppedImg with",{imageUrl:l().substring(0,50)+"...",pixelCrop:s(v)});const L=await ir(l(),s(v),0);console.log("getCroppedImg result:",L),L&&i.onCrop(L)}catch(L){console.error("Error in handleSave:",L)}finally{z(N,!1)}}}var D=V(),M=q(D);{var A=L=>{var B=lr(),S=p(B),m=p(S),o=y(p(m),2);o.__click=function(...x){i.onClose?.apply(this,x)};var n=p(o);ee(n,{size:20}),g(o),g(m);var e=y(m,2),t=p(e);rr(t,{get image(){return l()},get aspect(){return h()},oncropcomplete:x=>{console.log("oncropcomplete prop data:",x),z(v,x.pixels,!0)},showGrid:!0,get crop(){return s(b)},set crop(x){z(b,x,!0)},get zoom(){return s(u)},set zoom(x){z(u,x,!0)}}),g(e);var a=y(e,2),r=p(a),$=p(r),j=p($);Ee(j,{size:16});var H=y(j,2);xe(H),g($),g(r);var G=y(r,2),K=p(G);K.__click=function(...x){i.onClose?.apply(this,x)};var Q=y(K,2);Q.__click=F;var ct=p(Q);{var P=x=>{var Y=or();Ft(),w(x,Y)},_=x=>{var Y=sr(),J=q(Y);Ce(J,{size:18}),Ft(),w(x,Y)};X(ct,x=>{s(N)?x(P):x(_,!1)})}g(Q),g(G),g(a),g(S),g(B),W(()=>Q.disabled=s(N)),Me(H,()=>s(u),x=>z(u,x)),w(L,B)};X(M,L=>{d()&&L(A)})}w(c,D),At()}zt(["click"]);export{Br as A,wr as C,Be as D,$r as G,Ir as H,Er as I,Mr as L,Ie as M,Pr as S,Le as a,Ar as b,yr as c,Xt as d,Cr as e,Lr as s};

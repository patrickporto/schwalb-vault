import{c as N,a as p,f as g}from"./vbI-l42I.js";import"./BX-sjYO1.js";import{B as A,p as se,_ as ie,j as oe,d as O,C as ne,b as le,c,s as l,r as f,ag as de,n as ce,g as I,t as fe}from"./BlobBfBu.js";import{s as D}from"./-C23ZK4E.js";import{l as z,s as j,p as q,i as w}from"./BBccnPWr.js";import{I as G}from"./BxuyB31Y.js";import{d as ue}from"./OaA2MUvX.js";import{r as P,c as me,b as y}from"./BO950AV2.js";import{a as pe}from"./DnLoPW04.js";const k="0123456789abcdef";class b{constructor(e){this.bytes=e}static ofInner(e){if(e.length!==16)throw new TypeError("not 128-bit length");return new b(e)}static fromFieldsV7(e,t,s,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(s)||!Number.isInteger(r)||e<0||t<0||s<0||r<0||e>0xffffffffffff||t>4095||s>1073741823||r>4294967295)throw new RangeError("invalid field value");const a=new Uint8Array(16);return a[0]=e/2**40,a[1]=e/2**32,a[2]=e/2**24,a[3]=e/2**16,a[4]=e/2**8,a[5]=e,a[6]=112|t>>>8,a[7]=t,a[8]=128|s>>>24,a[9]=s>>>16,a[10]=s>>>8,a[11]=s,a[12]=r>>>24,a[13]=r>>>16,a[14]=r>>>8,a[15]=r,new b(a)}static parse(e){var t,s,r,a;let o;switch(e.length){case 32:o=(t=/^[0-9a-f]{32}$/i.exec(e))===null||t===void 0?void 0:t[0];break;case 36:o=(s=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))===null||s===void 0?void 0:s.slice(1,6).join("");break;case 38:o=(r=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(e))===null||r===void 0?void 0:r.slice(1,6).join("");break;case 45:o=(a=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))===null||a===void 0?void 0:a.slice(1,6).join("");break}if(o){const n=new Uint8Array(16);for(let u=0;u<16;u+=4){const v=parseInt(o.substring(2*u,2*u+8),16);n[u+0]=v>>>24,n[u+1]=v>>>16,n[u+2]=v>>>8,n[u+3]=v}return new b(n)}else throw new SyntaxError("could not parse UUID string")}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e+=k.charAt(this.bytes[t]>>>4),e+=k.charAt(this.bytes[t]&15),(t===3||t===5||t===7||t===9)&&(e+="-");return e}toHex(){let e="";for(let t=0;t<this.bytes.length;t++)e+=k.charAt(this.bytes[t]>>>4),e+=k.charAt(this.bytes[t]&15);return e}toJSON(){return this.toString()}getVariant(){const e=this.bytes[8]>>>4;if(e<0)throw new Error("unreachable");if(e<=7)return this.bytes.every(t=>t===0)?"NIL":"VAR_0";if(e<=11)return"VAR_10";if(e<=13)return"VAR_110";if(e<=15)return this.bytes.every(t=>t===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new b(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(let t=0;t<16;t++){const s=this.bytes[t]-e.bytes[t];if(s!==0)return Math.sign(s)}return 0}}class he{constructor(e){this.timestamp_biased=0,this.counter=0,this.random=e??be()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(e,t){let s=this.generateOrAbortCore(e,t);return s===void 0&&(this.timestamp_biased=0,s=this.generateOrAbortCore(e,t)),s}generateOrAbortCore(e,t){if(!Number.isInteger(e)||e<0||e>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit unsigned integer");if(t<0||t>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(e++,e>this.timestamp_biased)this.timestamp_biased=e,this.resetCounter();else if(e+t>=this.timestamp_biased)this.counter++,this.counter>4398046511103&&(this.timestamp_biased++,this.resetCounter());else return;return b.fromFieldsV7(this.timestamp_biased-1,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const e=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return e[6]=64|e[6]>>>4,e[8]=128|e[8]>>>2,b.ofInner(e)}}const be=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new ve;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class ve{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let Q;const Oe=()=>ge().toString(),ge=()=>(Q||(Q=new he)).generate();function Ie(m,e){const t=z(e,["children","$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];G(m,j({name:"globe"},()=>t,{get iconNode(){return s},children:(r,a)=>{var o=N(),n=A(o);D(n,e,"default",{}),p(r,o)},$$slots:{default:!0}}))}function Pe(m,e){const t=z(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"}]];G(m,j({name:"play"},()=>t,{get iconNode(){return s},children:(r,a)=>{var o=N(),n=A(o);D(n,e,"default",{}),p(r,o)},$$slots:{default:!0}}))}function De(m,e){const t=z(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m12.5 17-.5-1-.5 1h1z"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"9",cy:"12",r:"1"}]];G(m,j({name:"skull"},()=>t,{get iconNode(){return s},children:(r,a)=>{var o=N(),n=A(o);D(n,e,"default",{}),p(r,o)},$$slots:{default:!0}}))}var xe=g('<div class="text-[10px] text-emerald-400 flex items-center gap-1 bg-emerald-400/10 px-2 py-0.5 rounded-full border border-emerald-400/20"><div class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"></div> Protegida</div>'),_e=g('<button class="absolute right-2 top-1/2 -translate-y-1/2 text-[10px] bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/20 px-2 py-1 rounded-md transition-colors">Remover Senha</button>'),we=g('<p class="text-[10px] text-red-400 mt-1">A senha será removida ao salvar.</p>'),ye=g('<p class="text-[10px] text-slate-500 mt-1">Defina uma senha para proteger o convite desta campanha.</p>'),ke=g('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="presentation"><div class="bg-slate-800 rounded-xl w-full max-w-md p-6 border border-slate-700 shadow-2xl" role="dialog" aria-modal="true" aria-labelledby="campaign-modal-title"><h3 id="campaign-modal-title" class="text-xl font-bold text-white mb-4 tracking-tight">Configurações da Campanha</h3> <div class="space-y-4"><div><label for="campaign-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome da Campanha</label> <input id="campaign-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: A Sombra do Feiticeiro"/></div> <div><label for="campaign-gm" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Mestre (GM)</label> <input id="campaign-gm" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/></div> <div><label for="campaign-desc" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Descrição</label> <textarea id="campaign-desc" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors resize-none" rows="3" placeholder="Uma breve descrição da sua jornada..."></textarea></div> <div><label for="campaign-pwd" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center justify-between"><div class="flex items-center gap-1"><!> Senha de Acesso (Opcional)</div> <!></label> <div class="relative"><input type="password" id="campaign-pwd" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors pr-24"/> <!></div> <!></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-3 rounded-xl font-bold transition-all active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-bold shadow-lg shadow-indigo-900/20 transition-all active:scale-95">Salvar</button></div></div></div>');function ze(m,e){se(e,!0);let t=q(e,"isOpen",3,!1),s=q(e,"initialData",3,"{}"),r=ie({name:"",description:"",gmName:"",password:"",removePassword:!1}),a=ne(!1);oe(()=>{if(t()&&s())try{const d=JSON.parse(s());r.name=d.name||"",r.description=d.description||"",r.gmName=d.gmName||"",r.password="",r.removePassword=!1,O(a,!!d.passwordHash)}catch{r.name="",r.description="",r.gmName="",r.password="",r.removePassword=!1,O(a,!1)}});function o(d){d.target===d.currentTarget&&e.onClose()}var n=N(),u=A(n);{var v=d=>{var x=ke();x.__click=o;var F=c(x),C=l(c(F),2),R=c(C),X=l(c(R),2);P(X),f(R);var $=l(R,2),J=l(c($),2);P(J),f($);var E=l($,2),K=l(c(E),2);de(K),f(E);var M=l(E,2),S=c(M),U=c(S),Z=c(U);pe(Z,{size:12}),ce(),f(U);var H=l(U,2);{var L=i=>{var h=xe();p(i,h)};w(H,i=>{I(a)&&i(L)})}f(S);var V=l(S,2),_=c(V);P(_);var T=l(_,2);{var B=i=>{var h=_e();h.__click=()=>{r.removePassword=!0,O(a,!1)},p(i,h)};w(T,i=>{I(a)&&i(B)})}f(V);var ee=l(V,2);{var te=i=>{var h=we();p(i,h)},re=i=>{var h=ye();p(i,h)};w(ee,i=>{r.removePassword?i(te):i(re,!1)})}f(M),f(C);var W=l(C,2),Y=c(W);Y.__click=function(...i){e.onClose?.apply(this,i)};var ae=l(Y,2);ae.__click=()=>e.onSave({...r}),f(W),f(F),f(x),fe(()=>me(_,"placeholder",I(a)?"Preencha para alterar...":"Deixe em branco para sem senha")),y(X,()=>r.name,i=>r.name=i),y(J,()=>r.gmName,i=>r.gmName=i),y(K,()=>r.description,i=>r.description=i),y(_,()=>r.password,i=>r.password=i),p(d,x)};w(u,d=>{t()&&d(v)})}p(m,n),le()}ue(["click"]);export{ze as C,Ie as G,Pe as P,De as S,Oe as u};

import"./DsnmJJEf.js";import"./DADRbhGW.js";import{d as I,e as N,a as h,p as se,B as V,Q as oe,q as ie,k as b,i as ne,f as x,s as c,j as f,t as le,g as l,C as de,r as u,aj as ce,n as fe}from"./CxNW0ivl.js";import{I as D,s as j}from"./DTSy_hpX.js";import{l as z,s as G,p as Y,i as O}from"./B2LVKa3E.js";import{d as ue,s as me}from"./CKry8u68.js";import{r as P,d as pe}from"./DYIsXxFm.js";import{b as w}from"./BSk7u5il.js";import{M as he,S as be}from"./BVUuR1sE.js";function De(m,e){const t=z(e,["children","$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];D(m,G({name:"globe"},()=>t,{get iconNode(){return s},children:(r,a)=>{var i=I(),d=N(i);j(d,e,"default",{}),h(r,i)},$$slots:{default:!0}}))}function je(m,e){const t=z(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"}]];D(m,G({name:"play"},()=>t,{get iconNode(){return s},children:(r,a)=>{var i=I(),d=N(i);j(d,e,"default",{}),h(r,i)},$$slots:{default:!0}}))}function ze(m,e){const t=z(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m12.5 17-.5-1-.5 1h1z"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"9",cy:"12",r:"1"}]];D(m,G({name:"skull"},()=>t,{get iconNode(){return s},children:(r,a)=>{var i=I(),d=N(i);j(d,e,"default",{}),h(r,i)},$$slots:{default:!0}}))}const y="0123456789abcdef";class v{constructor(e){this.bytes=e}static ofInner(e){if(e.length!==16)throw new TypeError("not 128-bit length");return new v(e)}static fromFieldsV7(e,t,s,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(s)||!Number.isInteger(r)||e<0||t<0||s<0||r<0||e>0xffffffffffff||t>4095||s>1073741823||r>4294967295)throw new RangeError("invalid field value");const a=new Uint8Array(16);return a[0]=e/2**40,a[1]=e/2**32,a[2]=e/2**24,a[3]=e/2**16,a[4]=e/2**8,a[5]=e,a[6]=112|t>>>8,a[7]=t,a[8]=128|s>>>24,a[9]=s>>>16,a[10]=s>>>8,a[11]=s,a[12]=r>>>24,a[13]=r>>>16,a[14]=r>>>8,a[15]=r,new v(a)}static parse(e){var t,s,r,a;let i;switch(e.length){case 32:i=(t=/^[0-9a-f]{32}$/i.exec(e))===null||t===void 0?void 0:t[0];break;case 36:i=(s=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))===null||s===void 0?void 0:s.slice(1,6).join("");break;case 38:i=(r=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(e))===null||r===void 0?void 0:r.slice(1,6).join("");break;case 45:i=(a=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))===null||a===void 0?void 0:a.slice(1,6).join("");break}if(i){const d=new Uint8Array(16);for(let n=0;n<16;n+=4){const g=parseInt(i.substring(2*n,2*n+8),16);d[n+0]=g>>>24,d[n+1]=g>>>16,d[n+2]=g>>>8,d[n+3]=g}return new v(d)}else throw new SyntaxError("could not parse UUID string")}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e+=y.charAt(this.bytes[t]>>>4),e+=y.charAt(this.bytes[t]&15),(t===3||t===5||t===7||t===9)&&(e+="-");return e}toHex(){let e="";for(let t=0;t<this.bytes.length;t++)e+=y.charAt(this.bytes[t]>>>4),e+=y.charAt(this.bytes[t]&15);return e}toJSON(){return this.toString()}getVariant(){const e=this.bytes[8]>>>4;if(e<0)throw new Error("unreachable");if(e<=7)return this.bytes.every(t=>t===0)?"NIL":"VAR_0";if(e<=11)return"VAR_10";if(e<=13)return"VAR_110";if(e<=15)return this.bytes.every(t=>t===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new v(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(let t=0;t<16;t++){const s=this.bytes[t]-e.bytes[t];if(s!==0)return Math.sign(s)}return 0}}class ve{constructor(e){this.timestamp_biased=0,this.counter=0,this.random=e??ge()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(e,t){let s=this.generateOrAbortCore(e,t);return s===void 0&&(this.timestamp_biased=0,s=this.generateOrAbortCore(e,t)),s}generateOrAbortCore(e,t){if(!Number.isInteger(e)||e<0||e>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit unsigned integer");if(t<0||t>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(e++,e>this.timestamp_biased)this.timestamp_biased=e,this.resetCounter();else if(e+t>=this.timestamp_biased)this.counter++,this.counter>4398046511103&&(this.timestamp_biased++,this.resetCounter());else return;return v.fromFieldsV7(this.timestamp_biased-1,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const e=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return e[6]=64|e[6]>>>4,e[8]=128|e[8]>>>2,v.ofInner(e)}}const ge=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new xe;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class xe{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let Q;const Ge=()=>_e().toString(),_e=()=>(Q||(Q=new ve)).generate();var we=x('<div class="text-[10px] text-emerald-400 flex items-center gap-1 bg-emerald-400/10 px-2 py-0.5 rounded-full border border-emerald-400/20"><div class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"></div> Protegida</div>'),ye=x('<button class="absolute right-2 top-1/2 -translate-y-1/2 text-[10px] bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/20 px-2 py-1 rounded-md transition-colors">Remover Senha</button>'),Ne=x('<p class="text-[10px] text-red-400 mt-1">A senha será removida ao salvar.</p>'),$e=x('<p class="text-[10px] text-slate-500 mt-1">Defina uma senha para proteger o convite desta campanha.</p>'),Ce=x('<div class="space-y-4"><div><label for="campaign-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome da Campanha</label> <input id="campaign-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: A Sombra do Feiticeiro"/></div> <div><label for="campaign-gm" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Mestre (GM)</label> <input id="campaign-gm" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/></div> <div><label for="campaign-desc" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Descrição</label> <textarea id="campaign-desc" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors resize-none" rows="3" placeholder="Uma breve descrição da sua jornada..."></textarea></div> <div><label for="campaign-pwd" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center justify-between"><div class="flex items-center gap-1"><!> Senha de Acesso (Opcional)</div> <!></label> <div class="relative"><input type="password" id="campaign-pwd" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors pr-24"/> <!></div> <!></div></div> <div class="flex flex-col-reverse sm:flex-row gap-3 mt-6"><button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-4 sm:py-3 rounded-xl font-bold transition-all active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 sm:py-3 rounded-xl font-bold shadow-lg shadow-indigo-900/20 transition-all active:scale-95"> </button></div>',1);function Me(m,e){se(e,!0);let t=Y(e,"isOpen",3,!1),s=Y(e,"initialData",3,"{}"),r=V(oe({name:"",description:"",gmName:"",password:"",removePassword:!1})),a=V(!1),i=V(!1);ie(()=>{if(t())try{const n=JSON.parse(s());b(r,{name:n.name||"",description:n.description||"",gmName:n.gmName||"",password:"",removePassword:!1},!0),b(a,!!n.passwordHash),b(i,!!n.id)}catch{b(r,{name:"",description:"",gmName:"",password:"",removePassword:!1},!0),b(a,!1),b(i,!1)}});function d(){e.onSave({...l(r)})}{let n=de(()=>l(i)?"Configurações da Campanha":"Nova Campanha");he(m,{get isOpen(){return t()},get onClose(){return e.onClose},get title(){return l(n)},maxWidth:"max-w-md",children:(g,Ae)=>{var M=Ce(),$=N(M),C=f($),F=c(f(C),2);P(F),u(C);var A=c(C,2),W=c(f(A),2);P(W),u(A);var k=c(A,2),X=c(f(k),2);ce(X),u(k);var q=c(k,2),R=f(q),E=f(R),Z=f(E);be(Z,{size:12}),fe(),u(E);var H=c(E,2);{var L=o=>{var p=we();h(o,p)};O(H,o=>{l(a)&&o(L)})}u(R);var S=c(R,2),_=f(S);P(_);var T=c(_,2);{var B=o=>{var p=ye();p.__click=()=>{l(r).removePassword=!0,b(a,!1)},h(o,p)};O(T,o=>{l(a)&&o(B)})}u(S);var ee=c(S,2);{var te=o=>{var p=Ne();h(o,p)},re=o=>{var p=$e();h(o,p)};O(ee,o=>{l(r).removePassword?o(te):o(re,!1)})}u(q),u($);var J=c($,2),K=f(J);K.__click=function(...o){e.onClose?.apply(this,o)};var U=c(K,2);U.__click=d;var ae=f(U,!0);u(U),u(J),le(()=>{pe(_,"placeholder",l(a)?"Preencha para alterar...":"Deixe em branco para sem senha"),me(ae,l(i)?"Salvar":"Criar Campanha")}),w(F,()=>l(r).name,o=>l(r).name=o),w(W,()=>l(r).gmName,o=>l(r).gmName=o),w(X,()=>l(r).description,o=>l(r).description=o),w(_,()=>l(r).password,o=>l(r).password=o),h(g,M)},$$slots:{default:!0}})}ne()}ue(["click"]);export{Me as C,De as G,je as P,ze as S,Ge as u};

import"./DsnmJJEf.js";import"./D9IBKMOw.js";import{g as qt,u as Gt,d as G,e as R,a as y,p as xt,z as pt,o as S,G as F,k as yt,f as H,l as x,s as A,v as Lt,w as b,a4 as Xt,j as s,t as Z,n as wt,V as gt,bu as Vt}from"./BkhWOpPj.js";import{I as Q,s as k}from"./CUvy-rMn.js";import{l as tt,s as et,p as j,i as V}from"./DbalZYyT.js";import{d as Ct,f as Yt,s as q,q as Tt,o as Jt,e as Bt,r as Kt}from"./CqLQNChA.js";import{s as bt,d as mt,e as It,i as Qt,f as Et,r as kt}from"./Am2pCLS3.js";import{M as te,P as ee,X as Ft,T as re}from"./f4sK7lT0.js";import{g as ne}from"./CqkleIqs.js";import{h as ft,k as ae,l as oe,b as ie}from"./DpieVsxQ.js";import{s as se,a as le}from"./CPHStP6i.js";import{b as Nt}from"./CjcyXWTt.js";import{C as de}from"./DLp-uDZ5.js";function ce(c,o,d){qt(()=>{var l=Gt(()=>o(c,d?.())||{});if(l?.destroy)return()=>l.destroy()})}function nr(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"}],["circle",{cx:"12",cy:"13",r:"3"}]];Q(c,et({name:"camera"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function ar(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"m15 18-6-6 6-6"}]];Q(c,et({name:"chevron-left"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function or(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];Q(c,et({name:"clock"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function ue(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"}],["path",{d:"M6 18h.01"}],["path",{d:"M10 14h.01"}],["path",{d:"M15 6h.01"}],["path",{d:"M18 9h.01"}]];Q(c,et({name:"dices"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function ir(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M9 10h.01"}],["path",{d:"M15 10h.01"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"}]];Q(c,et({name:"ghost"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function he(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];Q(c,et({name:"history"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function sr(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];Q(c,et({name:"layout-dashboard"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function fe(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M5 12h14"}]];Q(c,et({name:"minus"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function lr(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"m11 19-6-6"}],["path",{d:"m5 21-2-2"}],["path",{d:"m8 16-4 4"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5"}]];Q(c,et({name:"sword"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}function ve(c,o){const d=tt(o,["children","$$slots","$$events","$$legacy"]);const l=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];Q(c,et({name:"zoom-in"},()=>d,{get iconNode(){return l},children:(h,g)=>{var u=G(),v=R(u);k(v,o,"default",{}),y(h,u)},$$slots:{default:!0}}))}var ge=H('<div class="space-y-6"><div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 text-center shadow-inner relative overflow-hidden group"><div class="absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div> <div class="flex justify-center items-center gap-8 mb-4 relative z-10"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-500/20 text-slate-300 hover:text-red-400 border border-slate-700 hover:border-red-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg" aria-label="Diminuir"><!></button> <div class="flex flex-col items-center min-w-[100px]"><span> </span></div> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-500/20 text-slate-300 hover:text-green-400 border border-slate-700 hover:border-green-500/30 flex items-center justify-center transition-all active:scale-90 shadow-lg" aria-label="Aumentar"><!></button></div> <div class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] relative z-10"> </div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-4 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-indigo-600/20 transition-all active:scale-[0.98] uppercase tracking-widest text-sm"><!> </button></div>');function dr(c,o){xt(o,!0);let d=j(o,"initialModifier",3,0),l=j(o,"label",3,"Boons / Banes"),h=j(o,"rollLabel",3,"ROLAR"),g=F(0);pt(()=>{o.isOpen&&S(g,d())});var u=G(),v=R(u);{var B=N=>{te(N,{get isOpen(){return o.isOpen},get onClose(){return o.onClose},get title(){return o.title},children:(D,_)=>{var M=ge(),$=x(M),P=A(x($),2),I=x(P);I.__click=()=>Lt(g,-1);var m=x(I);fe(m,{size:24}),b(I);var i=A(I,2),a=x(i),e=x(a);b(a),b(i);var t=A(i,2);t.__click=()=>Lt(g);var n=x(t);ee(n,{size:24}),b(t),b(P);var r=A(P,2),p=x(r,!0);b(r),b($);var w=A($,2);Yt(w,()=>o.children??Xt);var E=A(w,2);E.__click=()=>o.onRoll(s(g));var O=x(E);ue(O,{size:18});var Y=A(O);b(E),b(M),Z(()=>{bt(a,1,`text-5xl font-black ${s(g)>0?"text-green-400":s(g)<0?"text-red-400":"text-slate-500"} tabular-nums drop-shadow-sm transition-colors duration-300`),q(e,`${s(g)>0?"+":""}${s(g)??""}`),q(p,l()),q(Y,` ${h()??""}`)}),y(D,M)},$$slots:{default:!0}})};V(v,N=>{o.isOpen&&N(B)})}y(c,u),yt()}Ct(["click"]);var $t={exports:{}},Dt;function pe(){return Dt||(Dt=1,(function(c,o){(function(d){c.exports=d()})(function(d){var l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function h(i,a){var e=i[0],t=i[1],n=i[2],r=i[3];e+=(t&n|~t&r)+a[0]-680876936|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[1]-389564586|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[2]+606105819|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[3]-1044525330|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[4]-176418897|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[5]+1200080426|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[6]-1473231341|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[7]-45705983|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[8]+1770035416|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[9]-1958414417|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[10]-42063|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[11]-1990404162|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+a[12]+1804603682|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+a[13]-40341101|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+a[14]-1502002290|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+a[15]+1236535329|0,t=(t<<22|t>>>10)+n|0,e+=(t&r|n&~r)+a[1]-165796510|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[6]-1069501632|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[11]+643717713|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[0]-373897302|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[5]-701558691|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[10]+38016083|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[15]-660478335|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[4]-405537848|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[9]+568446438|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[14]-1019803690|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[3]-187363961|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[8]+1163531501|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+a[13]-1444681467|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+a[2]-51403784|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+a[7]+1735328473|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+a[12]-1926607734|0,t=(t<<20|t>>>12)+n|0,e+=(t^n^r)+a[5]-378558|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[8]-2022574463|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[11]+1839030562|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[14]-35309556|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[1]-1530992060|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[4]+1272893353|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[7]-155497632|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[10]-1094730640|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[13]+681279174|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[0]-358537222|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[3]-722521979|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[6]+76029189|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+a[9]-640364487|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+a[12]-421815835|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+a[15]+530742520|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+a[2]-995338651|0,t=(t<<23|t>>>9)+n|0,e+=(n^(t|~r))+a[0]-198630844|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[7]+1126891415|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[14]-1416354905|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[5]-57434055|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[12]+1700485571|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[3]-1894986606|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[10]-1051523|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[1]-2054922799|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[8]+1873313359|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[15]-30611744|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[6]-1560198380|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[13]+1309151649|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+a[4]-145523070|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+a[11]-1120210379|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+a[2]+718787259|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+a[9]-343485551|0,t=(t<<21|t>>>11)+n|0,i[0]=e+i[0]|0,i[1]=t+i[1]|0,i[2]=n+i[2]|0,i[3]=r+i[3]|0}function g(i){var a=[],e;for(e=0;e<64;e+=4)a[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return a}function u(i){var a=[],e;for(e=0;e<64;e+=4)a[e>>2]=i[e]+(i[e+1]<<8)+(i[e+2]<<16)+(i[e+3]<<24);return a}function v(i){var a=i.length,e=[1732584193,-271733879,-1732584194,271733878],t,n,r,p,w,E;for(t=64;t<=a;t+=64)h(e,g(i.substring(t-64,t)));for(i=i.substring(t-64),n=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=i.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(h(e,r),t=0;t<16;t+=1)r[t]=0;return p=a*8,p=p.toString(16).match(/(.*?)(.{0,8})$/),w=parseInt(p[2],16),E=parseInt(p[1],16)||0,r[14]=w,r[15]=E,h(e,r),e}function B(i){var a=i.length,e=[1732584193,-271733879,-1732584194,271733878],t,n,r,p,w,E;for(t=64;t<=a;t+=64)h(e,u(i.subarray(t-64,t)));for(i=t-64<a?i.subarray(t-64):new Uint8Array(0),n=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=i[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(h(e,r),t=0;t<16;t+=1)r[t]=0;return p=a*8,p=p.toString(16).match(/(.*?)(.{0,8})$/),w=parseInt(p[2],16),E=parseInt(p[1],16)||0,r[14]=w,r[15]=E,h(e,r),e}function N(i){var a="",e;for(e=0;e<4;e+=1)a+=l[i>>e*8+4&15]+l[i>>e*8&15];return a}function D(i){var a;for(a=0;a<i.length;a+=1)i[a]=N(i[a]);return i.join("")}D(v("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function i(a,e){return a=a|0||0,a<0?Math.max(a+e,0):Math.min(a,e)}ArrayBuffer.prototype.slice=function(a,e){var t=this.byteLength,n=i(a,t),r=t,p,w,E,O;return e!==d&&(r=i(e,t)),n>r?new ArrayBuffer(0):(p=r-n,w=new ArrayBuffer(p),E=new Uint8Array(w),O=new Uint8Array(this,n,p),E.set(O),w)}})();function _(i){return/[\u0080-\uFFFF]/.test(i)&&(i=unescape(encodeURIComponent(i))),i}function M(i,a){var e=i.length,t=new ArrayBuffer(e),n=new Uint8Array(t),r;for(r=0;r<e;r+=1)n[r]=i.charCodeAt(r);return a?n:t}function $(i){return String.fromCharCode.apply(null,new Uint8Array(i))}function P(i,a,e){var t=new Uint8Array(i.byteLength+a.byteLength);return t.set(new Uint8Array(i)),t.set(new Uint8Array(a),i.byteLength),t}function I(i){var a=[],e=i.length,t;for(t=0;t<e-1;t+=2)a.push(parseInt(i.substr(t,2),16));return String.fromCharCode.apply(String,a)}function m(){this.reset()}return m.prototype.append=function(i){return this.appendBinary(_(i)),this},m.prototype.appendBinary=function(i){this._buff+=i,this._length+=i.length;var a=this._buff.length,e;for(e=64;e<=a;e+=64)h(this._hash,g(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},m.prototype.end=function(i){var a=this._buff,e=a.length,t,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r;for(t=0;t<e;t+=1)n[t>>2]|=a.charCodeAt(t)<<(t%4<<3);return this._finish(n,e),r=D(this._hash),i&&(r=I(r)),this.reset(),r},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},m.prototype.setState=function(i){return this._buff=i.buff,this._length=i.length,this._hash=i.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(i,a){var e=a,t,n,r;if(i[e>>2]|=128<<(e%4<<3),e>55)for(h(this._hash,i),e=0;e<16;e+=1)i[e]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(t[2],16),r=parseInt(t[1],16)||0,i[14]=n,i[15]=r,h(this._hash,i)},m.hash=function(i,a){return m.hashBinary(_(i),a)},m.hashBinary=function(i,a){var e=v(i),t=D(e);return a?I(t):t},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(i){var a=P(this._buff.buffer,i),e=a.length,t;for(this._length+=i.byteLength,t=64;t<=e;t+=64)h(this._hash,u(a.subarray(t-64,t)));return this._buff=t-64<e?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(i){var a=this._buff,e=a.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n,r;for(n=0;n<e;n+=1)t[n>>2]|=a[n]<<(n%4<<3);return this._finish(t,e),r=D(this._hash),i&&(r=I(r)),this.reset(),r},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var i=m.prototype.getState.call(this);return i.buff=$(i.buff),i},m.ArrayBuffer.prototype.setState=function(i){return i.buff=M(i.buff,!0),m.prototype.setState.call(this,i)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(i,a){var e=B(new Uint8Array(i)),t=D(e);return a?I(t):t},m})})($t)),$t.exports}var me=pe();const be=ne(me),St=5;async function cr(c){if(c.size>St*1024*1024)throw new Error(`Imagem muito grande. Máximo de ${St}MB.`);const o=await c.arrayBuffer(),d=be.ArrayBuffer.hash(o);if(ft.has(d))return d;const l=new FileReader,g=await new Promise((u,v)=>{l.onload=()=>u(l.result),l.onerror=v,l.readAsDataURL(c)});return ft.set(d,g),d}function xe(c,o){if(!c)return o(void 0),()=>{};o(ft.get(c));const d=l=>{const h=ft.get(c);o(h)};return ft.observe(d),()=>{ft.unobserve(d)}}var ye=H('<img class="w-full h-full object-cover rounded-full border border-white/10 shadow-sm"/>'),_e=H('<div class="w-full h-full bg-slate-800 rounded-full border border-white/10 flex items-center justify-center font-black text-slate-500 shadow-sm"> </div>'),we=H("<div><!></div>");function ur(c,o){xt(o,!0);let d=j(o,"size",3,"md"),l=j(o,"fallbackText",3,"?"),h=F(void 0),g;pt(()=>{g&&g(),o.hash?g=xe(o.hash,_=>{S(h,_,!0)}):S(h,void 0)}),Tt(()=>{g&&g()});const u={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-16 h-16 text-lg",xl:"w-20 h-20 text-xl",custom:"w-full h-full"};var v=we(),B=x(v);{var N=_=>{var M=ye();Z(()=>{mt(M,"src",s(h)),mt(M,"alt",o.alt)}),y(_,M)},D=_=>{var M=_e(),$=x(M,!0);b(M),Z(()=>q($,l())),y(_,M)};V(B,_=>{s(h)?_(N):_(D,!1)})}b(v),Z(()=>bt(v,1,`${u[d()]??""} relative flex-shrink-0`)),y(c,v),yt()}var Ae=H('<div class="fixed inset-0 bg-black/50 z-[90] lg:hidden backdrop-blur-sm" role="button" aria-label="Fechar" tabindex="-1"></div>'),Me=H('<div class="text-center text-slate-500 text-sm mt-10 italic">Nenhuma rolagem.</div>'),$e=H('<span class="text-[10px] text-indigo-400 font-bold -mt-0.5"> </span>'),Pe=H('<div class="text-xs text-slate-400 italic mb-2 whitespace-pre-wrap"> </div>'),Ce=H('<span class="text-[9px] bg-indigo-900/50 text-indigo-200 px-1.5 py-0.5 rounded border border-indigo-800/50"> </span>'),Le=H('<div class="flex flex-wrap gap-1 mb-2"></div>'),Be=H('<div class="bg-slate-900 rounded p-2 flex justify-between items-center"><div class="text-xs font-mono text-slate-400"> </div> <div> </div></div>'),Ie=H('<div class="bg-slate-800 rounded-lg border border-slate-700 p-3 shadow-sm animate-in slide-in-from-right-4"><div class="flex justify-between items-start mb-1"><div class="flex flex-col"><span class="text-[10px] text-slate-400 uppercase font-black tracking-tight"> </span> <!></div> <span class="text-[10px] text-slate-500 font-mono"> </span></div> <div class="font-bold text-white mb-1"> </div> <!> <!> <!></div>'),Ee=H('<!> <aside><div class="p-4 border-b border-slate-700 flex justify-between items-center bg-slate-950"><h3 class="font-bold text-white flex items-center gap-2"><!> Histórico</h3> <button class="text-slate-400 hover:text-white"><!></button></div> <div class="flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar"><!> <!></div> <div class="p-4 border-t border-slate-700 bg-slate-950"><button class="w-full py-2 text-xs font-bold text-red-400 hover:text-red-300 border border-red-900/50 rounded hover:bg-red-900/20 flex items-center justify-center gap-2"><!> Limpar</button></div></aside>',1);function hr(c,o){xt(o,!0);const d=()=>le(oe,"$rollHistory",l),[l,h]=se();let g=j(o,"isOpen",3,!1);var u=Ee(),v=R(u);{var B=r=>{var p=Ae();p.__click=function(...w){o.onClose?.apply(this,w)},y(r,p)};V(v,r=>{g()&&r(B)})}var N=A(v,2),D=x(N),_=x(D),M=x(_);he(M,{size:18}),wt(),b(_);var $=A(_,2);$.__click=function(...r){o.onClose?.apply(this,r)};var P=x($);Ft(P,{size:20}),b($),b(D);var I=A(D,2),m=x(I);{var i=r=>{var p=Me();y(r,p)};V(m,r=>{d().length===0&&r(i)})}var a=A(m,2);It(a,1,d,r=>r.id,(r,p)=>{var w=Ie(),E=x(w),O=x(E),Y=x(O),rt=x(Y,!0);b(Y);var ot=A(Y,2);{var J=z=>{var T=$e(),W=x(T,!0);b(T),Z(()=>q(W,s(p).charName)),y(z,T)};V(ot,z=>{s(p).charName&&s(p).charName!==s(p).source&&z(J)})}b(O);var it=A(O,2),C=x(it,!0);b(it),b(E);var X=A(E,2),ut=x(X,!0);b(X);var ht=A(X,2);{var vt=z=>{var T=Pe(),W=x(T,!0);b(T),Z(()=>q(W,s(p).description)),y(z,T)};V(ht,z=>{s(p).description&&z(vt)})}var st=A(ht,2);{var At=z=>{var T=Le();It(T,21,()=>s(p).effectsApplied,Qt,(W,lt)=>{var nt=Ce(),K=x(nt,!0);b(nt),Z(()=>q(K,s(lt))),y(W,nt)}),b(T),y(z,T)};V(st,z=>{s(p).effectsApplied?.length>0&&z(At)})}var Mt=A(st,2);{var _t=z=>{var T=Be(),W=x(T),lt=x(W,!0);b(W);var nt=A(W,2),K=x(nt,!0);b(nt),b(T),Z(()=>{q(lt,s(p).formula),bt(nt,1,`text-xl font-bold font-mono ${s(p).crit?"text-yellow-400":"text-white"}`),q(K,s(p).total)}),y(z,T)};V(Mt,z=>{(s(p).formula||s(p).total!==void 0)&&z(_t)})}b(w),Z(z=>{q(rt,s(p).source),q(C,z),q(ut,s(p).name)},[()=>new Date(s(p).timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})]),y(r,w)}),b(I);var e=A(I,2),t=x(e);t.__click=function(...r){ae.clearHistory?.apply(this,r)};var n=x(t);re(n,{size:14}),wt(),b(t),b(e),b(N),Z(()=>bt(N,1,`fixed top-0 right-0 h-full w-80 bg-slate-900 border-l border-slate-700 z-[100] transition-transform duration-300 shadow-2xl flex flex-col ${g()?"translate-x-0":"translate-x-full"}`)),y(c,u),yt(),h()}Ct(["click"]);function jt(c,o,d){return c>=o*d?{width:o*d,height:o}:{width:c,height:c/d}}function Pt(c,o,d,l){return{x:zt(c.x,o.width,d.width,l),y:zt(c.y,o.height,d.height,l)}}function zt(c,o,d,l){let h=o*l/2-d/2;return l<1&&(h=d/2-o*l/2),Math.min(h,Math.max(c,-h))}function Ut(c,o){return Math.sqrt(Math.pow(c.y-o.y,2)+Math.pow(c.x-o.x,2))}function Ne(c,o,d,l,h,g=!0){const u=g?De:Se,v={x:u(100,((o.width-d.width/h)/2-c.x/h)/o.width*100),y:u(100,((o.height-d.height/h)/2-c.y/h)/o.height*100),width:u(100,d.width/o.width*100/h),height:u(100,d.height/o.height*100/h)},B=u(o.naturalWidth,v.width*o.naturalWidth/100,!0),N=u(o.naturalHeight,v.height*o.naturalHeight/100,!0),_=o.naturalWidth>=o.naturalHeight*l?{width:Math.round(N*l),height:N}:{width:B,height:Math.round(B/l)},M={..._,x:u(o.naturalWidth-_.width,v.x*o.naturalWidth/100,!0),y:u(o.naturalHeight-_.height,v.y*o.naturalHeight/100,!0)};return{croppedAreaPercentages:v,croppedAreaPixels:M}}function De(c,o,d=!1){const l=d?Math.round(o):o;return Math.min(c,Math.max(0,l))}function Se(c,o){return o}function Ht(c,o){return{x:(o.x+c.x)/2,y:(o.y+c.y)/2}}var je=H('<div data-testid="cropper"></div>'),ze=H('<div class="svelte-easy-crop-container svelte-1yetlj5" role="button" data-testid="container"><img class="svelte-easy-crop-image svelte-1yetlj5" alt=""/> <!></div>');function Ue(c,o){xt(o,!0);let d=j(o,"crop",31,()=>gt({x:0,y:0})),l=j(o,"zoom",15,1),h=j(o,"minZoom",11,1),g=j(o,"maxZoom",11,3),u=j(o,"aspect",3,4/3),v=j(o,"cropSize",3,null),B=j(o,"cropShape",3,"rect"),N=j(o,"showGrid",3,!0),D=j(o,"zoomSpeed",3,1),_=j(o,"crossOrigin",3,null),M=j(o,"restrictPosition",3,!0),$=j(o,"tabindex",3,void 0),P=F(null),I=F(gt({width:0,height:0,naturalWidth:0,naturalHeight:0})),m=F(null),i=F(null),a=F(null),e=F(gt({x:0,y:0})),t=F(gt({x:0,y:0})),n=F(0),r=F(null),p=F(null);Jt(()=>{s(a)&&s(a).complete&&O(),s(m)&&(s(m).addEventListener("gesturestart",w),s(m).addEventListener("gesturechange",w))}),Tt(()=>{s(m)&&(s(m).removeEventListener("gesturestart",w),s(m).removeEventListener("gesturechange",w)),E()});const w=f=>f.preventDefault(),E=()=>{typeof document<"u"&&(document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",st),document.removeEventListener("touchmove",ut),document.removeEventListener("touchend",st))},O=()=>{rt(),lt()},Y=()=>v()?v().width/v().height:u(),rt=()=>{s(a)&&(S(I,{width:s(a).width,height:s(a).height,naturalWidth:s(a).naturalWidth,naturalHeight:s(a).naturalHeight},!0),S(P,v()?v():jt(s(a).width,s(a).height,u()),!0)),s(m)&&S(i,s(m).getBoundingClientRect(),!0)},ot=f=>({x:Number(f.clientX),y:Number(f.clientY)}),J=f=>({x:Number(f.clientX),y:Number(f.clientY)}),it=f=>{f.preventDefault(),document.addEventListener("mousemove",C),document.addEventListener("mouseup",st),ht(ot(f))},C=f=>vt(ot(f)),X=f=>{f.preventDefault(),document.addEventListener("touchmove",ut,{passive:!1}),document.addEventListener("touchend",st),f.touches.length===2?At(f):f.touches.length===1&&ht(J(f.touches[0]))},ut=f=>{f.preventDefault(),f.touches.length===2?Mt(f):f.touches.length===1&&vt(J(f.touches[0]))},ht=({x:f,y:L})=>{S(e,{x:f,y:L},!0),S(t,{x:d().x,y:d().y},!0)},vt=({x:f,y:L})=>{s(r)&&window.cancelAnimationFrame(s(r)),S(r,window.requestAnimationFrame(()=>{if(f===void 0||L===void 0||!s(P))return;const U=f-s(e).x,ct=L-s(e).y,at={x:s(t).x+U,y:s(t).y+ct};d(M()?Pt(at,s(I),s(P),l()):at)}),!0)},st=()=>{E(),lt()},At=f=>{const L=J(f.touches[0]),U=J(f.touches[1]);S(n,Ut(L,U),!0),ht(Ht(L,U))},Mt=f=>{const L=J(f.touches[0]),U=J(f.touches[1]),ct=Ht(L,U);vt(ct),s(p)&&window.cancelAnimationFrame(s(p)),S(p,window.requestAnimationFrame(()=>{const at=Ut(L,U),Wt=l()*(at/s(n));W(Wt,ct),S(n,at,!0)}),!0)},_t=f=>{f.preventDefault();const L=ot(f),U=l()-f.deltaY*D()/200;W(U,L)},z=({x:f,y:L})=>{if(!s(i))throw new Error("The Cropper is not mounted");return{x:s(i).width/2-(f-s(i).left),y:s(i).height/2-(L-s(i).top)}},T=({x:f,y:L})=>({x:(f+d().x)/l(),y:(L+d().y)/l()}),W=(f,L)=>{if(!s(P))return;const U=z(L),ct=T(U);l(Math.min(g(),Math.max(f,h())));const at={x:ct.x*l()-U.x,y:ct.y*l()-U.y};d(M()?Pt(at,s(I),s(P),l()):at)},lt=()=>{if(!s(P)||s(P).width===0)return;const f=M()?Pt(d(),s(I),s(P),l()):d(),{croppedAreaPercentages:L,croppedAreaPixels:U}=Ne(f,s(I),s(P),Y(),l(),M());o.oncropcomplete?.({percent:L,pixels:U})};pt(()=>{s(a)&&S(P,v()?v():jt(s(a).width,s(a).height,u()),!0)}),pt(()=>{l()&&lt()});const nt=f=>{pt(()=>(f.addEventListener("touchstart",X),f.addEventListener("mousedown",it),f.addEventListener("wheel",_t,{passive:!1}),()=>{f.removeEventListener("touchstart",X),f.removeEventListener("mousedown",it),f.removeEventListener("wheel",_t)}))};var K=ze();Bt("resize",Vt,rt);var dt=x(K);Nt(dt,f=>S(a,f),()=>s(a));var Rt=A(dt,2);{var Zt=f=>{var L=je();let U;Z(()=>{U=bt(L,1,"svelte-easy-crop-area svelte-1yetlj5",null,U,{"svelte-easy-crop-round":B()==="round","svelte-easy-crop-grid":N()}),Et(L,`width: ${s(P).width??""}px; height: ${s(P).height??""}px;`)}),y(f,L)};V(Rt,f=>{s(P)&&f(Zt)})}b(K),Nt(K,f=>S(m,f),()=>s(m)),ce(K,f=>nt?.(f)),Z(()=>{mt(K,"tabindex",$()),mt(dt,"src",o.image),Et(dt,`transform: translate(${d().x??""}px, ${d().y??""}px) scale(${l()??""});`),mt(dt,"crossorigin",_())}),Bt("load",dt,O),Kt(dt),y(c,K),yt()}const He=c=>new Promise((o,d)=>{const l=new Image;l.addEventListener("load",()=>o(l)),l.addEventListener("error",h=>d(h)),l.setAttribute("crossOrigin","anonymous"),l.src=c});function Ot(c){return c*Math.PI/180}function Te(c,o,d){const l=Ot(d);return{width:Math.abs(Math.cos(l)*c)+Math.abs(Math.sin(l)*o),height:Math.abs(Math.sin(l)*c)+Math.abs(Math.cos(l)*o)}}async function Fe(c,o,d=0,l={horizontal:!1,vertical:!1}){const h=await He(c),g=document.createElement("canvas"),u=g.getContext("2d");if(!u)return null;const v=Ot(d),{width:B,height:N}=Te(h.width,h.height,d);g.width=B,g.height=N,u.translate(B/2,N/2),u.rotate(v),u.scale(l.horizontal?-1:1,l.vertical?-1:1),u.translate(-h.width/2,-h.height/2),u.drawImage(h,0,0);const D=u.getImageData(o.x,o.y,o.width,o.height);return g.width=o.width,g.height=o.height,u.putImageData(D,0,0),new Promise((_,M)=>{g.toBlob($=>{_($)},"image/jpeg",.8)})}var Oe=H('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> Processando...',1),Re=H("<!> Salvar Foto",1),Ze=H('<div class="fixed inset-0 z-[60] flex items-center justify-center bg-black/90 p-4 animate-in fade-in duration-200" role="dialog" aria-modal="true"><div class="bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-2xl flex flex-col shadow-2xl overflow-hidden max-h-[90vh]"><div class="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-950"><h3 class="font-bold text-white flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500"></div> Editar Imagem</h3> <button class="text-slate-400 hover:text-white p-2 rounded-lg hover:bg-slate-800 transition-colors"><!></button></div> <div class="relative flex-1 bg-black min-h-[400px]"><!></div> <div class="p-4 bg-slate-950 border-t border-slate-800 space-y-4"><div class="flex items-center gap-4"><div class="flex items-center gap-2 text-slate-400 w-full px-4"><!> <input type="range" min="1" max="3" step="0.1" class="w-full accent-indigo-500 h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer"/></div></div> <div class="flex justify-end gap-3 pt-2"><button class="px-6 py-2.5 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all text-sm border border-slate-700">Cancelar</button> <button class="px-8 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all text-sm shadow-lg shadow-indigo-900/20 flex items-center gap-2"><!></button></div></div></div></div>');function fr(c,o){xt(o,!0);let d=j(o,"isOpen",3,!1),l=j(o,"imageUrl",3,""),h=j(o,"aspectRatio",3,1),g=F(gt({x:0,y:0})),u=F(1),v=F(null),B=F(!1);async function N(){if(console.log("handleSave called",{isProcessing:s(B),pixelCrop:s(v)}),!(s(B)||!s(v))){S(B,!0);try{console.log("Calling getCroppedImg with",{imageUrl:l().substring(0,50)+"...",pixelCrop:s(v)});const $=await Fe(l(),s(v),0);console.log("getCroppedImg result:",$),$&&o.onCrop($)}catch($){console.error("Error in handleSave:",$)}finally{S(B,!1)}}}var D=G(),_=R(D);{var M=$=>{var P=Ze(),I=x(P),m=x(I),i=A(x(m),2);i.__click=function(...C){o.onClose?.apply(this,C)};var a=x(i);Ft(a,{size:20}),b(i),b(m);var e=A(m,2),t=x(e);Ue(t,{get image(){return l()},get aspect(){return h()},oncropcomplete:C=>{console.log("oncropcomplete prop data:",C),S(v,C.pixels,!0)},showGrid:!0,get crop(){return s(g)},set crop(C){S(g,C,!0)},get zoom(){return s(u)},set zoom(C){S(u,C,!0)}}),b(e);var n=A(e,2),r=x(n),p=x(r),w=x(p);ve(w,{size:16});var E=A(w,2);kt(E),b(p),b(r);var O=A(r,2),Y=x(O);Y.__click=function(...C){o.onClose?.apply(this,C)};var rt=A(Y,2);rt.__click=N;var ot=x(rt);{var J=C=>{var X=Oe();wt(),y(C,X)},it=C=>{var X=Re(),ut=R(X);de(ut,{size:18}),wt(),y(C,X)};V(ot,C=>{s(B)?C(J):C(it,!1)})}b(rt),b(O),b(n),b(I),b(P),Z(()=>rt.disabled=s(B)),ie(E,()=>s(u),C=>S(u,C)),y($,P)};V(_,$=>{d()&&$(M)})}y(c,D),yt()}Ct(["click"]);export{ur as A,ar as C,ue as D,ir as G,hr as H,fr as I,sr as L,fe as M,lr as S,ce as a,dr as b,or as c,nr as d,he as e,cr as s};

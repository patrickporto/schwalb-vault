import"../chunks/DsnmJJEf.js";import{c as oe,b as V,a as i,p as it,d as lt,f as l,e as t,r as e,s as r,g as a,C as Ut,t as O,n as ue,D as ea,B as Lt,S as la,q as oa,h as Ke,aj as Zt,ai as ga,u as _a,U as ma,v as ha}from"../chunks/jP6WwoMK.js";import{d as pt,s as h,g as Ot}from"../chunks/CXO0ygpU.js";import{l as Qe,s as Xe,p as wa,i as g}from"../chunks/AyRiqjkq.js";import{a as ce,s as ut,b as Ua}from"../chunks/C0R4K3qO.js";import{c as Oe,U as $a,f as ge,i as La,W as Fa,r as Na,k as da,m as Ga,n as Va,o as Yt,q as va,t as Ba,u as Wa,g as Ya,v as Le,I as St,x as Kt,y as Qt,z as Ka,G as ca,M as Qa,D as Da,A as Ea,B as Et,C as ya,E as Xa,F as pa,H as Ja,J as It,a as na,s as ka,w as Za,K as er,j as tr}from"../chunks/CmilcwTw.js";import{p as ar}from"../chunks/DKjECNZ2.js";import{g as Ta}from"../chunks/6z9ytAUa.js";import"../chunks/CTvB2Po6.js";import{s as xe,g as rr,r as Ne,e as Ie,i as Ce,d as Pe,h as Bt}from"../chunks/LRkey9YK.js";import{i as wt}from"../chunks/BIvGbCjs.js";import{I as Je,s as Ze}from"../chunks/7Og-jIZB.js";import{a as Pa,C as sr,L as or,D as ir,b as lr,M as ta,S as aa,G as nr,H as dr}from"../chunks/X7KCTRcY.js";import{W as vr}from"../chunks/CpySd1Zq.js";import{b as me,a as cr}from"../chunks/Crg2OtD8.js";import{M as pr,T as Wt,P as ct,a as sa,S as ur,X as ja}from"../chunks/BPuODlaL.js";import{C as Aa}from"../chunks/BzUzmChH.js";import{t as br,a as xr}from"../chunks/CZy9ruAA.js";function ia(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];Je(S,Xe({name:"activity"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function fr(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Je(S,Xe({name:"arrow-left"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function ua(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"}],["path",{d:"M8 10h8"}],["path",{d:"M8 18h8"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"}]];Je(S,Xe({name:"backpack"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function gr(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["circle",{cx:"11",cy:"13",r:"9"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"}],["path",{d:"m22 2-1.5 1.5"}]];Je(S,Xe({name:"bomb"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function za(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];Je(S,Xe({name:"book"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function xa(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M16.17 7.83 2 22"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12"}],["path",{d:"m7.83 7.83 8.34 8.34"}]];Je(S,Xe({name:"clover"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function _r(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]];Je(S,Xe({name:"coins"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function mr(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21"}],["path",{d:"m5.082 11.09 8.828 8.828"}]];Je(S,Xe({name:"eraser"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function hr(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z"}]];Je(S,Xe({name:"fast-forward"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function Sa(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];Je(S,Xe({name:"file-text"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function wr(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];Je(S,Xe({name:"infinity"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function $r(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];Je(S,Xe({name:"languages"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function Ma(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"m16 17 5-5-5-5"}],["path",{d:"M21 12H9"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}]];Je(S,Xe({name:"log-out"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function yr(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];Je(S,Xe({name:"moon"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function kr(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z"}]];Je(S,Xe({name:"rewind"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function Ar(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];Je(S,Xe({name:"user"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function ra(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];Je(S,Xe({name:"wand-sparkles"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}function Mt(S,p){const o=Qe(p,["children","$$slots","$$events","$$legacy"]);const u=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];Je(S,Xe({name:"zap"},()=>o,{get iconNode(){return u},children:(_,z)=>{var n=oe(),f=V(n);Ze(f,p,"default",{}),i(_,n)},$$slots:{default:!0}}))}const zr=!1,pi=Object.freeze(Object.defineProperty({__proto__:null,prerender:zr},Symbol.toStringTag,{value:"Module"}));var Sr=l('<div class="text-[9px] font-black text-amber-500 uppercase tracking-tighter mt-1 animate-pulse">Aguardando Aprovação</div>'),Mr=l('<div class="text-[10px] text-slate-400 mt-0.5 font-medium flex items-center gap-1"><span class="opacity-50 font-bold uppercase tracking-tighter">Mestre:</span> <span class="text-indigo-300"> </span></div>'),Nr=l('<div><div class="flex items-center gap-3"><div class="relative"><div><!></div> <div></div></div> <div><div>Campanha Ativa</div> <div class="font-bold text-white text-base leading-tight"> </div> <!></div></div> <button class="bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-slate-500 hover:text-red-400 transition-all active:scale-95" title="Sair"><!></button></div>'),Dr=l("<div><div></div> <span> </span></div>"),Er=l('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><div><!></div> <h3 class="text-[11px] font-black text-slate-400 uppercase tracking-[0.15em]">Campanha Ativa</h3></div> <button class="p-2 text-slate-600 hover:text-red-400 hover:bg-red-400/5 rounded-lg transition-all opacity-0 group-hover:opacity-100" title="Abandonar Campanha"><!></button></div> <div class="space-y-1"><div class="font-bold text-white text-lg tracking-tight leading-tight"> </div> <div class="text-[10px] font-medium text-slate-500 flex items-center gap-1.5 pt-0.5"><span class="uppercase tracking-tighter opacity-70">Mestre:</span> <span class="text-indigo-400 font-bold"> </span></div></div> <div class="flex items-center justify-between pt-3 border-t border-white/5"><div class="flex items-center gap-2"><div></div> <span> </span></div> <div class="flex items-center gap-1 text-[10px] text-slate-600 font-mono"><!> </div></div></div>');function ba(S,p){it(p,!0);const o=()=>ce(Oe,"$character",_),u=()=>ce(La,"$isGmOnline",_),[_,z]=ut();let n=wa(p,"compact",3,!1),f=wa(p,"banner",3,!1);var H=oe(),Y=V(H);{var s=b=>{const c=Ut(()=>o().campaignApproval==="pending");var T=oe(),D=V(T);{var j=q=>{var d=Nr(),I=t(d),k=t(I),w=t(k),x=t(w);$a(x,{size:20}),e(w);var m=r(w,2);e(k);var $=r(k,2),v=t($),A=r(v,2),U=t(A,!0);e(A);var J=r(A,2);{var ee=G=>{var ie=Sr();i(G,ie)},ne=G=>{var ie=Mr(),Z=r(t(ie),2),Q=t(Z,!0);e(Z),e(ie),O(()=>h(Q,o().gmName)),i(G,ie)};g(J,G=>{a(c)?G(ee):G(ne,!1)})}e($),e(I);var L=r(I,2);L.__click=()=>{confirm("Sair da campanha?")&&ge.leaveCampaign()};var y=t(L);Ma(y,{size:18}),e(L),e(d),O(()=>{xe(d,1,`bg-indigo-600/10 backdrop-blur-md border border-indigo-500/20 rounded-2xl p-4 flex items-center justify-between shadow-xl shadow-indigo-950/20 ${a(c)?"border-amber-500/30 bg-amber-500/5":""}`),xe(w,1,`w-10 h-10 ${a(c)?"bg-amber-600/20 text-amber-400 border-amber-500/30":"bg-indigo-600/20 text-indigo-400 border-indigo-500/30"} rounded-xl flex items-center justify-center`),xe(m,1,`absolute -top-1 -right-1 w-3 h-3 ${a(c)?"bg-amber-500 animate-pulse":u()?"bg-green-500 animate-pulse":"bg-slate-600"} rounded-full border-2 border-slate-950 shadow-[0_0_8px_rgba(34,197,94,0.6)]`),xe(v,1,`text-[10px] ${a(c)?"text-amber-500/70":"text-indigo-400/70"} font-black uppercase tracking-[0.2em] leading-none mb-1`),h(U,o().campaignName)}),i(q,d)},P=q=>{var d=oe(),I=V(d);{var k=x=>{var m=Dr(),$=t(m),v=r($,2),A=t(v,!0);e(v),e(m),O(()=>{xe(m,1,`inline-flex items-center gap-2 px-3 py-1 ${a(c)?"bg-amber-500/10 border-amber-500/20":"bg-indigo-500/10 border-indigo-500/20"} rounded-full shadow-sm glass`),xe($,1,`w-1.5 h-1.5 rounded-full ${a(c)?"bg-amber-500 animate-pulse":u()?"bg-green-500 animate-pulse":"bg-slate-600"} shadow-[0_0_8px_rgba(34,197,94,0.4)]`),xe(v,1,`text-[9px] font-black ${a(c)?"text-amber-500":"text-indigo-400"} uppercase tracking-widest truncate max-w-[150px]`),h(A,o().campaignName)}),i(x,m)},w=x=>{var m=Er(),$=t(m),v=t($),A=t(v),U=t(A);$a(U,{size:16}),e(A),ue(2),e(v);var J=r(v,2);J.__click=function(...le){ge.leaveCampaign?.apply(this,le)};var ee=t(J);Ma(ee,{size:14}),e(J),e($);var ne=r($,2),L=t(ne),y=t(L,!0);e(L);var G=r(L,2),ie=r(t(G),2),Z=t(ie,!0);e(ie),e(G),e(ne);var Q=r(ne,2),B=t(Q),te=t(B),ae=r(te,2),pe=t(ae,!0);e(ae),e(B);var K=r(B,2),re=t(K);{var he=le=>{Pa(le,{size:10,class:"opacity-40 animate-spin",style:"animation-duration: 3s"})},ke=le=>{var de=oe(),we=V(de);{var $e=fe=>{Fa(fe,{size:10,class:"opacity-40"})},Ae=fe=>{vr(fe,{size:10,class:"opacity-40 text-red-500/50"})};g(we,fe=>{u()?fe($e):fe(Ae,!1)},!0)}i(le,de)};g(re,le=>{a(c)?le(he):le(ke,!1)})}var De=r(re);e(K),e(Q),e(m),O(()=>{xe(m,1,`bg-slate-900/50 border border-slate-800 rounded-2xl p-5 space-y-4 shadow-lg backdrop-blur-sm group hover:border-indigo-500/30 transition-all duration-300 ${!u()&&!a(c)?"opacity-60 saturate-50":""} ${a(c)?"border-amber-500/20":""}`),xe(A,1,`p-1.5 ${a(c)?"bg-amber-500/10 text-amber-500":u()?"bg-indigo-500/10 text-indigo-400":"bg-slate-800 text-slate-500"} rounded-lg`),h(y,o().campaignName),h(Z,o().gmName),xe(te,1,`w-1.5 h-1.5 rounded-full ${a(c)?"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.4)] animate-pulse":u()?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.4)] animate-pulse":"bg-slate-700"}`),xe(ae,1,`text-[11px] font-bold uppercase tracking-wider ${a(c)?"text-amber-500":u()?"text-slate-400":"text-slate-600"}`),h(pe,a(c)?"Pendente de Aprovação":u()?"Online":"Offline"),h(De,` ${a(c)?"PENDENTE":u()?"SYNCED":"WAITING"}`)}),i(x,m)};g(I,x=>{n()?x(k):x(w,!1)},!0)}i(q,d)};g(D,q=>{f()?q(j):q(P,!1)})}i(b,T)};g(Y,b=>{o().campaignId&&b(s)})}i(S,H),lt(),z()}pt(["click"]);var Tr=l('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Pr=l('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),jr=l('<div class="absolute top-0 left-0 w-full h-full z-20 bg-cyan-400/20 pointer-events-none animate-pulse"></div>'),Ir=l('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),Cr=l('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group" aria-label="Voltar para Dashboard" title="Voltar para Dashboard"><!> <!></button> <button class="flex items-center gap-2 group text-left" aria-label="Informações do Personagem"><div class="w-8 h-8 sm:w-10 sm:h-10 bg-indigo-600 rounded-lg sm:rounded-full border border-white/10 flex items-center justify-center text-sm sm:text-lg font-black shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition-transform"> </div> <div class="hidden xs:block svelte-fpzs02"><div class="flex items-center gap-2"><h1 class="text-xs sm:text-sm font-bold text-white leading-tight truncate max-w-[80px] sm:max-w-none group-hover:text-indigo-400 transition-colors"> </h1></div> <p class="text-[10px] text-slate-500 font-medium"> </p></div></button></div> <button class="flex-1 max-w-md cursor-pointer group px-2 sm:px-0 text-left" aria-label="Estado de Saúde"><div class="flex justify-between text-[10px] sm:text-xs mb-1.5 px-1"><span><!></span> <span class="text-slate-400 font-mono flex items-center gap-1 group-hover:text-white transition-colors"><span> </span><span class="opacity-30">/</span><span class="text-white font-bold"> </span></span></div> <div class="h-3 sm:h-5 w-full bg-slate-950 rounded-full border border-white/5 relative overflow-hidden group-hover:border-white/20 transition-all shadow-inner"><div></div> <!> <!> <!></div></button> <div class="flex items-center gap-1 sm:gap-2"><button class="p-2 text-slate-400 hover:text-indigo-400 hover:bg-indigo-400/10 rounded-full transition-all" title="Descanso"><!></button> <button class="p-2 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative" title="Histórico"><!> <!></button> <button class="hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all" title="Configurações"><!></button></div></div></div></header>');function Or(S,p){it(p,!1);const o=()=>ce(Oe,"$character",s),u=()=>ce(Ga,"$isIncapacitated",s),_=()=>ce(Va,"$isInjured",s),z=()=>ce(Yt,"$damage",s),n=()=>ce(va,"$effectiveMaxHealth",s),f=()=>ce(Ba,"$damagePercentage",s),H=()=>ce(Wa,"$tempHealth",s),Y=()=>ce(Ya,"$rollHistory",s),[s,b]=ut();function c(E){Le.update(C=>({...C,type:E,isOpen:!0}))}wt();var T=Cr(),D=t(T),j=t(D),P=t(j),q=t(P);q.__click=()=>Ta(Na("/"));var d=t(q);sr(d,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var I=r(d,2);or(I,{size:18,class:"hidden sm:block opacity-50"}),e(q);var k=r(q,2);k.__click=()=>c("character_info");var w=t(k),x=t(w,!0);e(w);var m=r(w,2),$=t(m),v=t($),A=t(v,!0);e(v),e($);var U=r($,2),J=t(U);e(U),e(m),e(k),e(P);var ee=r(P,2);ee.__click=()=>c("health");var ne=t(ee),L=t(ne),y=t(L);{var G=E=>{var C=ea("INCAPACITADO");i(E,C)},ie=E=>{var C=oe(),be=V(C);{var ye=M=>{var X=ea("FERIDO");i(M,X)},je=M=>{var X=oe(),N=V(X);{var ve=_e=>{},se=_e=>{var Ee=ea("SAUDÁVEL");i(_e,Ee)};g(N,_e=>{z()>0?_e(ve):_e(se,!1)},!0)}i(M,X)};g(be,M=>{_()?M(ye):M(je,!1)},!0)}i(E,C)};g(y,E=>{u()?E(G):E(ie,!1)})}e(L);var Z=r(L,2),Q=t(Z),B=t(Q,!0);e(Q);var te=r(Q,2),ae=t(te,!0);e(te),e(Z),e(ne);var pe=r(ne,2),K=t(pe),re=r(K,2);{var he=E=>{var C=Tr();O(()=>{xe(C,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 ${u()?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":f()>=80?"bg-gradient-to-r from-red-600 to-rose-500":_()?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),rr(C,`width: ${f()??""}%`)}),i(E,C)};g(re,E=>{f()>0&&E(he)})}var ke=r(re,2);{var De=E=>{var C=Pr();i(E,C)};g(ke,E=>{z()===0&&E(De)})}var le=r(ke,2);{var de=E=>{var C=jr();i(E,C)};g(le,E=>{H()>0&&E(de)})}e(pe),e(ee);var we=r(ee,2),$e=t(we);$e.__click=()=>c("rest_confirm");var Ae=t($e);yr(Ae,{size:18}),e($e);var fe=r($e,2);fe.__click=()=>da.update(E=>!E);var ze=t(fe);ir(ze,{size:18});var Se=r(ze,2);{var R=E=>{var C=Ir();i(E,C)};g(Se,E=>{Y().length>0&&E(R)})}e(fe);var W=r(fe,2);W.__click=()=>c("character_info");var F=t(W);lr(F,{size:18}),e(W),e(we),e(j),e(D),e(T),O(E=>{h(x,E),h(A,o().name),h(J,`Nv ${o().level??""}`),xe(L,1,`font-black uppercase tracking-wider ${u()?"text-red-500 animate-pulse":_()?"text-amber-500":z()>0?"text-slate-400":"text-emerald-500"}`),xe(Q,1,`${z()===0?"text-emerald-400":u()?"text-red-400":_()?"text-amber-400":"text-orange-400"} font-bold group-hover:text-red-300`),h(B,z()),h(ae,n()),xe(K,1,`absolute top-0 left-0 h-full w-full ${z()===0?"bg-emerald-900/20":"bg-slate-900/50"}`)},[()=>o().name.charAt(0)]),i(S,T),lt(),b()}pt(["click"]);var Hr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),qr=l("<option> </option>"),Rr=l("<option> </option>"),Ur=l('<div class="grid grid-cols-3 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Dano</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Dano (d6)"/></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Traits</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Traits"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Empunhadura</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Alcance</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Range"/></label></div>'),Lr=l('<div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Fixa</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Fixed Def"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Mod</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Mod Def"/></label></div>'),Fr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Gr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tipo</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Qtd</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Qtd"/></label></div> <!> <!> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Vr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Br=l("<option> </option>"),Wr=l("<option> </option>"),Yr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Kr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tier</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <div class="relative"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tradição</span> <input list="traditions" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Tradição"/></label> <datalist id="traditions"></datalist></div></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><label for="maxCastings" class="text-xs text-slate-400 uppercase">Castings</label> <input id="maxCastings" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),Qr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Xr=l('<div class="flex items-center gap-2 border-l border-slate-700 pl-2"><label for="maxUses" class="text-xs text-slate-400 uppercase">Max Uses</label> <input id="maxUses" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div>'),Jr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Zr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><input type="checkbox" id="isPassive" class="w-4 h-4 rounded bg-slate-800 border-slate-600 text-indigo-600 focus:ring-indigo-500"/> <label for="isPassive" class="text-xs text-slate-400 uppercase font-bold flex-1 cursor-pointer">Passivo / Ilimitado</label> <!></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),es=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),ts=l('<div><label for="effectName" class="text-xs font-bold text-slate-400 uppercase">Nome</label> <input id="effectName" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/> <!></div>'),as=l('<div class="text-center text-xs text-slate-500 italic mb-2">Nome e Descrição herdados do item pai.</div>'),rs=l("<option> </option>"),ss=l('<input type="number" class="bg-slate-900 border border-slate-700 rounded p-2 text-white"/>'),os=l("<option> </option>"),is=l('<div class="flex gap-1 items-center"><select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/3"></select> <select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4"><option>Add (+/-)</option><option>Set (=)</option><option>Mult (x)</option></select> <input type="number" class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4 text-center"/> <button class="text-slate-600 hover:text-red-400 p-1" aria-label="Remover Modificador"><!></button></div>'),ls=l('<div><label class="text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"></textarea></label></div>'),ns=l('<div class="space-y-4"><!> <div><label for="effectDuration" class="text-xs font-bold text-slate-400 uppercase">Duração</label> <div class="grid grid-cols-2 gap-2"><select id="effectDuration" class="bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"></select> <!></div></div> <div class="bg-slate-950 p-3 rounded border border-slate-800"><div class="flex justify-between items-center mb-2"><span class="text-xs font-bold text-indigo-400 uppercase">Modificadores</span> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600 flex items-center gap-1"><!> Add</button></div> <div class="space-y-2"></div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar Efeito</button></div>'),ds=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),vs=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg uppercase"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),cs=l('<div class="space-y-4"><div class="grid grid-cols-2 gap-4"><div><label class="text-xs text-slate-400 uppercase font-bold">Vida Normal <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs text-slate-400 uppercase font-bold">Vida Atual <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div><label class="text-xs text-red-400 uppercase font-bold">Dano <input type="number" class="w-full bg-slate-900 border border-red-900/50 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Atualizar</button></div>'),ps=l('<div class="space-y-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nível <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs font-bold text-slate-400 uppercase">Ancestralidade <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div class="pt-2 border-t border-slate-700 space-y-3"><div><label class="text-[10px] font-bold text-slate-400 uppercase">Novice <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Expert <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Master <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded mt-2">Salvar</button></div>'),us=l('<div class="mt-4 p-3 bg-green-900/20 border border-green-900/50 rounded-lg"><div class="flex items-center gap-2 mb-1 text-[10px] font-bold text-green-400 uppercase tracking-wider">Efeito Associado</div> <div class="text-xs text-green-200/70"> </div></div>'),bs=l('<button class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> APLICAR EFEITO E USAR</button> <button class="w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-2 rounded-lg text-sm transition-colors">USAR SEM APLICAR EFEITO</button>',1),xs=l('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> CONFIRMAR USO</button>'),fs=l('<div class="space-y-4"><div class="bg-slate-900 p-4 rounded-lg border border-slate-700"><p class="text-indigo-300 font-bold text-2xl mb-1 text-center"> </p> <p class="text-slate-400 text-sm italic mb-4 text-center"> </p> <!></div> <div class="flex flex-col gap-2 pt-2"><!> <button class="w-full text-slate-500 hover:text-slate-300 text-xs font-bold uppercase tracking-widest py-2 transition-colors mt-2">CANCELAR</button></div></div>'),gs=l('<div class="text-center space-y-6"><div class="flex justify-center"><!></div> <div><p class="text-lg text-white font-bold">Realizar Descanso?</p></div> <div class="flex gap-4 justify-center"><button class="px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold">Cancelar</button><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold">Descansar</button></div></div>'),_s=l('<div class="space-y-4"><h3 class="text-center font-bold text-white uppercase mb-2">Rolagem</h3> <div class="bg-slate-900 p-4 rounded-lg border border-slate-700 text-center"><div class="flex justify-center items-center gap-6 mb-2"><button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-red-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Diminuir Modificador"><!></button> <span> </span> <button class="w-12 h-12 rounded-full bg-slate-800 hover:bg-green-900 flex items-center justify-center text-slate-300 hover:text-white border border-slate-700" aria-label="Aumentar Modificador"><!></button></div> <div class="text-xs text-slate-500"> </div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2">ROLAR</button></div>'),ms=l('<div class="space-y-6 text-center"><div class="bg-indigo-900/20 border border-indigo-500/30 p-4 rounded-xl"><h3 class="text-2xl font-bold text-white mb-1"> </h3> <p class="text-xs text-indigo-300 uppercase tracking-widest font-bold"> </p></div> <div class="grid grid-cols-2 gap-4"><button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-indigo-600 border border-slate-700 hover:border-indigo-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Ataque</span></button> <button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-red-600 border border-slate-700 hover:border-red-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-red-500 group-hover:bg-red-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Dano</span></button></div> <button class="text-slate-500 hover:text-slate-300 text-[10px] font-bold uppercase tracking-[0.2em]">Voltar</button></div>'),hs=l('<span class="text-[10px] text-slate-500 uppercase font-black tracking-widest">Passivo</span>'),ws=l("<span></span>"),$s=l('<span class="block text-[10px] text-slate-500 uppercase font-bold text-center">Cargas</span> <p class="flex items-center justify-center gap-1"></p> <span> </span>',1),ys=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-yellow-900/20 hover:border-yellow-600/50 flex items-center justify-between transition-all group disabled:opacity-30 disabled:hover:bg-slate-900/50 disabled:hover:border-slate-700 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform"><!></div> <div><p class="text-white font-bold"> </p> <p class="text-[10px] text-slate-500 italic max-w-xs"> </p></div></div> <div class="text-right shrink-0"><!></div></button>'),ks=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Nenhum talento disponível.</p></div>'),As=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),zs=l("<div></div>"),Ss=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-indigo-900/20 hover:border-indigo-600 text-indigo-400/0 hover:text-indigo-400 flex items-center justify-between transition-all group disabled:opacity-30 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-indigo-400 group-hover:scale-110 transition-all border border-transparent group-hover:border-indigo-500/30"><!></div> <div><p class="text-white font-bold group-hover:text-indigo-300 transition-colors"> </p> <p class="text-[10px] text-slate-500 uppercase font-bold tracking-tight"> </p></div></div> <div class="text-right shrink-0"><span class="block text-[10px] text-slate-500 uppercase font-bold text-center mb-1">Casts</span> <div class="flex gap-0.5"></div></div></button>'),Ms=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Grimório vazio.</p></div>'),Ns=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Ds=l("<button> <!></button>"),Es=l('<div class="text-xs"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),Ts=l('<p class="text-xs text-slate-600 italic text-center">Nenhuma aflição selecionada.</p>'),Ps=l('<div class="grid grid-cols-2 gap-2"></div> <div class="mt-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700"><p class="text-[10px] text-slate-500 uppercase font-bold mb-2">Resumo dos Efeitos</p> <div class="space-y-2"><!> <!></div></div>',1),js=l('<div class="p-6 overflow-y-auto custom-scrollbar"><!></div>');function Is(S,p){it(p,!0);const o=()=>ce(Le,"$modalState",H),u=()=>ce(Yt,"$damage",H),_=()=>ce(Kt,"$normalHealth",H),z=()=>ce(Qt,"$currentHealth",H),n=()=>ce(Oe,"$character",H),f=()=>ce(Ka,"$activeEffects",H),[H,Y]=ut();let s=Lt(la({})),b=Lt(la({})),c=Lt(0),T=Lt(la([]));oa(()=>{if(o().isOpen){const{type:v,data:A}=o();v==="item"&&Ke(s,A?{...A}:{name:"",type:St.OTHER,quantity:1,price:0,description:"",availability:"Common",quality:"Standard"},!0),v==="spell"&&Ke(s,A?{...A}:{name:"",tier:"Novice",tradition:"Destruction",type:"Attack",castings:1,maxCastings:1,description:"",effect:null},!0),v==="talent"&&Ke(s,A?{...A}:{name:"",description:"",uses:0,maxUses:0,isPassive:!1,effect:null},!0),v==="attribute"&&Ke(s,{...A},!0),v==="health"&&Ke(s,{d:u(),nh:_(),ch:z()},!0),v==="character_info"&&Ke(s,{name:n().name,level:n().level,ancestry:n().ancestry,novicePath:n().paths.novice,expertPath:n().paths.expert,masterPath:n().paths.master,normalHealth:_(),currentHealth:z()},!0),v==="stat"&&(A==="defense"?Ke(s,{key:"naturalDefense",name:"Defesa Natural",value:n().naturalDefense},!0):A==="speed"&&Ke(s,{key:"speed",name:"Velocidade",value:n().speed},!0)),v==="pre_roll"&&(Ke(T,f().map(U=>U.id),!0),Ke(c,0)),v==="effect"&&(A&&A.parentType?Ke(b,A.parentData.effect||{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0):A?(Ke(b,{...A},!0),Array.isArray(a(b).modifiers)||(a(b).modifiers=[])):Ke(b,{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0))}});function D(){Le.update(v=>({...v,type:null,isOpen:!1,data:null}))}function j(){if(!a(s).name?.trim())return alert("Nome é obrigatório");const v={...a(s),id:a(s).id||Date.now()};o().data?ge.updateItem(v):ge.addItem(v),D()}function P(){if(!a(s).name?.trim())return alert("Nome é obrigatório");const v={...a(s),id:a(s).id||Date.now()};o().data?ge.updateSpell(v):ge.addSpell(v),D()}function q(){if(!a(s).name?.trim())return alert("Nome é obrigatório");const v={...a(s),id:a(s).id||Date.now()};a(s).isPassive?(v.maxUses=0,v.uses=0):!o().data&&a(s).maxUses>0&&(v.uses=a(s).maxUses),o().data?ge.updateTalent(v):ge.addTalent(v),D()}function d(){const v=a(b);if(!o().data?.parentType&&!v.name?.trim())return alert("Nome do efeito é obrigatório");const A={...v,initialRounds:v.duration==="ROUNDS"?v.roundsLeft:0};if(o().data?.parentType){const U={...o().data.parentData,effect:A};Le.update(J=>({...J,type:o().data.parentType,data:U}));return}v.id&&n().effects.some(U=>U.id===v.id)?ge.updateEffect(A):ge.addEffect({...A,id:Date.now(),isActive:!0}),D()}function I(){Oe.update(v=>({...v,attributes:v.attributes.map(A=>A.key===a(s).key?{...A,value:parseInt(a(s).value)}:A)})),D()}function k(){Yt.set(Math.max(0,parseInt(a(s).d))),Kt.set(Math.max(1,parseInt(a(s).nh))),Qt.set(Math.max(0,parseInt(a(s).ch))),D()}function w(){Oe.update(v=>({...v,name:a(s).name,level:parseInt(a(s).level)||0,ancestry:a(s).ancestry,paths:{novice:a(s).novicePath,expert:a(s).expertPath,master:a(s).masterPath}})),Kt.set(parseInt(a(s).normalHealth)),Qt.set(parseInt(a(s).currentHealth)),D()}function x(){Oe.update(v=>({...v,[a(s).key]:parseInt(a(s).value)||0})),D()}function m(){a(b).modifiers=[...a(b).modifiers||[],{target:"str",type:Et.ADD,value:1}]}function $(v){a(b).modifiers=a(b).modifiers.filter((A,U)=>U!==v)}{let v=Ut(()=>o().type==="item"?"Editor de Item":o().type==="spell"?"Editar Magia":o().type==="talent"?"Editar Talento":o().type==="effect"?"Gerenciar Efeito":o().type==="pre_roll"?"Confirmar Rolagem":o().type==="confirm_spell"?"Confirmar Conjuração":o().type==="confirm_talent"?"Confirmar Ativação":o().type==="cast_spell"?"Grimório":o().type==="select_talent"?"Seus Talentos":o().type==="weapon_menu"?"Opções de Ataque":o().type==="character_info"?"Informações do Personagem":o().type==="health"?"Vigor & Dano":o().type==="attribute"?"Atributo":o().type==="stat"?a(s).name:o().type==="affliction"?"Gerenciar Aflições":"Informação");pr(S,{get isOpen(){return o().isOpen},onClose:D,maxWidth:"max-w-lg",get title(){return a(v)},children:(A,U)=>{var J=js(),ee=t(J);{var ne=y=>{var G=Gr(),ie=t(G),Z=t(ie),Q=r(t(Z));Ne(Q),e(Z);var B=r(Z,2);{var te=R=>{var W=Hr();i(R,W)};g(B,R=>{a(s).name||R(te)})}e(ie);var ae=r(ie,2),pe=t(ae),K=r(t(pe),2);Ie(K,21,()=>Object.values(St),Ce,(R,W)=>{var F=qr(),E=t(F,!0);e(F);var C={};O(()=>{h(E,a(W)),C!==(C=a(W))&&(F.value=(F.__value=a(W))??"")}),i(R,F)}),e(K),e(pe);var re=r(pe,2),he=r(t(re),2);Ne(he),e(re),e(ae);var ke=r(ae,2);{var De=R=>{var W=Ur(),F=t(W),E=r(t(F),2);Ne(E),e(F);var C=r(F,2),be=r(t(C),2);Ne(be),e(C);var ye=r(C,2),je=r(t(ye),2);Ie(je,21,()=>Object.values(ca),Ce,(N,ve)=>{var se=Rr(),_e=t(se,!0);e(se);var Ee={};O(()=>{h(_e,a(ve)),Ee!==(Ee=a(ve))&&(se.value=(se.__value=a(ve))??"")}),i(N,se)}),e(je),e(ye);var M=r(ye,2),X=r(t(M),2);Ne(X),e(M),e(W),me(E,()=>a(s).damageDice,N=>a(s).damageDice=N),me(be,()=>a(s).traits,N=>a(s).traits=N),Bt(je,()=>a(s).grip,N=>a(s).grip=N),me(X,()=>a(s).range,N=>a(s).range=N),i(R,W)};g(ke,R=>{a(s).type===St.WEAPON&&R(De)})}var le=r(ke,2);{var de=R=>{var W=Lr(),F=t(W),E=r(t(F),2);Ne(E),e(F);var C=r(F,2),be=r(t(C),2);Ne(be),e(C),e(W),me(E,()=>a(s).defenseFixed,ye=>a(s).defenseFixed=ye),me(be,()=>a(s).defenseMod,ye=>a(s).defenseMod=ye),i(R,W)};g(le,R=>{a(s).type===St.ARMOR&&R(de)})}var we=r(le,2),$e=r(t(we));Zt($e),Pe($e,"rows",3),e(we);var Ae=r(we,2),fe=t(Ae);{var ze=R=>{var W=Fr();W.__click=()=>{ge.deleteItem(o().data.id),D()};var F=t(W);Wt(F,{size:18}),e(W),i(R,W)};g(fe,R=>{o().data&&R(ze)})}var Se=r(fe,2);Se.__click=j,e(Ae),e(G),me(Q,()=>a(s).name,R=>a(s).name=R),Bt(K,()=>a(s).type,R=>a(s).type=R),me(he,()=>a(s).quantity,R=>a(s).quantity=R),me($e,()=>a(s).description,R=>a(s).description=R),i(y,G)},L=y=>{var G=oe(),ie=V(G);{var Z=B=>{var te=Kr(),ae=t(te),pe=t(ae),K=r(t(pe));Ne(K),e(pe);var re=r(pe,2);{var he=M=>{var X=Vr();i(M,X)};g(re,M=>{a(s).name||M(he)})}e(ae);var ke=r(ae,2),De=t(ke),le=r(t(De),2);Ie(le,20,()=>["Novice","Expert","Master"],Ce,(M,X)=>{var N=Br(),ve=t(N,!0);e(N);var se={};O(()=>{h(ve,X),se!==(se=X)&&(N.value=(N.__value=X)??"")}),i(M,N)}),e(le),e(De);var de=r(De,2),we=t(de),$e=r(t(we),2);Ne($e),e(we);var Ae=r(we,2);Ie(Ae,21,()=>Qa,Ce,(M,X)=>{var N=Wr(),ve=t(N,!0);e(N);var se={};O(()=>{h(ve,a(X)),se!==(se=a(X))&&(N.value=(N.__value=a(X))??"")}),i(M,N)}),e(Ae),e(de),e(ke);var fe=r(ke,2),ze=r(t(fe),2);Ne(ze),ze.__input=()=>a(s).castings=a(s).maxCastings,e(fe);var Se=r(fe,2),R=r(t(Se),2);R.__click=()=>Le.update(M=>({...M,type:"effect",data:{parentType:"spell",parentData:a(s)}}));var W=t(R,!0);e(R),e(Se);var F=r(Se,2),E=r(t(F));Zt(E),Pe(E,"rows",4),e(F);var C=r(F,2),be=t(C);{var ye=M=>{var X=Yr();X.__click=()=>{ge.deleteSpell(o().data.id),D()};var N=t(X);Wt(N,{size:18}),e(X),i(M,X)};g(be,M=>{o().data&&M(ye)})}var je=r(be,2);je.__click=P,e(C),e(te),O(()=>{xe(R,1,`text-[10px] px-2 py-1 rounded border ${a(s).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),h(W,a(s).effect?"Configurado":"Nenhum")}),me(K,()=>a(s).name,M=>a(s).name=M),Bt(le,()=>a(s).tier,M=>a(s).tier=M),me($e,()=>a(s).tradition,M=>a(s).tradition=M),me(ze,()=>a(s).maxCastings,M=>a(s).maxCastings=M),me(E,()=>a(s).description,M=>a(s).description=M),i(B,te)},Q=B=>{var te=oe(),ae=V(te);{var pe=re=>{var he=Zr(),ke=t(he),De=t(ke),le=r(t(De));Ne(le),e(De);var de=r(De,2);{var we=M=>{var X=Qr();i(M,X)};g(de,M=>{a(s).name||M(we)})}e(ke);var $e=r(ke,2),Ae=t($e);Ne(Ae);var fe=r(Ae,4);{var ze=M=>{var X=Xr(),N=r(t(X),2);Ne(N),e(X),me(N,()=>a(s).maxUses,ve=>a(s).maxUses=ve),i(M,X)};g(fe,M=>{a(s).isPassive||M(ze)})}e($e);var Se=r($e,2),R=r(t(Se),2);R.__click=()=>Le.update(M=>({...M,type:"effect",data:{parentType:"talent",parentData:a(s)}}));var W=t(R,!0);e(R),e(Se);var F=r(Se,2),E=r(t(F));Zt(E),Pe(E,"rows",4),e(F);var C=r(F,2),be=t(C);{var ye=M=>{var X=Jr();X.__click=()=>{ge.deleteTalent(o().data.id),D()};var N=t(X);Wt(N,{size:18}),e(X),i(M,X)};g(be,M=>{o().data&&M(ye)})}var je=r(be,2);je.__click=q,e(C),e(he),O(()=>{xe(R,1,`text-[10px] px-2 py-1 rounded border ${a(s).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),h(W,a(s).effect?"Configurado":"Nenhum")}),me(le,()=>a(s).name,M=>a(s).name=M),cr(Ae,()=>a(s).isPassive,M=>a(s).isPassive=M),me(E,()=>a(s).description,M=>a(s).description=M),i(re,he)},K=re=>{var he=oe(),ke=V(he);{var De=de=>{var we=ns(),$e=t(we);{var Ae=ve=>{var se=ts(),_e=r(t(se),2);Ne(_e);var Ee=r(_e,2);{var Fe=He=>{var nt=es();i(He,nt)};g(Ee,He=>{a(b).name||He(Fe)})}e(se),me(_e,()=>a(b).name,He=>a(b).name=He),i(ve,se)},fe=ve=>{var se=as();i(ve,se)};g($e,ve=>{o().data?.parentType?ve(fe,!1):ve(Ae)})}var ze=r($e,2),Se=r(t(ze),2),R=t(Se);Ie(R,21,()=>Object.entries(Da),Ce,(ve,se)=>{var _e=Ut(()=>ga(a(se),2));let Ee=()=>a(_e)[0],Fe=()=>a(_e)[1];var He=rs(),nt=t(He,!0);e(He);var Ge={};O(()=>{h(nt,Fe()),Ge!==(Ge=Ee())&&(He.value=(He.__value=Ee())??"")}),i(ve,He)}),e(R);var W=r(R,2);{var F=ve=>{var se=ss();Ne(se),me(se,()=>a(b).roundsLeft,_e=>a(b).roundsLeft=_e),i(ve,se)};g(W,ve=>{a(b).duration==="ROUNDS"&&ve(F)})}e(Se),e(ze);var E=r(ze,2),C=t(E),be=r(t(C),2);be.__click=m;var ye=t(be);ct(ye,{size:10}),ue(),e(be),e(C);var je=r(C,2);Ie(je,21,()=>a(b).modifiers,Ce,(ve,se,_e)=>{var Ee=is(),Fe=t(Ee);Ie(Fe,21,()=>Object.entries(Ea),Ce,(at,$t)=>{var Be=Ut(()=>ga(a($t),2));let rt=()=>a(Be)[0],xt=()=>a(Be)[1];var dt=os(),Ue=t(dt,!0);e(dt);var Te={};O(()=>{h(Ue,xt()),Te!==(Te=rt())&&(dt.value=(dt.__value=rt())??"")}),i(at,dt)}),e(Fe);var He=r(Fe,2),nt=t(He),Ge={},et=r(nt),_t={},tt=r(et),Ct={};e(He);var Ve=r(He,2);Ne(Ve);var bt=r(Ve,2);bt.__click=()=>$(_e);var mt=t(bt);Wt(mt,{size:12}),e(bt),e(Ee),O(()=>{Ge!==(Ge=Et.ADD)&&(nt.value=(nt.__value=Et.ADD)??""),_t!==(_t=Et.SET)&&(et.value=(et.__value=Et.SET)??""),Ct!==(Ct=Et.MULT)&&(tt.value=(tt.__value=Et.MULT)??""),Pe(Ve,"step",a(se).type===Et.MULT?"0.1":"1")}),Bt(Fe,()=>a(se).target,at=>a(se).target=at),Bt(He,()=>a(se).type,at=>a(se).type=at),me(Ve,()=>a(se).value,at=>a(se).value=at),i(ve,Ee)}),e(je),e(E);var M=r(E,2);{var X=ve=>{var se=ls(),_e=t(se),Ee=r(t(_e));Zt(Ee),e(_e),e(se),me(Ee,()=>a(b).description,Fe=>a(b).description=Fe),i(ve,se)};g(M,ve=>{o().data?.parentType||ve(X)})}var N=r(M,2);N.__click=d,e(we),Bt(R,()=>a(b).duration,ve=>a(b).duration=ve),i(de,we)},le=de=>{var we=oe(),$e=V(we);{var Ae=ze=>{var Se=ds(),R=t(Se),W=t(R,!0);e(R);var F=r(R,2),E=t(F),C=r(t(E));Ne(C),e(E),e(F);var be=r(F,2);be.__click=I,e(Se),O(()=>h(W,a(s).name)),me(C,()=>a(s).value,ye=>a(s).value=ye),i(ze,Se)},fe=ze=>{var Se=oe(),R=V(Se);{var W=E=>{var C=vs(),be=t(C),ye=t(be,!0);e(be);var je=r(be,2),M=t(je),X=r(t(M));Ne(X),e(M),e(je);var N=r(je,2);N.__click=x,e(C),O(()=>h(ye,a(s).name)),me(X,()=>a(s).value,ve=>a(s).value=ve),i(E,C)},F=E=>{var C=oe(),be=V(C);{var ye=M=>{var X=cs(),N=t(X),ve=t(N),se=t(ve),_e=r(t(se));Ne(_e),e(se),e(ve);var Ee=r(ve,2),Fe=t(Ee),He=r(t(Fe));Ne(He),e(Fe),e(Ee),e(N);var nt=r(N,2),Ge=t(nt),et=r(t(Ge));Ne(et),e(Ge),e(nt);var _t=r(nt,2);_t.__click=k,e(X),me(_e,()=>a(s).nh,tt=>a(s).nh=tt),me(He,()=>a(s).ch,tt=>a(s).ch=tt),me(et,()=>a(s).d,tt=>a(s).d=tt),i(M,X)},je=M=>{var X=oe(),N=V(X);{var ve=_e=>{var Ee=ps(),Fe=t(Ee),He=t(Fe),nt=r(t(He));Ne(nt),e(He),e(Fe);var Ge=r(Fe,2),et=t(Ge),_t=t(et),tt=r(t(_t));Ne(tt),e(_t),e(et);var Ct=r(et,2),Ve=t(Ct),bt=r(t(Ve));Ne(bt),e(Ve),e(Ct),e(Ge);var mt=r(Ge,2),at=t(mt),$t=t(at),Be=r(t($t));Ne(Be),e($t),e(at);var rt=r(at,2),xt=t(rt),dt=r(t(xt));Ne(dt),e(xt),e(rt);var Ue=r(rt,2),Te=t(Ue),qe=r(t(Te));Ne(qe),e(Te),e(Ue),e(mt);var ht=r(mt,2);ht.__click=w,e(Ee),me(nt,()=>a(s).name,Re=>a(s).name=Re),me(tt,()=>a(s).level,Re=>a(s).level=Re),me(bt,()=>a(s).ancestry,Re=>a(s).ancestry=Re),me(Be,()=>a(s).novicePath,Re=>a(s).novicePath=Re),me(dt,()=>a(s).expertPath,Re=>a(s).expertPath=Re),me(qe,()=>a(s).masterPath,Re=>a(s).masterPath=Re),i(_e,Ee)},se=_e=>{var Ee=oe(),Fe=V(Ee);{var He=Ge=>{var et=fs(),_t=t(et),tt=t(_t),Ct=t(tt,!0);e(tt);var Ve=r(tt,2),bt=t(Ve,!0);e(Ve);var mt=r(Ve,2);{var at=Ue=>{var Te=us(),qe=r(t(Te),2),ht=t(qe);e(qe),e(Te),O(()=>h(ht,`${o().data.effect.name??""}: ${o().data.effect.description??""}`)),i(Ue,Te)};g(mt,Ue=>{o().data.effect&&Ue(at)})}e(_t);var $t=r(_t,2),Be=t($t);{var rt=Ue=>{var Te=bs(),qe=V(Te);qe.__click=()=>{ge.applyEffectToCharacter(o().data.effect,o().data),o().type==="confirm_spell"?ge.commitSpellCast(o().data):ge.commitTalentUse(o().data)};var ht=t(qe);Aa(ht,{size:18}),ue(),e(qe);var Re=r(qe,2);Re.__click=()=>{o().type==="confirm_spell"?ge.commitSpellCast(o().data):ge.commitTalentUse(o().data)},i(Ue,Te)},xt=Ue=>{var Te=xs();Te.__click=()=>{o().type==="confirm_spell"?ge.commitSpellCast(o().data):ge.commitTalentUse(o().data)};var qe=t(Te);Mt(qe,{size:18}),ue(),e(Te),i(Ue,Te)};g(Be,Ue=>{o().data.effect?Ue(rt):Ue(xt,!1)})}var dt=r(Be,2);dt.__click=D,e($t),e(et),O(()=>{h(Ct,o().data.name),h(bt,o().data.description)}),i(Ge,et)},nt=Ge=>{var et=oe(),_t=V(et);{var tt=Ve=>{var bt=gs(),mt=t(bt),at=t(mt);Wt(at,{size:48,class:"text-indigo-400"}),e(mt);var $t=r(mt,4),Be=t($t);Be.__click=D;var rt=r(Be);rt.__click=function(...xt){ge.confirmRest?.apply(this,xt)},e($t),e(bt),i(Ve,bt)},Ct=Ve=>{var bt=oe(),mt=V(bt);{var at=Be=>{var rt=_s(),xt=r(t(rt),2),dt=t(xt),Ue=t(dt);Ue.__click=()=>_a(c,-1);var Te=t(Ue);ta(Te,{size:24}),e(Ue);var qe=r(Ue,2),ht=t(qe);e(qe);var Re=r(qe,2);Re.__click=()=>_a(c);var Xt=t(Re);ct(Xt,{size:24}),e(Re),e(dt);var yt=r(dt,2),Tt=t(yt,!0);e(yt),e(xt);var Nt=r(xt,2);Nt.__click=()=>ge.finalizeRoll(o().data,a(c),f().filter(Me=>a(T).includes(Me.id)).map(Me=>Me.name)),e(rt),O(()=>{xe(qe,1,`text-4xl font-bold ${a(c)>0?"text-green-400":a(c)<0?"text-red-400":"text-slate-500"}`),h(ht,`${a(c)>0?"+":""}${a(c)??""}`),h(Tt,o().data.type==="weapon_damage"?"Dados Extras":"Boons/Banes")}),i(Be,rt)},$t=Be=>{var rt=oe(),xt=V(rt);{var dt=Te=>{var qe=ms(),ht=t(qe),Re=t(ht),Xt=t(Re,!0);e(Re);var yt=r(Re,2),Tt=t(yt,!0);e(yt),e(ht);var Nt=r(ht,2),Me=t(Nt);Me.__click=()=>Le.update(zt=>({...zt,type:"pre_roll",data:{type:"weapon_attack",source:o().data}}));var kt=t(Me),At=t(kt);Mt(At,{size:24}),e(kt),ue(2),e(Me);var ft=r(Me,2);ft.__click=()=>Le.update(zt=>({...zt,type:"pre_roll",data:{type:"weapon_damage",source:o().data}}));var Pt=t(ft),We=t(Pt);ct(We,{size:24}),e(Pt),ue(2),e(ft),e(Nt);var st=r(Nt,2);st.__click=D,e(qe),O(()=>{h(Xt,o().data.name),h(Tt,o().data.traits||"Sem Atributos")}),i(Te,qe)},Ue=Te=>{var qe=oe(),ht=V(qe);{var Re=yt=>{var Tt=As();Ie(Tt,5,()=>n().talents,Ce,(Nt,Me)=>{var kt=ys();kt.__click=()=>Le.update(Ye=>({...Ye,type:"confirm_talent",data:a(Me)}));var At=t(kt),ft=t(At),Pt=t(ft);Mt(Pt,{size:20}),e(ft);var We=r(ft,2),st=t(We),zt=t(st,!0);e(st);var jt=r(st,2),Ft=t(jt,!0);e(jt),e(We),e(At);var Ht=r(At,2),qt=t(Ht);{var Jt=Ye=>{var ot=hs();i(Ye,ot)},Gt=Ye=>{var ot=$s(),vt=r(V(ot),2);Ie(vt,21,()=>Array(a(Me).maxUses),Ce,(Rt,Dt,Ra)=>{var fa=ws();O(()=>xe(fa,1,`w-1.5 h-1.5 rounded-full ${Ra<a(Me).uses?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]":"bg-slate-700"}`)),i(Rt,fa)}),e(vt);var gt=r(vt,2),Vt=t(gt);e(gt),O(()=>{xe(gt,1,`font-mono font-bold text-xs ${a(Me).uses>0?"text-green-400":"text-red-400"}`),h(Vt,`${a(Me).uses??""}/${a(Me).maxUses??""}`)}),i(Ye,ot)};g(qt,Ye=>{a(Me).isPassive?Ye(Jt):Ye(Gt,!1)})}e(Ht),e(kt),O(()=>{kt.disabled=!a(Me).isPassive&&a(Me).maxUses>0&&a(Me).uses===0,h(zt,a(Me).name),h(Ft,a(Me).description)}),i(Nt,kt)},Nt=>{var Me=ks(),kt=t(Me);Mt(kt,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),ue(2),e(Me),i(Nt,Me)}),e(Tt),i(yt,Tt)},Xt=yt=>{var Tt=oe(),Nt=V(Tt);{var Me=At=>{var ft=Ns();Ie(ft,5,()=>n().spells,Ce,(Pt,We)=>{var st=Ss();st.__click=()=>Le.update(gt=>({...gt,type:"confirm_spell",data:a(We)}));var zt=t(st),jt=t(zt),Ft=t(jt);ra(Ft,{size:20}),e(jt);var Ht=r(jt,2),qt=t(Ht),Jt=t(qt,!0);e(qt);var Gt=r(qt,2),Ye=t(Gt);e(Gt),e(Ht),e(zt);var ot=r(zt,2),vt=r(t(ot),2);Ie(vt,21,()=>Array(a(We).maxCastings),Ce,(gt,Vt,Rt)=>{var Dt=zs();O(()=>xe(Dt,1,`w-3 h-1 rounded-full ${Rt<a(We).castings?"bg-indigo-500":"bg-slate-700"}`)),i(gt,Dt)}),e(vt),e(ot),e(st),O(()=>{st.disabled=a(We).castings===0,h(Jt,a(We).name),h(Ye,`${a(We).tradition??""} • ${a(We).tier??""}`)}),i(Pt,st)},Pt=>{var We=Ms(),st=t(We);ra(st,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),ue(2),e(We),i(Pt,We)}),e(ft),i(At,ft)},kt=At=>{var ft=oe(),Pt=V(ft);{var We=st=>{var zt=Ps(),jt=V(zt);Ie(jt,21,()=>Object.keys(ya),Ce,(Ye,ot)=>{var vt=Ds();vt.__click=()=>ge.toggleAffliction(a(ot));var gt=t(vt),Vt=r(gt);{var Rt=Dt=>{Aa(Dt,{size:14})};g(Vt,Dt=>{n().afflictions.includes(a(ot))&&Dt(Rt)})}e(vt),O(Dt=>{xe(vt,1,`p-3 rounded-lg border text-sm font-bold transition-all text-left flex justify-between items-center ${Dt??""}`),h(gt,`${a(ot)??""} `)},[()=>n().afflictions.includes(a(ot))?"bg-red-900/40 border-red-500 text-red-200 shadow-lg shadow-red-900/20":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:bg-slate-850"]),i(Ye,vt)}),e(jt);var Ft=r(jt,2),Ht=r(t(Ft),2),qt=t(Ht);Ie(qt,1,()=>n().afflictions,Ce,(Ye,ot)=>{var vt=Es(),gt=t(vt),Vt=t(gt);e(gt);var Rt=r(gt,2),Dt=t(Rt,!0);e(Rt),e(vt),O(()=>{h(Vt,`${a(ot)??""}:`),h(Dt,ya[a(ot)]?.effect||"")}),i(Ye,vt)});var Jt=r(qt,2);{var Gt=Ye=>{var ot=Ts();i(Ye,ot)};g(Jt,Ye=>{n().afflictions.length===0&&Ye(Gt)})}e(Ht),e(Ft),i(st,zt)};g(Pt,st=>{o().type==="affliction"&&st(We)},!0)}i(At,ft)};g(Nt,At=>{o().type==="cast_spell"?At(Me):At(kt,!1)},!0)}i(yt,Tt)};g(ht,yt=>{o().type==="select_talent"?yt(Re):yt(Xt,!1)},!0)}i(Te,qe)};g(xt,Te=>{o().type==="weapon_menu"?Te(dt):Te(Ue,!1)},!0)}i(Be,rt)};g(mt,Be=>{o().type==="pre_roll"?Be(at):Be($t,!1)},!0)}i(Ve,bt)};g(_t,Ve=>{o().type==="rest_confirm"?Ve(tt):Ve(Ct,!1)},!0)}i(Ge,et)};g(Fe,Ge=>{o().type==="confirm_spell"||o().type==="confirm_talent"?Ge(He):Ge(nt,!1)},!0)}i(_e,Ee)};g(N,_e=>{o().type==="character_info"?_e(ve):_e(se,!1)},!0)}i(M,X)};g(be,M=>{o().type==="health"?M(ye):M(je,!1)},!0)}i(E,C)};g(R,E=>{o().type==="stat"?E(W):E(F,!1)},!0)}i(ze,Se)};g($e,ze=>{o().type==="attribute"?ze(Ae):ze(fe,!1)},!0)}i(de,we)};g(ke,de=>{o().type==="effect"?de(De):de(le,!1)},!0)}i(re,he)};g(ae,re=>{o().type==="talent"?re(pe):re(K,!1)},!0)}i(B,te)};g(ie,B=>{o().type==="spell"?B(Z):B(Q,!1)},!0)}i(y,G)};g(ee,y=>{o().type==="item"?y(ne):y(L,!1)})}e(J),i(A,J)},$$slots:{default:!0}})}lt(),Y()}pt(["click","input"]);var Cs=l("<div> </div>"),Os=l('<div class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 text-center transition-all hover:bg-slate-800 active:scale-[0.98] group relative shadow-lg shadow-black/20 cursor-pointer" role="button" tabindex="0"><div class="py-2.5 px-2"><div class="text-[9px] uppercase text-slate-500 font-black tracking-widest group-hover:text-indigo-400 transition-colors mb-1"> </div> <div class="flex items-center justify-center gap-1.5 mb-1.5"><div class="text-2xl font-black text-white leading-none"> </div> <!></div> <div class="inline-flex px-2 py-0.5 bg-indigo-500/10 rounded-lg"><div class="text-xs text-indigo-400 font-black tracking-tight"> </div></div></div> <button class="absolute top-1.5 right-1.5 p-1 text-slate-700 hover:text-white hover:bg-white/5 rounded-md transition-all"><!></button></div>'),Hs=l('<div class="grid grid-cols-2 gap-3"></div>');function Ia(S,p){it(p,!1);const o=()=>ce(Oe,"$character",_),u=()=>ce(Xa,"$derivedStats",_),[_,z]=ut();function n(s,b){Le.update(c=>({...c,type:s,isOpen:!0,data:b}))}function f(s){n("pre_roll",{type:"attribute",source:s})}function H(s,b){s.stopPropagation(),n("attribute",b)}wt();var Y=Hs();Ie(Y,5,()=>o().attributes,Ce,(s,b)=>{var c=Os();c.__click=()=>f(a(b));var T=t(c),D=t(T),j=t(D,!0);e(D);var P=r(D,2),q=t(P),d=t(q,!0);e(q);var I=r(q,2);{var k=A=>{var U=Cs(),J=t(U);e(U),O(()=>{xe(U,1,`text-[11px] font-bold ${u()[a(b).key]>a(b).value?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"} px-1 rounded-md`),h(J,`${u()[a(b).key]>a(b).value?"+":""}${u()[a(b).key]-a(b).value}`)}),i(A,U)};g(I,A=>{u()[a(b).key]!==a(b).value&&A(k)})}e(P);var w=r(P,2),x=t(w),m=t(x);e(x),e(w),e(T);var $=r(T,2);$.__click=A=>H(A,a(b));var v=t($);sa(v,{size:12}),e($),e(c),O(()=>{Pe(c,"aria-label",`Rolar teste de ${a(b).name}`),h(j,a(b).name),h(d,u()[a(b).key]),h(m,`+${u()[a(b).key]-10}`),Pe($,"aria-label",`Editar ${a(b).name??""}`)}),i(s,c)}),e(Y),i(S,Y),lt(),z()}pt(["click"]);var qs=l('<div class="p-1 bg-red-500/10 rounded"><!></div>'),Rs=l('<div class="space-y-3"><div class="grid grid-cols-2 gap-3"><button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Defesa</div> <div class="flex items-baseline gap-1"><span class="text-3xl font-black text-white leading-none"> </span></div></button> <button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Speed</div> <div class="flex items-baseline justify-between w-full"><span> </span> <!></div></button></div> <div class="bg-slate-900 rounded-2xl border border-slate-800 p-4 shadow-lg shadow-black/20"><span class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"><!> Bônus de Dano</span> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90" aria-label="Diminuir Dano Bônus"><!></button> <div class="flex flex-col items-center"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span> <span class="text-[9px] text-slate-600 font-bold uppercase mt-1">Dados Extras</span></div> <button class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20" aria-label="Aumentar Dano Bônus"><!></button></div></div></div>');function Ca(S,p){it(p,!1);const o=()=>ce(pa,"$totalDefense",z),u=()=>ce(Ja,"$effectiveSpeed",z),_=()=>ce(Oe,"$character",z),[z,n]=ut();function f(B,te){Le.update(ae=>({...ae,type:B,isOpen:!0,data:te}))}function H(){Oe.update(B=>({...B,bonusDamage:Math.max(0,(B.bonusDamage||0)-1)}))}function Y(){Oe.update(B=>({...B,bonusDamage:(B.bonusDamage||0)+1}))}wt();var s=Rs(),b=t(s),c=t(b);c.__click=()=>f("stat","defense");var T=t(c),D=t(T);ur(D,{size:12}),ue(),e(T);var j=r(T,2),P=t(j),q=t(P,!0);e(P),e(j),e(c);var d=r(c,2);d.__click=()=>f("stat","speed");var I=t(d),k=t(I);Mt(k,{size:12}),ue(),e(I);var w=r(I,2),x=t(w),m=t(x,!0);e(x);var $=r(x,2);{var v=B=>{var te=qs(),ae=t(te);ia(ae,{size:10,class:"text-red-500"}),e(te),i(B,te)};g($,B=>{u()<_().speed&&B(v)})}e(w),e(d),e(b);var A=r(b,2),U=t(A),J=t(U);aa(J,{size:14,class:"text-indigo-500"}),ue(),e(U);var ee=r(U,2),ne=t(ee);ne.__click=H;var L=t(ne);ta(L,{size:18}),e(ne);var y=r(ne,2),G=t(y),ie=t(G);e(G),ue(2),e(y);var Z=r(y,2);Z.__click=Y;var Q=t(Z);ct(Q,{size:18}),e(Z),e(ee),e(A),e(s),O(()=>{h(q,o()),xe(x,1,`text-3xl font-black ${u()<_().speed?"text-red-400":"text-white"} leading-none`),h(m,u()),h(ie,`${(_().bonusDamage||0)??""}d6`)}),i(S,s),lt(),n()}pt(["click"]);var Us=l('<div class="bg-slate-900 p-3 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-3"><h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-1.5"><!> Moedas</h4></div> <div class="grid grid-cols-3 gap-2"><div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-yellow-500 font-black uppercase tracking-tight relative z-10">GP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir GP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar GP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-slate-300 font-black uppercase tracking-tight relative z-10">SP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir SP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar SP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-orange-700/80 font-black uppercase tracking-tight relative z-10">CP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir CP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar CP"><!></button></div></div></div></div>');function Oa(S,p){it(p,!1);const o=()=>ce(Oe,"$character",u),[u,_]=ut(),{updateCurrency:z}=ge;wt();var n=Us(),f=t(n),H=t(f),Y=t(H);_r(Y,{size:14,class:"text-yellow-500"}),ue(),e(H),e(f);var s=r(f,2),b=t(s),c=r(t(b),2),T=t(c);T.__click=()=>z("gp",-1);var D=t(T);ta(D,{size:14}),e(T);var j=r(T,2),P=t(j,!0);e(j);var q=r(j,2);q.__click=()=>z("gp",1);var d=t(q);ct(d,{size:14}),e(q),e(c),e(b);var I=r(b,2),k=r(t(I),2),w=t(k);w.__click=()=>z("sp",-1);var x=t(w);ta(x,{size:14}),e(w);var m=r(w,2),$=t(m,!0);e(m);var v=r(m,2);v.__click=()=>z("sp",1);var A=t(v);ct(A,{size:14}),e(v),e(k),e(I);var U=r(I,2),J=r(t(U),2),ee=t(J);ee.__click=()=>z("cp",-1);var ne=t(ee);ta(ne,{size:14}),e(ee);var L=r(ee,2),y=t(L,!0);e(L);var G=r(L,2);G.__click=()=>z("cp",1);var ie=t(G);ct(ie,{size:14}),e(G),e(J),e(U),e(s),e(n),O(()=>{h(P,o().currency.gp),h($,o().currency.sp),h(y,o().currency.cp)}),i(S,n),lt(),_()}pt(["click"]);var Ls=l('<div class="bg-slate-950 border border-slate-700 text-slate-200 px-3 py-1.5 rounded-xl text-sm font-bold flex items-center gap-2 group transition-all hover:border-indigo-500/50"> <button class="text-slate-500 hover:text-red-400 p-1 rounded-full hover:bg-red-400/10 transition-all"><!></button></div>'),Fs=l('<span class="text-sm text-slate-500 italic py-2 px-1">Nenhum idioma registrado.</span>'),Gs=l('<div class="bg-slate-900 p-4 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-4"><h4 class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2"><!> Idiomas</h4></div> <div class="flex flex-wrap gap-2 mb-4"><!> <!></div> <div class="relative group"><input type="text" placeholder="Adicionar novo idioma..." class="w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500 transition-all placeholder:text-slate-600 focus:ring-1 focus:ring-indigo-500/20" aria-label="Adicionar novo idioma"/> <div class="absolute right-3 top-1/2 -translate-y-1/2 p-1.5 bg-slate-800 rounded-lg text-slate-500 group-focus-within:text-indigo-400 group-focus-within:bg-indigo-400/10 transition-all"><!></div></div></div>');function Ha(S,p){it(p,!1);const o=()=>ce(Oe,"$character",u),[u,_]=ut(),{addLanguage:z,removeLanguage:n}=ge;function f(k){if(k.key==="Enter"){const w=k.target,x=w.value.trim();x!==""&&(z(x),w.value="")}}wt();var H=Gs(),Y=t(H),s=t(Y),b=t(s);$r(b,{size:16,class:"text-indigo-500"}),ue(),e(s),e(Y);var c=r(Y,2),T=t(c);Ie(T,1,()=>o().languages,Ce,(k,w,x)=>{var m=Ls(),$=t(m),v=r($);v.__click=()=>n(x);var A=t(v);ja(A,{size:14}),e(v),e(m),O(()=>{h($,`${a(w)??""} `),Pe(v,"aria-label",`Remover idioma ${a(w)??""}`)}),i(k,m)});var D=r(T,2);{var j=k=>{var w=Fs();i(k,w)};g(D,k=>{o().languages.length===0&&k(j)})}e(c);var P=r(c,2),q=t(P);q.__keydown=f;var d=r(q,2),I=t(d);ct(I,{size:16}),e(d),e(P),e(H),i(S,H),lt(),_()}pt(["click","keydown"]);var Vs=l('<span class="text-xs text-slate-500 italic">Nenhuma aflição ativa.</span>'),Bs=l('<div class="group relative"><div class="text-xs bg-red-900/30 border border-red-700 text-red-200 px-2 py-1 rounded flex items-center gap-1 cursor-help" title="Aflição Ativa"> <button class="ml-1 text-red-400 hover:text-white"><!></button></div></div>'),Ws=l('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> Aflições</h4> <button class="text-slate-500 hover:text-white" aria-label="Adicionar Aflição"><!></button></div> <div class="flex flex-wrap gap-2"><!> <!></div></div>');function qa(S,p){it(p,!1);const o=()=>ce(Oe,"$character",u),[u,_]=ut(),{toggleAffliction:z}=ge;function n(){Le.update(d=>({...d,type:"affliction",isOpen:!0}))}function f(d,I){d.stopPropagation(),z(I)}wt();var H=Ws(),Y=t(H),s=t(Y),b=t(s);ia(b,{size:12}),ue(),e(s);var c=r(s,2);c.__click=n;var T=t(c);ct(T,{size:14}),e(c),e(Y);var D=r(Y,2),j=t(D);{var P=d=>{var I=Vs();i(d,I)};g(j,d=>{o().afflictions.length===0&&d(P)})}var q=r(j,2);Ie(q,1,()=>o().afflictions,Ce,(d,I)=>{var k=Bs(),w=t(k),x=t(w),m=r(x);m.__click=v=>f(v,a(I));var $=t(m);ja($,{size:10}),e(m),e(w),e(k),O(()=>{h(x,`${a(I)??""} `),Pe(m,"aria-label",`Remover aflição ${a(I)??""}`)}),i(d,k)}),e(D),e(H),i(S,H),lt(),_()}pt(["click"]);var Ys=l('<button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide"> </span></button>'),Ks=l('<div class="absolute inset-x-0 bottom-0 h-0.5 bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.5)]"></div>'),Qs=l('<button role="tab"><!> <span class="tracking-widest uppercase"> </span> <!></button>'),Xs=l('<div class="md:hidden fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-lg border-t border-slate-800 safe-area-pb" role="tablist"><div class="flex justify-around items-center py-2"></div></div> <div class="hidden md:flex bg-slate-900/80 backdrop-blur-md border-b border-slate-800 overflow-x-auto no-scrollbar sticky top-[60px] z-30" role="tablist"></div> <div class="h-4 bg-slate-950 hidden md:block"></div>',1);function Js(S,p){it(p,!1);const o=()=>ce(It,"$activeTab",u),[u,_]=ut(),z=[{id:"acoes",label:"AÇÕES",icon:aa},{id:"magias",label:"MAGIAS",icon:za},{id:"talentos",label:"TALENTOS",icon:Mt},{id:"equipamento",label:"ITENS",icon:ua},{id:"notas",label:"NOTAS",icon:Sa},{id:"efeitos",label:"EFEITOS",icon:ia}],n=[{id:"stats",label:"STATS",icon:Ar},{id:"acoes",label:"AÇÕES",icon:aa},{id:"magias",label:"MAGIAS",icon:za},{id:"talentos",label:"TALENTOS",icon:Mt},{id:"equipamento",label:"ITENS",icon:ua},{id:"notas",label:"NOTAS",icon:Sa},{id:"efeitos",label:"EFEITOS",icon:ia}];wt();var f=Xs(),H=V(f),Y=t(H);Ie(Y,5,()=>n,Ce,(b,c)=>{var T=Ys();T.__click=()=>It.set(a(c).id);var D=t(T);{let q=ma(()=>o()===a(c).id?"text-indigo-400":"text-slate-500");a(c).icon(D,{size:20,get class(){return a(q)}})}var j=r(D,2),P=t(j,!0);e(j),e(T),O(()=>{xe(T,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${o()===a(c).id?"text-indigo-400":"text-slate-500"}`),Pe(T,"aria-selected",o()===a(c).id),h(P,a(c).label)}),i(b,T)}),e(Y),e(H);var s=r(H,2);Ie(s,5,()=>z,Ce,(b,c)=>{var T=Qs();T.__click=()=>It.set(a(c).id);var D=t(T);{let I=ma(()=>o()===a(c).id?"text-indigo-400":"text-slate-500");a(c).icon(D,{size:14,get class(){return`${a(I)??""} group-hover:scale-110 transition-transform`}})}var j=r(D,2),P=t(j,!0);e(j);var q=r(j,2);{var d=I=>{var k=Ks();i(I,k)};g(q,I=>{o()===a(c).id&&I(d)})}e(T),O(()=>{xe(T,1,`px-5 lg:px-6 py-4 flex items-center gap-2 font-black text-xs transition-all whitespace-nowrap border-b-2 relative group ${o()===a(c).id?"text-indigo-400 border-indigo-500 bg-indigo-500/5":"text-slate-500 border-transparent hover:text-slate-300"}`),Pe(T,"aria-selected",o()===a(c).id),h(P,a(c).label)}),i(b,T)}),e(s),ue(2),i(S,f),lt(),_()}pt(["click"]);var Zs=l('<span class="text-[10px] bg-indigo-900 text-indigo-200 px-1 rounded uppercase"> </span>'),eo=l('<button class="text-xs bg-red-900/50 text-red-200 px-3 py-1 rounded border border-red-800 hover:bg-red-900 flex items-center gap-1"><!> </button>'),to=l('<div class="flex flex-col sm:flex-row justify-between p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-900 cursor-pointer transition-colors gap-4 active:scale-[0.99]" role="button" tabindex="0"><div class="flex items-start gap-3"><div class="bg-slate-800 p-2 rounded text-slate-400 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2"> <!></p> <p class="text-xs text-slate-500"> </p></div></div> <div class="flex flex-col items-end gap-2"><div class="flex items-center gap-4 bg-slate-900 p-2 rounded-lg border border-slate-800"><div class="text-center px-2"><span class="block text-[10px] font-bold text-slate-500 uppercase">Dano</span> <span class="text-xl font-mono text-white font-bold"> </span></div></div> <!></div></div>'),ao=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-500 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-indigo-900/50 p-2 rounded text-indigo-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-indigo-300 transition-colors">Conjurar Magia</p> <p class="text-xs text-slate-500">Selecione uma magia do grimório para lançar.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-indigo-400 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),ro=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-yellow-600 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-yellow-900/30 p-2 rounded text-yellow-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-yellow-300 transition-colors">Usar Talento</p> <p class="text-xs text-slate-500">Ative uma habilidade ou talento especial.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-yellow-500 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),so=l('<div class="flex flex-col items-center justify-center py-16 px-6 text-center bg-gradient-to-b from-slate-900/50 to-slate-950/50 rounded-[2.5rem] border border-dashed border-slate-800 shadow-2xl relative overflow-hidden group mt-4"><div class="absolute -top-24 -right-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="relative"><div class="w-20 h-20 bg-slate-800 rounded-3xl flex items-center justify-center text-indigo-400 mb-6 mx-auto transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-xl border border-slate-700"><!></div> <h3 class="text-2xl font-black text-white mb-3 uppercase tracking-tight">Pronto para o Combate?</h3> <p class="text-slate-400 mb-8 max-w-sm mx-auto leading-relaxed">Sua lista de ações rápidas está vazia. Equipe seu herói para ver armas, magias e talentos ativos aqui.</p> <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-md"><button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Inventário</span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Magias</span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Talentos</span></button></div></div></div>'),oo=l('<div class="space-y-4"><!> <!> <!> <!></div>');function io(S,p){it(p,!0);const o=()=>ce(Oe,"$character",u),[u,_]=ut(),{useConsumable:z}=ge;let n=Ut(()=>o().equipment.filter(k=>k.type===St.WEAPON&&k.equippedState||k.type===St.EXPLOSIVE)),f=Ut(()=>o().spells.length>0),H=Ut(()=>o().talents.length>0),Y=Ut(()=>a(n).length===0&&!a(f)&&!a(H));function s(k,w=null){Le.update(x=>({...x,type:k,isOpen:!0,data:w}))}function b(k,w){k.stopPropagation(),z(w)}var c=oo(),T=t(c);Ie(T,17,()=>a(n),Ce,(k,w)=>{var x=to();x.__click=()=>s("weapon_menu",a(w));var m=t(x),$=t(m),v=t($);aa(v,{size:20}),e($);var A=r($,2),U=t(A),J=t(U),ee=r(J);{var ne=pe=>{var K=Zs(),re=t(K,!0);e(K),O(()=>h(re,a(w).equippedState)),i(pe,K)};g(ee,pe=>{a(w).equippedState&&pe(ne)})}e(U);var L=r(U,2),y=t(L);e(L),e(A),e(m);var G=r(m,2),ie=t(G),Z=t(ie),Q=r(t(Z),2),B=t(Q);e(Q),e(Z),e(ie);var te=r(ie,2);{var ae=pe=>{var K=eo();K.__click=ke=>b(ke,a(w));var re=t(K);gr(re,{size:12});var he=r(re);e(K),O(()=>{Pe(K,"aria-label",`Usar ${a(w).name??""}`),h(he,` Throw (${a(w).quantity??""})`)}),i(pe,K)};g(te,pe=>{a(w).type===St.EXPLOSIVE&&pe(ae)})}e(G),e(x),O(()=>{Pe(x,"aria-label",`Opções para ${a(w).name??""}`),h(J,`${a(w).name??""} `),h(y,`${(a(w).traits||"-")??""} • ${(a(w).range||"-")??""}`),h(B,`${(a(w).damageDice||0)??""}d6`)}),i(k,x)});var D=r(T,2);{var j=k=>{var w=ao();w.__click=()=>s("cast_spell");var x=t(w),m=t(x),$=t(m);ra($,{size:20}),e(m),ue(2),e(x),ue(2),e(w),i(k,w)};g(D,k=>{a(f)&&k(j)})}var P=r(D,2);{var q=k=>{var w=ro();w.__click=()=>s("select_talent");var x=t(w),m=t(x),$=t(m);Mt($,{size:20}),e(m),ue(2),e(x),ue(2),e(w),i(k,w)};g(P,k=>{a(H)&&k(q)})}var d=r(P,2);{var I=k=>{var w=so(),x=r(t(w),4),m=t(x),$=t(m);aa($,{size:40,class:"opacity-80"}),e(m);var v=r(m,6),A=t(v);A.__click=()=>It.set("equipamento");var U=t(A),J=t(U);ua(J,{size:20}),e(U),ue(2),e(A);var ee=r(A,2);ee.__click=()=>It.set("magias");var ne=t(ee),L=t(ne);ra(L,{size:20}),e(ne),ue(2),e(ee);var y=r(ee,2);y.__click=()=>It.set("talentos");var G=t(y),ie=t(G);Mt(ie,{size:20}),e(G),ue(2),e(y),e(v),e(x),e(w),br(1,w,()=>xr,()=>({duration:300})),i(k,w)};g(d,k=>{a(Y)&&k(I)})}e(c),i(S,c),lt(),_()}pt(["click"]);var lo=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl group hover:border-indigo-500/50 transition-all duration-300"><div class="flex justify-between items-start mb-3"><div><div class="font-bold text-white text-lg group-hover:text-indigo-300 transition-colors uppercase tracking-tight"> </div> <div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div></div> <button class="text-slate-600 hover:text-white p-1 hover:bg-slate-800 rounded-md transition-all"><!></button></div> <div class="text-sm text-slate-400 mb-4 line-clamp-2 leading-relaxed h-10"> </div> <div class="flex items-center justify-between bg-slate-950/50 p-3 rounded-xl border border-slate-800/50"><span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Usos Mágicos</span> <div class="flex items-center gap-3"><span> </span> <button class="bg-indigo-600 disabled:opacity-20 text-white text-[10px] font-black px-4 py-1.5 rounded-lg hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/40 active:scale-95 uppercase tracking-wider">Cast</button></div></div></div>'),no=l('<div class="space-y-3"><h4 class="text-[10px] font-black text-indigo-400 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-8 h-px bg-indigo-500/30"></span> <span class="flex-1 h-px bg-indigo-500/30"></span></h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),vo=l('<div class="text-center py-16 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Seu grimório está vazio.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeira Magia</button></div>'),co=l('<div class="space-y-8"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Grimório Arcano</h3> <p class="text-xs text-slate-500">Seus feitiços e magias conhecidas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Nova Magia"><!> Nova Magia</button></div> <!> <!></div>');function po(S,p){it(p,!1);const o=()=>ce(Oe,"$character",u),[u,_]=ut();function z(T,D=null){Le.update(j=>({...j,type:T,isOpen:!0,data:D}))}wt();var n=co(),f=t(n),H=r(t(f),2);H.__click=()=>z("spell");var Y=t(H);ct(Y,{size:16}),ue(),e(H),e(f);var s=r(f,2);Ie(s,0,()=>["Novice","Expert","Master"],Ce,(T,D)=>{var j=oe(),P=V(j);{var q=d=>{var I=no(),k=t(I),w=r(t(k));ue(),e(k);var x=r(k,2);Ie(x,5,()=>o().spells.filter(m=>m.tier===D),Ce,(m,$)=>{var v=lo(),A=t(v),U=t(A),J=t(U),ee=t(J,!0);e(J);var ne=r(J,2),L=t(ne);e(ne),e(U);var y=r(U,2);y.__click=()=>z("spell",a($));var G=t(y);sa(G,{size:14}),e(y),e(A);var ie=r(A,2),Z=t(ie,!0);e(ie);var Q=r(ie,2),B=r(t(Q),2),te=t(B),ae=t(te);e(te);var pe=r(te,2);pe.__click=()=>z("confirm_spell",a($)),e(B),e(Q),e(v),O(()=>{h(ee,a($).name),h(L,`${a($).tradition??""} • ${a($).type??""}`),Pe(y,"aria-label",`Editar ${a($).name??""}`),h(Z,a($).description),xe(te,1,`text-sm font-mono font-bold ${a($).castings===0?"text-red-500":"text-indigo-400"}`),h(ae,`${a($).castings??""}/${a($).maxCastings??""}`),pe.disabled=a($).castings===0}),i(m,v)}),e(x),e(I),O(()=>h(w,` ${D??""} Spells `)),i(d,I)};g(P,d=>{o().spells.some(I=>I.tier===D)&&d(q)})}i(T,j)});var b=r(s,2);{var c=T=>{var D=vo(),j=t(D);ra(j,{size:48,class:"mx-auto text-slate-800 mb-3"});var P=r(j,4);P.__click=()=>z("spell");var q=t(P);ct(q,{size:14}),ue(),e(P),e(D),i(T,D)};g(b,T=>{o().spells.length===0&&T(c)})}e(n),i(S,n),lt(),_()}pt(["click"]);var uo=l('<div class="text-2xl font-mono font-bold text-white leading-tight"> </div>'),bo=l('<div class="text-sm font-bold text-slate-500 uppercase tracking-tighter mt-1 italic">Fora de Combate</div>'),xo=l('<div class="text-center text-slate-500 italic py-4">Nenhum efeito ativo.</div>'),fo=l("<span> </span>"),go=l('<div class="flex flex-wrap gap-1 mt-1"></div>'),_o=l('<button class="bg-yellow-900/40 hover:bg-yellow-800/40 text-yellow-500 border border-yellow-800 px-2 py-0.5 rounded flex items-center gap-1 transition-colors" aria-label="Sortear encerramento do efeito"><!> Sorte Encerra</button>'),mo=l('<div><div class="flex justify-between items-start"><div class="flex items-center gap-2"><button><div></div></button> <span class="font-bold text-white tracking-tight"> </span></div> <div class="flex gap-2"><button class="text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors"><!></button> <button class="text-slate-500 hover:text-red-400 p-1 hover:bg-slate-800 rounded transition-colors"><!></button></div></div> <div class="text-xs text-slate-400 leading-relaxed"> </div> <!> <div class="flex justify-between items-center text-[10px] text-slate-500 font-mono mt-1 border-t border-slate-800/50 pt-2"><span class="flex items-center gap-1"><!> </span> <!></div></div>'),ho=l('<div class="space-y-4"><div class="flex justify-between items-center bg-slate-900 p-3 rounded-lg border border-slate-800"><div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Voltar Rodada"><!></button> <div class="text-center min-w-[80px]"><div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div> <!></div> <button class="p-2 hover:bg-slate-700 rounded text-white disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Avançar Rodada"><!></button></div> <div class="flex gap-2"><button class="bg-slate-800 hover:bg-red-900/50 text-slate-400 hover:text-red-300 px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 border border-slate-700"><!> Limpar Inativos</button> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1"><!> Novo Efeito</button></div></div> <div class="space-y-2"><!> <!></div></div>');function wo(S,p){it(p,!1);const o=()=>ce(Oe,"$character",u),[u,_]=ut(),{advanceRound:z,deleteEffect:n,checkLuckEnds:f}=ge;function H(L,y=null){Le.update(G=>({...G,type:L,isOpen:!0,data:y}))}wt();var Y=ho(),s=t(Y),b=t(s),c=t(b);c.__click=()=>z("prev");var T=t(c);kr(T,{size:20}),e(c);var D=r(c,2),j=t(D),P=t(j,!0);e(j);var q=r(j,2);{var d=L=>{var y=uo(),G=t(y,!0);e(y),O(()=>h(G,o().currentRound||1)),i(L,y)},I=L=>{var y=bo();i(L,y)};g(q,L=>{o().combatActive?L(d):L(I,!1)})}e(D);var k=r(D,2);k.__click=()=>z("next");var w=t(k);hr(w,{size:20}),e(k),e(b);var x=r(b,2),m=t(x);m.__click=function(...L){ge.cleanInactiveEffects?.apply(this,L)};var $=t(m);mr($,{size:14}),ue(),e(m);var v=r(m,2);v.__click=()=>H("effect");var A=t(v);ct(A,{size:14}),ue(),e(v),e(x),e(s);var U=r(s,2),J=t(U);{var ee=L=>{var y=xo();i(L,y)};g(J,L=>{o().effects.length===0&&L(ee)})}var ne=r(J,2);Ie(ne,1,()=>o().effects,Ce,(L,y)=>{var G=mo(),ie=t(G),Z=t(ie),Q=t(Z);Q.__click=()=>ge.toggleEffect(a(y).id);var B=t(Q);e(Q);var te=r(Q,2),ae=t(te,!0);e(te),e(Z);var pe=r(Z,2),K=t(pe);K.__click=()=>H("effect",a(y));var re=t(K);sa(re,{size:14}),e(K);var he=r(K,2);he.__click=()=>n(a(y).id);var ke=t(he);Wt(ke,{size:14}),e(he),e(pe),e(ie);var De=r(ie,2),le=t(De,!0);e(De);var de=r(De,2);{var we=W=>{var F=go();Ie(F,5,()=>a(y).modifiers,Ce,(E,C)=>{var be=fo(),ye=t(be);e(be),O(()=>{xe(be,1,`text-[9px] px-1.5 py-0.5 rounded border ${a(C).type===Et.SET?"bg-yellow-900/30 text-yellow-200 border-yellow-800":"bg-slate-800 text-slate-300 border-slate-700"} font-medium`),h(ye,`${(Ea[a(C).target]||a(C).target)??""}: ${a(C).type===Et.SET?"=":a(C).type===Et.MULT?"x":a(C).value>0?"+":""}${a(C).value??""}`)}),i(E,be)}),e(F),i(W,F)};g(de,W=>{a(y).isActive&&Array.isArray(a(y).modifiers)&&a(y).modifiers.length>0&&W(we)})}var $e=r(de,2),Ae=t($e),fe=t(Ae);Pa(fe,{size:10,class:"text-indigo-400"});var ze=r(fe);e(Ae);var Se=r(Ae,2);{var R=W=>{var F=_o();F.__click=()=>f(a(y).id);var E=t(F);xa(E,{size:10}),ue(),e(F),i(W,F)};g(Se,W=>{a(y).duration==="LUCK_ENDS"&&a(y).isActive&&W(R)})}e($e),e(G),O(()=>{xe(G,1,`p-3 rounded border flex flex-col gap-2 transition-all ${a(y).isActive?"bg-slate-900 border-indigo-900 shadow-lg shadow-indigo-950/20":"bg-slate-950 border-slate-800 opacity-60"}`),xe(Q,1,`w-8 h-4 rounded-full relative transition-colors ${a(y).isActive?"bg-green-500":"bg-slate-600"}`),Pe(Q,"aria-label",a(y).isActive?"Desativar efeito {eff.name}":"Ativar efeito {eff.name}"),Pe(Q,"aria-pressed",a(y).isActive),xe(B,1,`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${a(y).isActive?"left-4.5":"left-0.5"}`),h(ae,a(y).name),Pe(K,"aria-label",`Editar ${a(y).name??""}`),Pe(he,"aria-label",`Excluir ${a(y).name??""}`),h(le,a(y).description),h(ze,` ${Da[a(y).duration]??""} ${a(y).duration==="ROUNDS"?`(${a(y).roundsLeft})`:""}`)}),i(L,G)}),e(U),e(Y),O(()=>{c.disabled=!!o().campaignId,h(P,o().combatActive?"Rodada Atual":"Status"),k.disabled=!!o().campaignId}),i(S,Y),lt(),_()}pt(["click"]);var $o=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Tipo</span> <span class="font-bold text-slate-300 text-xs flex items-center justify-center gap-1.5 bg-slate-800 px-2 py-1 rounded-md"><!> Passivo</span>',1),yo=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Usos</span> <span> <span class="text-slate-600 text-sm"> </span></span>',1),ko=l('<div class="flex gap-2"><button title="Recuperar Uso" class="bg-slate-800 disabled:opacity-20 hover:bg-green-600/20 text-green-400 p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-green-500/50"><!></button> <button title="Usar Talento" class="bg-slate-800 disabled:opacity-20 hover:bg-indigo-600/20 text-white p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-indigo-500/50"><!></button></div>'),Ao=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl flex flex-col md:flex-row md:items-center gap-6 group hover:border-indigo-500/50 hover:bg-slate-900/60 transition-all duration-300"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><div class="p-2 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform shadow-inner"><!></div> <h4 class="font-bold text-white text-lg tracking-tight uppercase tracking-tight"> </h4> <button class="text-slate-600 hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110"><!></button></div> <p class="text-sm text-slate-400 leading-relaxed max-w-2xl"> </p></div> <div class="shrink-0 flex items-center gap-4 bg-slate-950/50 p-3 rounded-xl border border-slate-800 shadow-inner"><div class="text-center px-2 border-r border-slate-800 pr-4 min-w-[80px]"><!></div> <!></div></div>'),zo=l('<div class="text-center py-12 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Você ainda não possui talentos cadastrados.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeiro Talento</button></div>'),So=l('<div class="space-y-6"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Talentos & Habilidades</h3> <p class="text-xs text-slate-500">Suas capacidades especiais e passivas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Novo Talento"><!> Novo Talento</button></div> <div class="grid grid-cols-1 gap-4"><!> <!></div></div>');function Mo(S,p){it(p,!1);const o=()=>ce(Oe,"$character",u),[u,_]=ut(),{recoverTalent:z}=ge;function n(j,P=null){Le.update(q=>({...q,type:j,isOpen:!0,data:P}))}wt();var f=So(),H=t(f),Y=r(t(H),2);Y.__click=()=>n("talent");var s=t(Y);ct(s,{size:16}),ue(),e(Y),e(H);var b=r(H,2),c=t(b);Ie(c,1,()=>o().talents,Ce,(j,P)=>{var q=Ao(),d=t(q),I=t(d),k=t(I),w=t(k);Mt(w,{size:18}),e(k);var x=r(k,2),m=t(x,!0);e(x);var $=r(x,2);$.__click=()=>n("talent",a(P));var v=t($);sa(v,{size:14}),e($),e(I);var A=r(I,2),U=t(A,!0);e(A),e(d);var J=r(d,2),ee=t(J),ne=t(ee);{var L=Z=>{var Q=$o(),B=r(V(Q),2),te=t(B);wr(te,{size:12,class:"text-indigo-400"}),ue(),e(B),i(Z,Q)},y=Z=>{var Q=yo(),B=r(V(Q),2),te=t(B,!0),ae=r(te),pe=t(ae);e(ae),e(B),O(()=>{xe(B,1,`font-mono font-bold text-lg ${a(P).uses===0?"text-red-400":"text-white"}`),h(te,a(P).uses),h(pe,`/${a(P).maxUses??""}`)}),i(Z,Q)};g(ne,Z=>{a(P).isPassive?Z(L):Z(y,!1)})}e(ee);var G=r(ee,2);{var ie=Z=>{var Q=ko(),B=t(Q);B.__click=()=>z(a(P).id);var te=t(B);ct(te,{size:18}),e(B);var ae=r(B,2);ae.__click=()=>n("confirm_talent",a(P));var pe=t(ae);Mt(pe,{size:18}),e(ae),e(Q),O(()=>{B.disabled=a(P).uses>=a(P).maxUses,Pe(B,"aria-label",`Recuperar uso de ${a(P).name??""}`),ae.disabled=a(P).uses===0,Pe(ae,"aria-label",`Usar ${a(P).name??""}`)}),i(Z,Q)};g(G,Z=>{a(P).isPassive||Z(ie)})}e(J),e(q),O(()=>{h(m,a(P).name),Pe($,"aria-label",`Editar ${a(P).name??""}`),h(U,a(P).description)}),i(j,q)});var T=r(c,2);{var D=j=>{var P=zo(),q=t(P);Mt(q,{size:48,class:"mx-auto text-slate-800 mb-3"});var d=r(q,4);d.__click=()=>n("talent");var I=t(d);ct(I,{size:14}),ue(),e(d),e(P),i(j,P)};g(T,j=>{o().talents.length===0&&j(D)})}e(b),e(f),i(S,f),lt(),_()}pt(["click"]);var No=l('<span class="block italic text-slate-400"> </span>'),Do=l("• Def <!>",1),Eo=l('<button class="text-xs bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600">Usar</button>'),To=l("<button> </button>"),Po=l("<button>2H</button>"),jo=l("<button>Main</button>"),Io=l("<!> <button>Off</button>",1),Co=l('<div class="flex justify-center gap-1"><!></div>'),Oo=l('<tr class="hover:bg-slate-900/50"><td class="p-3"><div class="font-bold text-white"> </div> <div class="text-[10px] text-slate-500"> <!> <!></div></td><td class="p-3"><span class="text-[10px] border border-slate-700 px-1 rounded uppercase bg-slate-900"> </span></td><td class="p-3 text-center"><!></td><td class="p-3 text-right font-mono"> </td><td class="p-3 text-right"><button class="text-slate-500 hover:text-white"><!></button></td></tr>'),Ho=l('<div class="space-y-4"><div class="lg:hidden"><!></div> <div class="flex justify-between items-center"><h3 class="text-xs font-bold text-slate-500 uppercase">Inventário</h3> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-3 py-1.5 rounded text-white font-bold flex items-center gap-1"><!> Novo Item</button></div> <div class="bg-slate-950 rounded-lg border border-slate-800 overflow-hidden"><table class="w-full text-sm text-left"><thead class="bg-slate-900 text-slate-400 font-bold uppercase text-[10px]"><tr><th class="p-3">Item</th><th class="p-3">Tipo</th><th class="p-3 text-center">Ações / Equipar</th><th class="p-3 text-right">Qtd</th><th class="p-3 w-8"></th></tr></thead><tbody class="divide-y divide-slate-800 text-slate-300"></tbody></table></div></div>');function qo(S,p){it(p,!1);const o=()=>ce(Oe,"$character",u),[u,_]=ut(),{useConsumable:z,equipItem:n}=ge;function f(q,d=null){Le.update(I=>({...I,type:q,isOpen:!0,data:d}))}wt();var H=Ho(),Y=t(H),s=t(Y);Oa(s,{}),e(Y);var b=r(Y,2),c=r(t(b),2);c.__click=()=>f("item");var T=t(c);ct(T,{size:14}),ue(),e(c),e(b);var D=r(b,2),j=t(D),P=r(t(j));Ie(P,5,()=>o().equipment,Ce,(q,d)=>{var I=Oo(),k=t(I),w=t(k),x=t(w,!0);e(w);var m=r(w,2),$=t(m),v=r($);{var A=K=>{var re=No(),he=t(re,!0);e(re),O(()=>h(he,a(d).notes)),i(K,re)};g(v,K=>{a(d).notes&&K(A)})}var U=r(v,2);{var J=K=>{var re=Do(),he=r(V(re));{var ke=le=>{var de=ea();O(()=>h(de,`Fixed ${a(d).defenseFixed??""}`)),i(le,de)},De=le=>{var de=ea();O(()=>h(de,`+${a(d).defenseMod??""}`)),i(le,de)};g(he,le=>{a(d).defenseFixed?le(ke):le(De,!1)})}i(K,re)};g(U,K=>{a(d).type===St.ARMOR&&K(J)})}e(m),e(k);var ee=r(k),ne=t(ee),L=t(ne,!0);e(ne),e(ee);var y=r(ee),G=t(y);{var ie=K=>{var re=Eo();re.__click=()=>z(a(d)),O(()=>{re.disabled=a(d).quantity<=0,Pe(re,"aria-label",`Usar ${a(d).name??""}`)}),i(K,re)},Z=K=>{var re=oe(),he=V(re);{var ke=le=>{var de=To();de.__click=()=>n(a(d));var we=t(de,!0);e(de),O(()=>{xe(de,1,`text-xs px-2 py-1 rounded border transition-colors ${a(d).equipped?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-400"}`),Pe(de,"aria-label",a(d).equipped?"Desequipar armadura":"Equipar armadura"),h(we,a(d).equipped?"Equipado":"Equipar")}),i(le,de)},De=le=>{var de=oe(),we=V(de);{var $e=Ae=>{var fe=Co(),ze=t(fe);{var Se=W=>{var F=Po();F.__click=()=>n(a(d),a(d).equippedState?null:"two"),O(()=>{xe(F,1,`text-[10px] px-2 py-1 rounded border ${a(d).equippedState==="two"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Pe(F,"aria-label",a(d).equippedState==="two"?"Desequipar 2H":"Equipar 2H")}),i(W,F)},R=W=>{var F=Io(),E=V(F);{var C=ye=>{var je=jo();je.__click=()=>n(a(d),a(d).equippedState==="main"?null:"main"),O(()=>{xe(je,1,`text-[10px] px-2 py-1 rounded border ${a(d).equippedState==="main"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Pe(je,"aria-label",a(d).equippedState==="main"?"Desequipar Main Hand":"Equipar Main Hand")}),i(ye,je)};g(E,ye=>{a(d).grip!==ca.OFF&&ye(C)})}var be=r(E,2);be.__click=()=>n(a(d),a(d).equippedState==="off"?null:"off"),O(()=>{xe(be,1,`text-[10px] px-2 py-1 rounded border ${a(d).equippedState==="off"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Pe(be,"aria-label",a(d).equippedState==="off"?"Desequipar Off Hand":"Equipar Off Hand")}),i(W,F)};g(ze,W=>{a(d).grip===ca.TWO?W(Se):W(R,!1)})}e(fe),i(Ae,fe)};g(we,Ae=>{(a(d).type===St.WEAPON||a(d).type===St.SHIELD)&&Ae($e)},!0)}i(le,de)};g(he,le=>{a(d).type===St.ARMOR?le(ke):le(De,!1)},!0)}i(K,re)};g(G,K=>{a(d).type===St.CONSUMABLE?K(ie):K(Z,!1)})}e(y);var Q=r(y),B=t(Q,!0);e(Q);var te=r(Q),ae=t(te);ae.__click=()=>f("item",a(d));var pe=t(ae);sa(pe,{size:14}),e(ae),e(te),e(I),O(()=>{h(x,a(d).name),h($,`${a(d).quality??""} • ${a(d).availability??""} • ${a(d).price??""}gp `),h(L,a(d).type),h(B,a(d).quantity),Pe(ae,"aria-label",`Editar ${a(d).name??""}`)}),i(q,I)}),e(P),e(j),e(D),e(H),i(S,H),lt(),_()}pt(["click"]);var Ro=l('<div class="space-y-6"><div class="lg:hidden"><!></div> <div class="space-y-4"><div class="flex justify-between items-center mb-2"><h3 class="text-xs font-bold text-slate-500 uppercase">Anotações do Personagem</h3> <span class="text-[10px] text-slate-600 italic">Salvo automaticamente</span></div> <textarea class="w-full h-[50vh] bg-slate-950 border border-slate-800 rounded p-4 text-white resize-none focus:border-indigo-500 focus:outline-none custom-scrollbar leading-relaxed font-mono text-sm" placeholder="Escreva aqui a história, anotações de campanha, NPCs importantes, segredos..." aria-label="Anotações do personagem"></textarea></div></div>');function Uo(S,p){it(p,!1);const o=()=>ce(Oe,"$character",u),[u,_]=ut();wt();var z=Ro(),n=t(z),f=t(n);Ha(f,{}),e(n);var H=r(n,2),Y=r(t(H),2);Zt(Y),e(H),e(z),me(Y,()=>o().notes,s=>Ua(Oe,ha(o).notes=s,ha(o))),i(S,z),lt(),_()}var Lo=l('<div class="space-y-4 flex-1 flex flex-col"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <div class="lg:hidden mt-auto pt-6"><!></div></div>');function Fo(S,p){it(p,!1),wt();var o=Lo(),u=t(o);Ia(u,{});var _=r(u,2);_.__click=()=>Le.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var z=t(_),n=t(z);xa(n,{size:24,class:"text-white"}),e(z),ue(2),e(_);var f=r(_,2);Ca(f,{});var H=r(f,2);qa(H,{});var Y=r(H,2),s=t(Y);ba(s,{banner:!0}),e(Y),e(o),i(S,o),lt()}pt(["click"]);var Go=l('<div class="min-h-screen flex flex-col items-center justify-center p-4"><div class="bg-slate-900 border border-slate-800 rounded-3xl p-8 max-w-md w-full text-center shadow-2xl"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><!></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight">Personagem Não Encontrado</h1> <p class="text-slate-400 mb-8">Este personagem não existe na sua base local. Crie um novo personagem através da página inicial.</p> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all"><!> Voltar ao Início</button></div></div>'),Vo=l('<!> <!> <!> <main class="max-w-6xl mx-auto md:px-4 mt-6 lg:mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6"><aside class="hidden lg:block lg:col-span-3 space-y-4"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <!> <!> <div class="pt-2"><!></div></aside> <section class="lg:col-span-9"><div class="bg-slate-900 md:rounded-xl md:border md:border-slate-800 min-h-[calc(100vh-200px)] md:min-h-[60vh] flex flex-col"><!> <div class="p-4 md:p-6 flex-1 flex flex-col"><!> <!> <!> <!> <!> <!> <!></div></div></section></main> <div class="hidden"><!></div>',1),Bo=l('<div class="flex items-center justify-center min-h-screen"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div></div>'),Wo=l('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-28 md:pb-20 relative overflow-x-hidden"><!></div> ```',1);function ui(S,p){it(p,!0);const o=()=>ce(Oe,"$character",b),u=()=>ce(Kt,"$normalHealth",b),_=()=>ce(Qt,"$currentHealth",b),z=()=>ce(Yt,"$damage",b),n=()=>ce(pa,"$totalDefense",b),f=()=>ce(va,"$effectiveMaxHealth",b),H=()=>ce(ar,"$page",b),Y=()=>ce(da,"$isHistoryOpen",b),s=()=>ce(It,"$activeTab",b),[b,c]=ut();let T=Lt(!1),D=Lt(!1),j=Lt(null);oa(()=>{if(!a(T)||a(D)||!a(j))return;const x=o(),m=u(),$=_(),v=z(),A=n(),U=f(),J={...x,normalHealth:m,currentHealth:$,damage:v};na.set(a(j),J),x.campaignId&&ka({id:a(j),type:"player",name:x.name,level:x.level,ancestry:x.ancestry,damage:v,currentHealth:$,normalHealth:m,health:U,defense:A,initiative:x.initiative,acted:x.acted,afflictions:x.afflictions||[],campaignApproval:x.campaignApproval})}),oa(()=>{if(!a(T)||a(D)||!a(j)||!Ot(Oe).campaignId)return;const m=setInterval(()=>{const $=Ot(Oe);ka({id:a(j),type:"player",name:$.name,level:$.level,ancestry:$.ancestry,damage:Ot(Yt),currentHealth:Ot(Qt),normalHealth:Ot(Kt),health:Ot(va),defense:Ot(pa),initiative:$.initiative,acted:$.acted,afflictions:$.afflictions||[],campaignApproval:$.campaignApproval})},3e4);return()=>clearInterval(m)}),oa(()=>{const x=H().params.id;x&&x!==a(j)&&P(x)});async function P(x){if(Ke(T,!1),Ke(D,!1),Ke(j,x,!0),await Za(),na.has(x)){const m=na.get(x);Oe.set({...er,...m,id:x}),m.normalHealth!==void 0&&Kt.set(m.normalHealth),m.currentHealth!==void 0&&Qt.set(m.currentHealth),m.damage!==void 0&&Yt.set(m.damage);const $=Ot(Oe);$.campaignId&&tr($.campaignId,!1,a(j))}else Ke(D,!0);window.innerWidth<768?It.set("stats"):Ot(It)==="stats"&&It.set("acoes"),Ke(T,!0)}var q=Wo(),d=V(q),I=t(d);{var k=x=>{var m=oe(),$=V(m);{var v=U=>{var J=Go(),ee=t(J),ne=t(ee),L=t(ne);nr(L,{size:40}),e(ne);var y=r(ne,6);y.__click=()=>Ta(Na("/"));var G=t(y);fr(G,{size:18}),ue(),e(y),e(ee),e(J),i(U,J)},A=U=>{var J=Vo(),ee=V(J);dr(ee,{get isOpen(){return Y()},onClose:()=>da.set(!1)});var ne=r(ee,2);Is(ne,{});var L=r(ne,2);Or(L,{});var y=r(L,2),G=t(y),ie=t(G);Ia(ie,{});var Z=r(ie,2);Z.__click=()=>Le.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var Q=t(Z),B=t(Q);xa(B,{size:24,class:"text-white"}),e(Q),ue(2),e(Z);var te=r(Z,2);Ca(te,{});var ae=r(te,2);Oa(ae,{});var pe=r(ae,2);Ha(pe,{});var K=r(pe,2);qa(K,{});var re=r(K,2),he=t(re);ba(he,{}),e(re),e(G);var ke=r(G,2),De=t(ke),le=t(De);Js(le,{});var de=r(le,2),we=t(de);{var $e=N=>{Fo(N,{})};g(we,N=>{s()==="stats"&&N($e)})}var Ae=r(we,2);{var fe=N=>{io(N,{})};g(Ae,N=>{s()==="acoes"&&N(fe)})}var ze=r(Ae,2);{var Se=N=>{wo(N,{})};g(ze,N=>{s()==="efeitos"&&N(Se)})}var R=r(ze,2);{var W=N=>{po(N,{})};g(R,N=>{s()==="magias"&&N(W)})}var F=r(R,2);{var E=N=>{Mo(N,{})};g(F,N=>{s()==="talentos"&&N(E)})}var C=r(F,2);{var be=N=>{qo(N,{})};g(C,N=>{s()==="equipamento"&&N(be)})}var ye=r(C,2);{var je=N=>{Uo(N,{})};g(ye,N=>{s()==="notas"&&N(je)})}e(de),e(De),e(ke),e(y);var M=r(y,2),X=t(M);ba(X,{banner:!0}),e(M),i(U,J)};g($,U=>{a(D)?U(v):U(A,!1)})}i(x,m)},w=x=>{var m=Bo();i(x,m)};g(I,x=>{a(T)?x(k):x(w,!1)})}e(d),ue(),i(S,q),lt(),c()}pt(["click"]);export{ui as component,pi as universal};

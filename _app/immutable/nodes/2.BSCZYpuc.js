import"../chunks/DsnmJJEf.js";import"../chunks/CzS45DwE.js";import{v as le,w as D,k as g,x as ot,j as x,z as rt,F as u,R as J,y as d,A as a,B as t,I as e,t as O,a2 as La,L as Pt,n as st,aq as us,U as ps,T as _t,b7 as ra}from"../chunks/CeQBZBfG.js";import{d as nt,o as Va,s as f,w as ba,g as ye,e as vt}from"../chunks/DGsQstmn.js";import{l as Re,s as He,i as B,p as je}from"../chunks/CyF0tIdS.js";import{h as Nt}from"../chunks/lCLb9LXD.js";import{a as ze,$ as jt,e as Yt,s as ke,i as gs,r as Qe,f as na,g as ia}from"../chunks/Bn_8AhTz.js";import{s as Mt,a as he}from"../chunks/T6JPUUzi.js";import{I as Le,s as Ve}from"../chunks/CyVau6m0.js";import{X as qa,M as Ya,a as ga,T as Ma,P as la,q as Rt,b as fs}from"../chunks/BC0wnFri.js";import{t as ut,a as Ja,f as Dt}from"../chunks/CjuvMrjI.js";import{D as Fe,G as Jt,S as ms,l as Wa,a as fa,b as hs,c as bs,C as xs,g as da}from"../chunks/DkwgT5_L.js";import{b as et,h as tt,d as fe,e as me,f as Ht,g as Lt,k as ma,l as Wt,u as Ga,p as _s}from"../chunks/DM3Nx_mP.js";import{b as ws,g as Vt}from"../chunks/smWRVqe9.js";import{U as Ba,r as qt,W as ys}from"../chunks/Ci8_tP4r.js";import{C as ks,G as ca,a as $s,P as Aa}from"../chunks/LuFV3X3W.js";import{U as xa,L as Ss}from"../chunks/DnwUPxtJ.js";import{h as Cs}from"../chunks/BYmFNSF7.js";function Es(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];Le(c,He({name:"circle-alert"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}function zs(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"m2 2 20 20"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07"}]];Le(c,He({name:"cloud-off"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}function Is(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];Le(c,He({name:"cloud"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}function Ua(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];Le(c,He({name:"download"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}function Ts(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];Le(c,He({name:"loader-circle"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}function Ns(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];Le(c,He({name:"monitor"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}function Ds(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}]];Le(c,He({name:"palette"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}function Ps(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];Le(c,He({name:"refresh-cw"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}function va(c,o){const r=Re(o,["children","$$slots","$$events","$$legacy"]);const l=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];Le(c,He({name:"scroll"},()=>r,{get iconNode(){return l},children:(n,i)=>{var s=le(),p=D(s);Ve(p,o,"default",{}),g(n,s)},$$slots:{default:!0}}))}var js=x('<button class="fixed bottom-28 md:bottom-6 right-6 z-[60] bg-indigo-600 hover:bg-indigo-500 text-white h-14 px-4 rounded-full shadow-2xl shadow-indigo-900/50 flex items-center justify-center font-bold animate-pulse hover:animate-none transition-all active:scale-95 group"><!> <span class="text-sm uppercase tracking-wider max-w-0 overflow-hidden ml-0 group-hover:max-w-xs group-hover:ml-2 transition-all duration-300 md:max-w-xs md:ml-2 md:inline"> </span></button>'),Ms=x("<div><!></div>"),Gs=x("<div><!></div>"),Bs=x('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <!></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),As=x('<li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">1</span> <div><!></div></li> <li class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-800 flex items-center justify-center font-bold text-xs border border-slate-700 text-indigo-400">2</span> <div><!></div></li>',1),Us=x('<div class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center p-4 animate-in fade-in"><div class="bg-slate-900 border border-slate-700 rounded-2xl p-6 max-w-sm w-full relative shadow-2xl mb-4 sm:mb-0 animate-in slide-in-from-bottom-10 sm:slide-in-from-bottom-0 sm:zoom-in-95"><button class="absolute top-4 right-4 text-slate-400 hover:text-white p-1"><!></button> <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2"><!> </h3> <ol class="space-y-4 text-slate-300 text-sm"><!></ol> <div class="mt-6 text-center"><button class="text-indigo-400 text-sm font-bold hover:text-indigo-300"> </button></div></div></div>'),Os=x("<!> <!>",1);function Fs(c,o){ot(o,!0);const r=()=>he(jt,"$t",l),[l,n]=Mt();let i=J(null),s=J(!1),p=J(!1),h=J(!1),k=J(!1);Va(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone){u(s,!1);return}const _=window.navigator.userAgent;u(h,/iPad|iPhone|iPod/.test(_)&&!window.MSStream,!0),u(k,/CriOS/i.test(_),!0),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(_)&&u(s,!0),window.addEventListener("beforeinstallprompt",N=>{N.preventDefault(),u(i,N,!0),u(s,!0)}),window.addEventListener("appinstalled",()=>{u(i,null),u(s,!1),u(p,!1)})});async function A(){if(d(i)){d(i).prompt();const{outcome:$}=await d(i).userChoice;$==="accepted"&&(u(i,null),u(s,!1))}else u(p,!0)}const b="inline w-3.5 h-3.5",P=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${b}"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>`,E=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${b}"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>`,z=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${b}"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>`;function R($,_){const j=r()($),N=`<span class="inline-flex items-center justify-center bg-slate-800 p-1 rounded mx-1 align-middle">${_}</span>`;return j.replace("{icon}",N)}var L=Os(),C=D(L);{var V=$=>{var _=js();_.__click=A;var j=t(_);Ua(j,{size:24});var N=a(j,2),ee=t(N,!0);e(N),e(_),O((S,y)=>{ze(_,"aria-label",S),f(ee,y)},[()=>r()("home.install.button"),()=>r()("home.install.button")]),g($,_)};B(C,$=>{d(s)&&$(V)})}var T=a(C,2);{var m=$=>{var _=Us(),j=t(_),N=t(j);N.__click=()=>u(p,!1);var ee=t(N);qa(ee,{size:20}),e(N);var S=a(N,2),y=t(S);Ua(y,{size:24,class:"text-indigo-500"});var M=a(y);e(S);var W=a(S,2),Z=t(W);{var q=G=>{var X=Bs(),Y=D(X),te=a(t(Y),2);{var pe=de=>{var ge=Ms(),ce=t(ge);Nt(ce,()=>R("home.install.ios_chrome_step1",P)),e(ge),g(de,ge)},oe=de=>{var ge=Gs(),ce=t(ge);Nt(ce,()=>R("home.install.ios_step1",P)),e(ge),g(de,ge)};B(te,de=>{d(k)?de(pe):de(oe,!1)})}e(Y);var ie=a(Y,2),ae=a(t(ie),2),$e=t(ae);Nt($e,()=>R("home.install.ios_step2",E)),e(ae),e(ie),g(G,X)},U=G=>{var X=As(),Y=D(X),te=a(t(Y),2),pe=t(te);Nt(pe,()=>R("home.install.android_step1",z)),e(te),e(Y);var oe=a(Y,2),ie=a(t(oe),2),ae=t(ie);Nt(ae,()=>r()("home.install.android_step2")),e(ie),e(oe),g(G,X)};B(Z,G=>{d(h)?G(q):G(U,!1)})}e(W);var K=a(W,2),ne=t(K);ne.__click=()=>u(p,!1);var H=t(ne,!0);e(ne),e(K),e(j),e(_),O((G,X)=>{f(M,` ${G??""}`),f(H,X)},[()=>r()("home.install.title"),()=>r()("home.install.close")]),g($,_)};B(T,$=>{d(p)&&$(m)})}g(c,L),rt(),n()}nt(["click"]);var Rs=x('<span class="text-[9px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded uppercase tracking-wider">Em Breve</span>'),Hs=x('<div class="w-2 h-2 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"></div>'),Ls=x('<button><div class="flex-1"><div class="font-bold text-sm flex items-center gap-2"> <!></div> <div class="text-[10px] opacity-60 mt-0.5"> </div></div> <!></button>'),Vs=x('<div class="space-y-4"><div><label class="text-xs text-slate-500 uppercase font-black block mb-2 tracking-widest flex items-center gap-1"><!> Sistema de Jogo</label> <div class="grid grid-cols-1 gap-2"></div></div> <div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome do Personagem</label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Alaric, o Errante"/></div> <div><label for="char-player" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="char-player" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Ancestralidade</label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Humano"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">NÃ­vel</label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Trilha Inicial (Novice)</label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Guerreiro, Mago"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Defesa</label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Vida MÃ¡xima</label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Criar Personagem</button></div>',1);function qs(c,o){ot(o,!0);let r=je(o,"isOpen",3,!1),l=je(o,"initialData",3,"{}"),n=La({name:"",playerName:"",ancestry:"",novicePath:"",level:1,defense:10,health:24,system:Fe});Pt(()=>{if(r()&&l())try{const s=JSON.parse(l());n.name=s.name||"",n.playerName=s.playerName||"",n.ancestry=s.ancestry||"",n.novicePath=s.paths&&s.paths.novice?s.paths.novice:"",n.level=s.level||1,n.defense=s.defense||10,n.health=s.health||s.normalHealth||24,n.system=s.system||Fe}catch{n.name="",n.playerName="",n.ancestry="",n.novicePath="",n.level=1,n.defense=10,n.health=24,n.system=Fe}});function i(){o.onSave({...n})}Ya(c,{get isOpen(){return r()},get onClose(){return o.onClose},title:"Novo Personagem",maxWidth:"max-w-md",children:(s,p)=>{var h=Vs(),k=D(h),A=t(k),b=t(A),P=t(b);Jt(P,{size:12}),st(),e(b);var E=a(b,2);Yt(E,21,()=>ms,gs,(H,G)=>{var X=Ls();X.__click=()=>!d(G).disabled&&(n.system=d(G).id);var Y=t(X),te=t(Y),pe=t(te),oe=a(pe);{var ie=ce=>{var Ie=Rs();g(ce,Ie)};B(oe,ce=>{d(G).comingSoon&&ce(ie)})}e(te);var ae=a(te,2),$e=t(ae,!0);e(ae),e(Y);var de=a(Y,2);{var ge=ce=>{var Ie=Hs();g(ce,Ie)};B(de,ce=>{n.system===d(G).id&&ce(ge)})}e(X),O(()=>{ke(X,1,`relative flex items-center p-3 rounded-lg border text-left transition-all ${n.system===d(G).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"} ${d(G).disabled?"opacity-60 cursor-not-allowed":""}`),X.disabled=d(G).disabled,f(pe,`${d(G).name??""} `),f($e,d(G).description)}),g(H,X)}),e(E),e(A);var z=a(A,2),R=a(t(z),2);Qe(R),e(z);var L=a(z,2),C=t(L),V=t(C);xa(V,{size:12}),st(),e(C);var T=a(C,2);Qe(T),e(L);var m=a(L,2),$=t(m),_=a(t($),2);Qe(_),e($);var j=a($,2),N=a(t(j),2);Qe(N),e(j),e(m);var ee=a(m,2),S=a(t(ee),2);Qe(S),e(ee);var y=a(ee,2),M=t(y),W=a(t(M),2);Qe(W),e(M);var Z=a(M,2),q=a(t(Z),2);Qe(q),e(Z),e(y),e(k);var U=a(k,2),K=t(U);K.__click=function(...H){o.onClose?.apply(this,H)};var ne=a(K,2);ne.__click=i,e(U),et(R,()=>n.name,H=>n.name=H),et(T,()=>n.playerName,H=>n.playerName=H),et(_,()=>n.ancestry,H=>n.ancestry=H),et(N,()=>n.level,H=>n.level=H),et(S,()=>n.novicePath,H=>n.novicePath=H),et(W,()=>n.defense,H=>n.defense=H),et(q,()=>n.health,H=>n.health=H),g(s,h)},$$slots:{default:!0}}),rt()}nt(["click"]);var Ys=x('<div class="space-y-5"><div><label for="settings-player-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="settings-player-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/> <p class="text-[10px] text-slate-500 mt-1">O nome do jogador associado a este personagem.</p></div></div> <div class="flex flex-col-reverse sm:flex-row gap-3 mt-6"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-4 sm:py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-4 sm:py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Salvar</button></div>',1);function Js(c,o){ot(o,!0);let r=je(o,"isOpen",3,!1),l=je(o,"characterData",3,null),n=J("");Pt(()=>{r()&&l()&&u(n,l().playerName||"",!0)});function i(){o.onSave({playerName:d(n)})}Ya(c,{get isOpen(){return r()},get onClose(){return o.onClose},title:"âš™ï¸ ConfiguraÃ§Ãµes do Personagem",maxWidth:"max-w-md",children:(s,p)=>{var h=Ys(),k=D(h),A=t(k),b=t(A),P=t(b);xa(P,{size:12}),st(),e(b);var E=a(b,2);Qe(E),st(2),e(A),e(k);var z=a(k,2),R=t(z);R.__click=function(...C){o.onClose?.apply(this,C)};var L=a(R,2);L.__click=i,e(z),et(E,()=>d(n),C=>u(n,C)),g(s,h)},$$slots:{default:!0}}),rt()}nt(["click"]);const at=ba("idle"),_a=ba(null),Ws="701898444454-7ml9onnv529k99rkvgh1slhdj4a1arrm.apps.googleusercontent.com",Oa="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile",ue=ba({signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null,isInited:!1});let Kt,Fa=!1;const wt="wwv_google_session";function Ks(){localStorage.removeItem(wt),ue.update(c=>({...c,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),console.log("Session cleared due to expired or invalid token")}async function Xt(){Ks(),console.warn("OAuth token expired or invalid. Please sign in again.")}async function Ka(c){try{const o=await fetch("https://www.googleapis.com/oauth2/v1/userinfo?alt=json",{headers:{Authorization:`Bearer ${c}`}});if(o.status===401){await Xt();return}if(o.ok){const r=await o.json();ue.update(l=>({...l,userProfile:{name:r.name,picture:r.picture}})),Xa()}}catch(o){console.error("Failed to fetch user profile:",o)}}function Xs(){try{const c=localStorage.getItem(wt);if(c){const o=JSON.parse(c);if(o.accessToken)return o.tokenExpiry&&Date.now()>o.tokenExpiry?(console.log("Stored token is expired, clearing session"),localStorage.removeItem(wt),!1):(ue.set({signedIn:!0,accessToken:o.accessToken,tokenExpiry:o.tokenExpiry||null,userProfile:o.userProfile||null,isInited:!0}),console.log("Restored session from localStorage"),Ka(o.accessToken),!0)}}catch(c){console.error("Failed to load stored session:",c)}return!1}function Xa(){const c=ye(ue);c.signedIn&&c.accessToken?localStorage.setItem(wt,JSON.stringify({accessToken:c.accessToken,tokenExpiry:c.tokenExpiry,userProfile:c.userProfile})):localStorage.removeItem(wt)}async function Zs(){const c=Ws;if(Xs()){try{await Ha(),Kt=google.accounts.oauth2.initTokenClient({client_id:c,scope:Oa,callback:Ra}),Fa=!0}catch(r){console.warn("Could not initialize GIS after restoring session:",r)}return}try{await Ha(),Kt=google.accounts.oauth2.initTokenClient({client_id:c,scope:Oa,callback:Ra}),Fa=!0,ue.update(r=>({...r,isInited:!0})),console.log("Google Auth Initialized")}catch(r){console.error("Failed to initialize Google Auth:",r),ue.update(l=>({...l,isInited:!0})),alert("Falha ao inicializar Google Auth. Verifique sua conexÃ£o/Console.")}}function Ra(c){if(c.error!==void 0){console.error("Google Auth Error:",c);return}console.log("Google Auth Success",c);const o=c.expires_in||3600,r=Date.now()+o*1e3;ue.update(l=>({...l,signedIn:!0,accessToken:c.access_token,tokenExpiry:r})),Xa(),Ka(c.access_token)}function Ha(){return new Promise((c,o)=>{if(typeof google<"u"&&google.accounts){c();return}const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{const l=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(l),c())},50);setTimeout(()=>{clearInterval(l),(typeof google>"u"||!google.accounts)&&o(new Error("Google object not available after script load"))},3e3)},r.onerror=()=>{o(new Error("Failed to load Google Identity Services script"))},document.head.appendChild(r)})}function Za(){Kt?Kt.requestAccessToken():(console.error("Google Auth not initialized"),alert("Google Auth ainda nÃ£o inicializou. Tente novamente em alguns segundos."))}function Qs(){const c=ye(ue).accessToken;localStorage.removeItem(wt),ue.update(o=>({...o,signedIn:!1,accessToken:null,tokenExpiry:null,userProfile:null})),c&&typeof google<"u"&&google.accounts&&google.accounts.oauth2.revoke(c,()=>{console.log("Access token revoked")})}async function Qa(){const c=ye(ue),o=c.accessToken;if(!o)throw new Error("Not signed in");if(c.tokenExpiry&&Date.now()>c.tokenExpiry)throw await Xt(),new Error("Token expired, please sign in again");const l=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent("name = 'weird-wizard-backup.json' and 'appDataFolder' in parents and trashed = false")}&spaces=appDataFolder&fields=files(id, name, modifiedTime, size)`,n=await fetch(l,{headers:{Authorization:`Bearer ${o}`}});if(n.status===401)throw await Xt(),new Error("Token expired, please sign in again");if(!n.ok)throw new Error("Failed to list backups: "+n.statusText);return(await n.json()).files||[]}async function eo(c){const o=ye(ue).accessToken;if(!o)throw new Error("Not signed in");const r=JSON.stringify(c),l="weird-wizard-backup.json",n=await Qa(),i=n.length>0?n[0].id:null;if(i){const s=`https://www.googleapis.com/upload/drive/v3/files/${i}?uploadType=media`,p=await fetch(s,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:r});if(!p.ok){const h=await p.text();throw console.error("Upload error details:",h),new Error("Upload failed: "+p.statusText)}return await p.json()}else{const s={name:l,mimeType:"application/json",parents:["appDataFolder"]},p=new FormData;p.append("metadata",new Blob([JSON.stringify(s)],{type:"application/json"})),p.append("file",new Blob([r],{type:"application/json"}));const k=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:p});if(!k.ok){const A=await k.text();throw console.error("Upload error details:",A),new Error("Upload failed: "+k.statusText)}return await k.json()}}async function to(c){const o=ye(ue).accessToken;if(!o)throw new Error("Not signed in");const r=`https://www.googleapis.com/drive/v3/files/${c}?alt=media`,l=await fetch(r,{headers:{Authorization:`Bearer ${o}`}});if(l.status===401)throw await Xt(),new Error("Token expired, please sign in again");if(!l.ok)throw new Error("Download failed: "+l.statusText);return await l.json()}let ua;async function ha(){if(ye(ue).accessToken)try{console.log("Syncing from cloud..."),at.set("syncing");const o=await Qa();if(o.length===0){console.log("No backups found in cloud."),at.set("success");return}const r=o[0].id,l=await to(r),n=new Set;if(tt.forEach((i,s)=>{n.add(String(s)),console.log("[DEBUG] Local deleted ID entry:",{key:s,type:typeof s,val:i})}),console.log("[DEBUG] Total locally deleted IDs:",n.size),l.deletedIds&&Array.isArray(l.deletedIds)){console.log("[DEBUG] Cloud data deletedIds count:",l.deletedIds.length);for(const i of l.deletedIds){const s=String(i.id);tt.has(s)||(tt.set(s,i),console.log("[DEBUG] New deletion synced from cloud:",s)),n.add(s),i.type==="character"&&fe.has(s)&&(fe.delete(s),console.log("[DEBUG] Removed char locally based on cloud deletion:",s)),i.type==="campaign"&&me.has(s)&&(me.delete(s),console.log("[DEBUG] Removed camp locally based on cloud deletion:",s)),i.type==="enemy"&&Ht.has(s)&&(Ht.delete(s),console.log("[DEBUG] Removed enemy locally based on cloud deletion:",s)),i.type==="encounter"&&Lt.has(s)&&(Lt.delete(s),console.log("[DEBUG] Removed encounter locally based on cloud deletion:",s))}}if(l.characters&&Array.isArray(l.characters)){console.log("[DEBUG] Syncing",l.characters.length,"characters from cloud");for(const i of l.characters){const s=String(i.id);if(n.has(s)||tt.has(s)){console.log("[DEBUG] Skipping character because it is marked as deleted:",{id:s,name:i.name}),fe.has(s)&&(console.log("[DEBUG] Character found locally but marked deleted. Removing now:",s),fe.delete(s));for(const h of fe.keys()){const k=fe.get(h);k&&k.id===s&&(console.log("[DEBUG] Mismatched key entry found for deleted char. Removing:",h),fe.delete(h))}continue}const p=fe.get(s);console.log("[DEBUG] Syncing character from cloud:",{id:s,name:i.name,status:p?"OVERWRITING":"ADDING"}),fe.set(s,i)}}if(l.campaigns&&Array.isArray(l.campaigns)){console.log("[DEBUG] Syncing",l.campaigns.length,"campaigns from cloud");for(const i of l.campaigns){const s=String(i.id);if(n.has(s)||tt.has(s)){console.log("[DEBUG] Skipping campaign because it is marked as deleted:",{id:s,name:i.name}),me.has(s)&&(console.log("[DEBUG] Campaign found locally but marked deleted. Removing now:",s),me.delete(s));for(const p of me.keys()){const h=me.get(p);h&&h.id===s&&(console.log("[DEBUG] Mismatched key entry found for deleted camp. Removing:",p),me.delete(p))}continue}console.log("[DEBUG] Syncing campaign from cloud:",{id:s,name:i.name,status:me.has(s)?"OVERWRITING":"ADDING"}),me.set(s,i)}}if(l.enemies&&Array.isArray(l.enemies))for(const i of l.enemies){const s=String(i.id);!n.has(s)&&!Ht.has(s)&&Ht.set(s,i)}if(l.encounters&&Array.isArray(l.encounters))for(const i of l.encounters){const s=String(i.id);!n.has(s)&&!Lt.has(s)&&Lt.set(s,i)}if(l.images&&typeof l.images=="object"){console.log("[DEBUG] Syncing",Object.keys(l.images).length,"images from cloud");for(const[i,s]of Object.entries(l.images))ma.has(i)||(ma.set(i,s),console.log("[DEBUG] New image synced from cloud:",i))}l.appSettings&&(console.log("[DEBUG] Syncing app settings from cloud"),Wt.set(l.appSettings)),console.log("[DEBUG] Sync from cloud complete."),at.set("success"),_a.set(Date.now())}catch(o){console.error("Failed to sync from cloud:",o),at.set("error")}}async function pa(){ye(ue).accessToken&&(ua&&clearTimeout(ua),ua=setTimeout(async()=>{try{console.log("Syncing to cloud..."),at.set("syncing");const o=[],r=new Set;tt.forEach((k,A)=>{o.push({id:A,...k}),r.add(String(A))});const l=ye(Wa).filter(k=>!r.has(String(k.id))),n=ye(fa).filter(k=>!r.has(String(k.id))),i=ye(hs).filter(k=>!r.has(String(k.id))),s=ye(bs).filter(k=>!r.has(String(k.id))),p={};ma.forEach((k,A)=>{p[A]=k});const h={characters:l,campaigns:n,enemies:i,encounters:s,images:p,deletedIds:o,appSettings:ye(Wt),timestamp:Date.now(),version:1,appName:"WeirdWizardVault"};console.log("[DEBUG] Uploading to cloud:",{charactersCount:h.characters.length,campaignsCount:h.campaigns.length,enemiesCount:i.length,imagesCount:Object.keys(p).length,deletedIdsCount:o.length}),await eo(h),console.log("Sync to cloud complete."),at.set("success"),_a.set(Date.now())}catch(o){console.error("Failed to sync to cloud:",o),at.set("error")}},2e3))}var ao=x('<img alt="Avatar" class="w-10 h-10 rounded-full border-2 border-indigo-500/50 shadow-lg object-cover"/>'),so=x('<div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white border-2 border-indigo-400/30 shadow-lg"><span class="font-bold text-lg"><!></span></div>'),oo=x('<div class="absolute right-0 top-full mt-2 w-48 bg-slate-800 rounded-xl shadow-xl border border-slate-700 p-2 z-50 animate-in fade-in slide-in-from-top-2"><div class="px-3 py-2 border-b border-slate-700 mb-2"><p class="text-xs text-slate-400"> </p> <p class="text-sm font-bold text-white truncate"> </p></div> <button class="w-full flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm"><!> </button></div>  <div class="fixed inset-0 z-40"></div>',1),ro=x('<div class="relative"><button><!> <div class="absolute bottom-1 right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-slate-900"></div></button> <!></div>'),no=x('<div class="w-4 h-4 rounded-full border-2 border-slate-300 border-t-slate-600 animate-spin"></div>'),io=us('<svg class="w-4 h-4" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>'),lo=x("<button><!> <span> </span></button>");function co(c,o){ot(o,!0);const r=()=>he(ue,"$googleSession",n),l=()=>he(jt,"$t",n),[n,i]=Mt();let s=je(o,"className",3,""),p=J(!1);var h=le(),k=D(h);{var A=P=>{var E=ro(),z=t(E);z.__click=()=>u(p,!d(p));var R=t(z);{var L=m=>{var $=ao();O(()=>ze($,"src",r().userProfile.picture)),g(m,$)},C=m=>{var $=so(),_=t($),j=t(_);{var N=S=>{var y=ps();O(M=>f(y,M),[()=>r().userProfile.name[0].toUpperCase()]),g(S,y)},ee=S=>{xa(S,{size:20})};B(j,S=>{r().userProfile?.name?S(N):S(ee,!1)})}e(_),e($),g(m,$)};B(R,m=>{r().userProfile?.picture?m(L):m(C,!1)})}st(2),e(z);var V=a(z,2);{var T=m=>{var $=oo(),_=D($),j=t(_),N=t(j),ee=t(N,!0);e(N);var S=a(N,2),y=t(S,!0);e(S),e(j);var M=a(j,2);M.__click=()=>{Qs(),u(p,!1)};var W=t(M);Ss(W,{size:14});var Z=a(W);e(M),e(_);var q=a(_,2);q.__click=()=>u(p,!1),O((U,K,ne)=>{f(ee,U),f(y,K),f(Z,` ${ne??""}`)},[()=>l()("common.auth.signed_in_as"),()=>r().userProfile?.name??l()("common.auth.user"),()=>l()("common.auth.logout")]),g(m,$)};B(V,m=>{d(p)&&m(T)})}e(E),O(m=>{ke(z,1,`flex items-center gap-2 p-1 rounded-full hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-700 ${s()??""}`),ze(z,"title",m)},[()=>r().userProfile?.name||l()("common.auth.user")]),g(P,E)},b=P=>{var E=lo();E.__click=function(...T){Za?.apply(this,T)};var z=t(E);{var R=T=>{var m=no();g(T,m)},L=T=>{var m=io();g(T,m)};B(z,T=>{r().isInited?T(L,!1):T(R)})}var C=a(z,2),V=t(C,!0);e(C),e(E),O(T=>{E.disabled=!r().isInited,ke(E,1,`flex items-center gap-2 px-4 py-2 bg-white text-slate-900 hover:bg-slate-100 rounded-full font-bold text-xs transition-all shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-wait disabled:scale-100 disabled:shadow-none ${s()??""}`),f(V,T)},[()=>l()("common.auth.login")]),g(P,E)};B(k,P=>{r().signedIn?P(A):P(b,!1)})}g(c,h),rt(),i()}nt(["click"]);var vo=x('<span class="w-2 h-2 rounded-full bg-slate-600"></span> <span> </span>',1),uo=x('<span class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></span> <span> </span>',1),po=x('<span class="w-2 h-2 rounded-full bg-emerald-500"></span> <span> </span>',1),go=x('<span class="w-2 h-2 rounded-full bg-red-500"></span> <span> </span>',1),fo=x('<span class="w-2 h-2 rounded-full bg-slate-500"></span> <span> </span>',1),mo=x('<div class="mt-1.5 pt-1.5 border-t border-slate-800 text-[9px] text-slate-400 opacity-80 font-medium flex justify-between items-center gap-4"><span> </span> <span> </span></div>'),ho=x('<div class="mt-1 text-[9px] text-slate-400 opacity-60 italic"> </div>'),bo=x('<div class="absolute top-full right-0 mt-3 whitespace-nowrap bg-slate-900/95 backdrop-blur-md text-white text-[10px] font-bold py-2 px-3 rounded-lg shadow-2xl border border-slate-700/50 z-[100] pointer-events-none min-w-[120px]"><div class="flex items-center gap-2"><!></div> <!></div>'),xo=x('<div class="relative flex items-center"><button class="flex items-center justify-center p-2 rounded-xl hover:bg-slate-800/50 transition-all active:scale-95 group focus:outline-none"><!></button> <!></div>');function _o(c,o){ot(o,!0);const r=()=>he(ue,"$googleSession",s),l=()=>he(jt,"$t",s),n=()=>he(at,"$syncStatus",s),i=()=>he(_a,"$lastSyncTime",s),[s,p]=Mt();let h=J(!1);function k(C){return new Date(C).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}var A=xo(),b=t(A);b.__click=()=>r().signedIn?ha():Za();var P=t(b);{var E=C=>{zs(C,{size:20,class:"text-slate-600 group-hover:text-slate-400"})},z=C=>{var V=le(),T=D(V);{var m=_=>{Ps(_,{size:20,class:"animate-spin text-indigo-400"})},$=_=>{var j=le(),N=D(j);{var ee=y=>{ks(y,{size:20,class:"text-emerald-400 group-hover:text-emerald-300"})},S=y=>{var M=le(),W=D(M);{var Z=U=>{Es(U,{size:20,class:"text-red-400"})},q=U=>{Is(U,{size:20,class:"text-slate-400 group-hover:text-slate-300"})};B(W,U=>{n()==="error"?U(Z):U(q,!1)},!0)}g(y,M)};B(N,y=>{n()==="success"?y(ee):y(S,!1)},!0)}g(_,j)};B(T,_=>{n()==="syncing"?_(m):_($,!1)},!0)}g(C,V)};B(P,C=>{r().signedIn?C(z,!1):C(E)})}e(b);var R=a(b,2);{var L=C=>{var V=bo(),T=t(V),m=t(T);{var $=S=>{var y=vo(),M=a(D(y),2),W=t(M,!0);e(M),O(Z=>f(W,Z),[()=>l()("common.status.offline")]),g(S,y)},_=S=>{var y=le(),M=D(y);{var W=q=>{var U=uo(),K=a(D(U),2),ne=t(K,!0);e(K),O(H=>f(ne,H),[()=>l()("common.status.syncing")]),g(q,U)},Z=q=>{var U=le(),K=D(U);{var ne=G=>{var X=po(),Y=a(D(X),2),te=t(Y,!0);e(Y),O(pe=>f(te,pe),[()=>l()("common.status.saved")]),g(G,X)},H=G=>{var X=le(),Y=D(X);{var te=oe=>{var ie=go(),ae=a(D(ie),2),$e=t(ae,!0);e(ae),O(de=>f($e,de),[()=>l()("common.status.error")]),g(oe,ie)},pe=oe=>{var ie=fo(),ae=a(D(ie),2),$e=t(ae,!0);e(ae),O(de=>f($e,de),[()=>l()("common.status.synced")]),g(oe,ie)};B(Y,oe=>{n()==="error"?oe(te):oe(pe,!1)},!0)}g(G,X)};B(K,G=>{n()==="success"?G(ne):G(H,!1)},!0)}g(q,U)};B(M,q=>{n()==="syncing"?q(W):q(Z,!1)},!0)}g(S,y)};B(m,S=>{r().signedIn?S(_,!1):S($)})}e(T);var j=a(T,2);{var N=S=>{var y=mo(),M=t(y),W=t(M,!0);e(M);var Z=a(M,2),q=t(Z,!0);e(Z),e(y),O((U,K)=>{f(W,U),f(q,K)},[()=>l()("common.status.last_sync"),()=>k(i())]),g(S,y)},ee=S=>{var y=le(),M=D(y);{var W=Z=>{var q=ho(),U=t(q,!0);e(q),O(K=>f(U,K),[()=>l()("common.auth.login")]),g(Z,q)};B(M,Z=>{r().signedIn||Z(W)},!0)}g(S,y)};B(j,S=>{r().signedIn&&i()?S(N):S(ee,!1)})}e(V),ut(3,V,()=>Ja,()=>({duration:150})),g(C,V)};B(R,C=>{d(h)&&C(L)})}e(A),O(C=>ze(b,"aria-label",C),[()=>l()("common.status.label")]),vt("mouseenter",b,()=>u(h,!0)),vt("mouseleave",b,()=>u(h,!1)),vt("focus",b,()=>u(h,!0)),vt("blur",b,()=>u(h,!1)),g(c,A),rt(),p()}nt(["click"]);var wo=x('<span class="text-[10px] text-slate-500 font-medium leading-tight mt-0.5"> </span>'),yo=x('<div class="flex flex-col"><span> </span> <!></div>'),ko=x('<div class="absolute inset-0 flex items-center justify-center"><div class="w-1.5 h-1.5 rounded-full bg-indigo-600"></div></div>'),$o=x("<div><!> <div><div><!></div></div></div>");function So(c,o){ot(o,!0);let r=je(o,"checked",3,!1),l=je(o,"label",3,""),n=je(o,"description",3,""),i=je(o,"disabled",3,!1);function s(){i()||o.onToggle(!r())}var p=$o();p.__click=s;var h=t(p);{var k=z=>{var R=yo(),L=t(R),C=t(L,!0);e(L);var V=a(L,2);{var T=m=>{var $=wo(),_=t($,!0);e($),O(()=>f(_,n())),g(m,$)};B(V,m=>{n()&&m(T)})}e(R),O(()=>{ke(L,1,`text-sm font-black uppercase tracking-widest transition-colors ${r()?"text-indigo-400":"text-slate-300 group-hover:text-white"}`),f(C,l())}),g(z,R)};B(h,z=>{(l()||n())&&z(k)})}var A=a(h,2),b=t(A),P=t(b);{var E=z=>{var R=ko();g(z,R)};B(P,z=>{r()&&z(E)})}e(b),e(A),e(p),O(()=>{ke(p,1,`flex items-center justify-between gap-4 p-1 group ${i()?"opacity-50 grayscale":"cursor-pointer"}`),ke(A,1,`relative w-12 h-6 rounded-full transition-all duration-300 ease-in-out ${r()?"bg-indigo-600 shadow-[0_0_15px_rgba(79,70,229,0.4)]":"bg-slate-800 border border-white/5"}`),ke(b,1,`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-all duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)] shadow-md ${r()?"translate-x-6":"translate-x-0"}`)}),g(c,p),rt()}nt(["click"]);var Co=x('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4"><div class="bg-slate-900 border border-white/10 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden flex flex-col"><div class="px-6 py-6 border-b border-white/5 flex items-center justify-between bg-white/[0.02]"><div class="flex items-center gap-3"><div class="p-2 bg-indigo-500/10 rounded-xl border border-indigo-500/20"><!></div> <div><h2 class="text-lg font-black text-white uppercase tracking-tight"> </h2> <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </p></div></div> <button class="p-2 hover:bg-white/5 rounded-full text-slate-400 hover:text-white transition-all active:scale-95"><!></button></div> <div class="p-6 space-y-8 max-h-[70vh] overflow-y-auto custom-scrollbar svelte-14b6qd9"><div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-indigo-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="space-y-6"><!></div></div> <div class="space-y-4"><div class="flex items-center gap-2 mb-2 text-emerald-400"><!> <h3 class="text-xs font-black uppercase tracking-widest"> </h3></div> <div class="bg-white/5 rounded-2xl p-4 border border-white/5"><div class="flex justify-between items-center opacity-50 cursor-not-allowed"><div class="flex flex-col"><span class="text-sm font-black uppercase tracking-widest text-slate-400"> </span> <span class="text-[10px] text-slate-500"> </span></div> <div class="w-12 h-6 bg-slate-800 rounded-full border border-white/5 p-1 relative"><div class="w-4 h-4 bg-slate-600 rounded-full"></div></div></div></div></div> <div class="pt-4 border-t border-white/5 flex flex-col items-center gap-4 text-center"><p class="text-[10px] text-slate-500 leading-relaxed max-w-[250px]"> </p></div></div> <div class="p-4 bg-white/[0.02] border-t border-white/5"><button class="w-full bg-slate-800 hover:bg-slate-700 text-white font-black uppercase tracking-widest py-3 rounded-2xl transition-all active:scale-[0.98] text-sm"> </button></div></div></div>');function Eo(c,o){ot(o,!0);const r=()=>he(jt,"$t",n),l=()=>he(Wt,"$appSettings",n),[n,i]=Mt();let s=je(o,"isOpen",3,!1);function p(b,P){Wt.update(E=>({...E,[b]:P}))}var h=le(),k=D(h);{var A=b=>{var P=Co();P.__click=function(...be){o.onClose?.apply(this,be)};var E=t(P);E.__click=be=>be.stopPropagation();var z=t(E),R=t(z),L=t(R),C=t(L);ga(C,{size:20,class:"text-indigo-400"}),e(L);var V=a(L,2),T=t(V),m=t(T,!0);e(T);var $=a(T,2),_=t($,!0);e($),e(V),e(R);var j=a(R,2);j.__click=function(...be){o.onClose?.apply(this,be)};var N=t(j);qa(N,{size:24}),e(j),e(z);var ee=a(z,2),S=t(ee),y=t(S),M=t(y);Ns(M,{size:16});var W=a(M,2),Z=t(W,!0);e(W),e(y);var q=a(y,2),U=t(q);{let be=_t(()=>r()("settings.options.auto_open_history.label")),pt=_t(()=>r()("settings.options.auto_open_history.description"));So(U,{get checked(){return l().autoOpenHistory},onToggle:Me=>p("autoOpenHistory",Me),get label(){return d(be)},get description(){return d(pt)}})}e(q),e(S);var K=a(S,2),ne=t(K),H=t(ne);Ds(H,{size:16});var G=a(H,2),X=t(G,!0);e(G),e(ne);var Y=a(ne,2),te=t(Y),pe=t(te),oe=t(pe),ie=t(oe,!0);e(oe);var ae=a(oe,2),$e=t(ae,!0);e(ae),e(pe),st(2),e(te),e(Y),e(K);var de=a(K,2),ge=t(de),ce=t(ge,!0);e(ge),e(de),e(ee);var Ie=a(ee,2),yt=t(Ie);yt.__click=function(...be){o.onClose?.apply(this,be)};var kt=t(yt,!0);e(yt),e(Ie),e(E),e(P),O((be,pt,Me,Gt,Zt,gt,Bt,Qt)=>{f(m,be),f(_,pt),f(Z,Me),f(X,Gt),f(ie,Zt),f($e,gt),f(ce,Bt),f(kt,Qt)},[()=>r()("settings.title"),()=>r()("settings.description"),()=>r()("settings.sections.interface"),()=>r()("settings.sections.appearance"),()=>r()("settings.options.theme.label"),()=>r()("settings.options.theme.description"),()=>r()("settings.sync_info"),()=>r()("common.buttons.close")]),ut(3,E,()=>Dt,()=>({y:20,duration:300})),ut(3,P,()=>Ja,()=>({duration:200})),g(b,P)};B(k,b=>{s()&&b(A)})}g(c,h),rt(),i()}nt(["click"]);var zo=x('<div class="absolute top-full right-0 mt-2 bg-slate-900 border border-slate-700 rounded-xl shadow-xl p-1.5 min-w-[120px] z-50 flex flex-col gap-1 animate-in fade-in zoom-in-95 duration-200"><button>ðŸ‡§ðŸ‡· PT-BR</button> <button>ðŸ‡ºðŸ‡¸ EN-US</button></div> <button class="fixed inset-0 z-40 cursor-default" aria-label="Close menu"></button>',1),Io=x('<span class="text-[10px] text-slate-400 font-medium"> </span>'),To=x('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-16"> </h3> <div class="flex items-center gap-2 mt-1 flex-wrap"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span> <!></div> <div class="mt-2 flex items-center gap-2"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div></div> <div class="flex items-center gap-1"><button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> </span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2"> <!></button></div>'),No=x('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-start-1 row-start-1 w-full"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div>'),Do=x('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> </span>'),Po=x('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <div class="flex items-center gap-1"><!> <button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <div class="mb-3"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800 text-[9px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> </button></div>'),jo=x('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> </div></div> <div class="mb-4"><div class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-slate-800/50 text-[9px] text-slate-400 border border-slate-700/50 font-bold uppercase tracking-wider"><!> </div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group"> <!></button></div>'),Mo=x('<div class="col-span-full py-12 flex flex-col items-center text-center opacity-40"><div class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-3 border border-slate-700 border-dashed"><!></div> <h3 class="text-lg font-black uppercase tracking-widest text-slate-500"> </h3> <p class="text-slate-600 max-w-sm mt-2 text-sm"> </p></div>'),Go=x('<div class="space-y-8 col-start-1 row-start-1 w-full"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold"> </span></button></div> <div><div class="flex items-center gap-3 mb-4"><div class="h-px flex-1 bg-slate-800"></div> <h3 class="text-xs font-black uppercase tracking-widest text-emerald-400 flex items-center gap-2"><!> </h3> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!></div></div></div>'),Bo=x('<div class="fixed top-0 left-0 w-full flex justify-center items-center pointer-events-none z-[100] transition-all duration-300"><div class="bg-indigo-600 rounded-full p-2.5 shadow-xl border border-indigo-500/50 text-white"><!></div></div> <div class="animate-in fade-in px-4 md:px-8 max-w-7xl mx-auto pb-32 md:pb-20"><header class="mb-8 flex justify-between items-center border-b border-slate-800/50 pt-4 md:pt-8 pb-4 sticky top-0 bg-slate-950/80 backdrop-blur-md z-40 -mx-4 px-4 md:-mx-8 md:px-8 transition-all"><div class="flex items-center gap-3"><img alt="Schwalb Vault Logo" class="h-10 md:h-14 w-auto rounded-xl"/> <h1 class="text-xl md:text-3xl font-bold text-white flex items-center gap-2 text-gradient m-0 leading-none"><span class="hidden md:inline">Schwalb Vault</span> <span class="md:hidden">Schwalb Vault</span></h1></div> <div class="hidden md:flex absolute left-1/2 -translate-x-1/2 bg-slate-900/50 p-1.5 rounded-2xl border border-slate-800 glass shadow-xl backdrop-blur-md"><div class="relative flex"><div class="absolute inset-y-0 w-1/2 bg-indigo-600 rounded-xl transition-transform duration-300 ease-out shadow-lg shadow-indigo-500/20"></div> <button><!> </button> <button><!> </button></div></div> <div class="flex items-center justify-end min-w-[40px] gap-3"><!> <button class="p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-all"><!></button> <div class="relative"><button class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-slate-800"><!> <span class="text-xs font-bold uppercase hidden md:inline"> </span></button> <!></div> <!></div></header> <div class="md:hidden fixed bottom-0 left-0 right-0 bg-slate-900/90 backdrop-blur-xl border-t border-slate-800 shadow-2xl rounded-t-2xl z-50 p-2 pb-safe"><div class="relative flex justify-between"><div class="absolute inset-y-0 w-1/2 bg-indigo-600/20 rounded-xl transition-transform duration-300 ease-out"></div> <button><!> <span class="transition-all duration-300"> </span></button> <button><!> <span class="transition-all duration-300"> </span></button></div></div> <div class="min-h-[500px] grid items-start relative"><!></div> <!> <!> <!> <!> <!></div>',1);function Ao(c,o){ot(o,!0);const r=()=>he(ue,"$googleSession",h),l=()=>he(Wa,"$liveCharacters",h),n=()=>he(fa,"$liveCampaigns",h),i=()=>he(jt,"$t",h),s=()=>he(ia,"$locale",h),p=()=>he(_s,"$publicCampaigns",h),[h,k]=Mt();let A=J(0),b=J(0),P=J(!1),E=J(!1);const z=80;function R(v){window.scrollY===0&&(u(A,v.touches[0].clientY,!0),u(P,!0))}function L(v){if(!d(P))return;const F=v.touches[0].clientY-d(A);F>0&&window.scrollY<=0?u(b,Math.min(F*.4,120),!0):(u(P,!1),u(b,0))}async function C(){if(d(P))if(u(P,!1),d(b)>z){u(E,!0),u(b,60);try{navigator&&navigator.vibrate&&navigator.vibrate(50),await ha()}finally{setTimeout(()=>{u(E,!1),u(b,0)},1e3)}}else u(b,0)}Va(()=>{Zs();const v=localStorage.getItem("user_locale");return v&&ia.set(v),document.addEventListener("touchmove",L,{passive:!1}),()=>{document.removeEventListener("touchmove",L)}});let V=J(!1);function T(v){ia.set(v),localStorage.setItem("user_locale",v),u(V,!1)}let m=J("characters"),$=J("characters"),_=J(!1);Pt(()=>{d(m)!==d($)&&u($,d(m),!0)}),Pt(()=>{r().signedIn&&ha()}),Pt(()=>{r().signedIn&&(l(),n(),pa())});let j=J(!1),N=J(null);function ee(v){u(N,v,!0),u(j,!0)}function S(v){if(!d(N))return;const I=d(N).id,w={...fe.get(I),...v};fe.set(I,w),u(j,!1)}let y=J(!1),M=J("{}");const W={name:"",playerName:"",ancestry:"Humano",novicePath:"",level:0,defense:8,health:5,system:Fe};function Z(){u(M,JSON.stringify(W),!0),u(y,!0)}async function q(v){const I=Ga(),F={id:I,name:v.name,playerName:v.playerName||"",ancestry:v.ancestry,level:v.level,defense:v.defense,system:v.system||Fe,paths:{novice:v.novicePath||"-",expert:"-",master:"-"},attributes:[{name:"ForÃ§a",value:10,key:"str"},{name:"Agilidade",value:10,key:"agi"},{name:"Intelecto",value:10,key:"int"},{name:"Vontade",value:10,key:"wil"}],speed:5,health:v.health,currentHealth:v.health,spells:[],talents:[],equipment:[],afflictions:[],effects:[],currency:{gp:0,sp:0,cp:0},languages:["Comum"]};fe.set(I,F),u(y,!1),Vt(qt("/characters/[id]",{id:I}))}let U=J(!1),K=J(null),ne=J("{}");const H={name:"",description:"",gmName:"",system:Fe};function G(v=null){u(K,v?v.id:null,!0),u(ne,JSON.stringify(v||H),!0),u(U,!0)}async function X(v){const I=d(K)||Ga(),F=d(K)?me.get(I):{},w={...F,id:I,name:v.name,description:v.description,gmName:v.gmName,players:F.players||[],backupEnabled:v.backupEnabled||!1,backupHash:v.backupHash||"",system:v.system||Fe};v.removePassword?delete w.passwordHash:v.password&&(w.passwordHash=await Cs(v.password)),me.set(I,w),u(U,!1)}let Y=J(!1),te=J(La({title:"",message:"",onConfirm:()=>{}}));function pe(v){u(te,{title:i()("dashboard.campaigns.delete_title"),message:i()("dashboard.campaigns.delete_message"),onConfirm:()=>{console.log("[DEBUG] Deleting campaign with ID:",v);let I=0;for(const F of me.keys()){const w=me.get(F);(F===v||w&&w.id===v)&&(console.log("[DEBUG] Found match for deletion - Key:",F,"Camp ID:",w?.id),me.delete(F),I++)}console.log("[DEBUG] Total entries deleted from map:",I),tt.set(v,{type:"campaign",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),pa(),u(Y,!1)}},!0),u(Y,!0)}function oe(v){u(te,{title:i()("dashboard.characters.delete_title"),message:i()("dashboard.characters.delete_message"),onConfirm:()=>{ye(fa).forEach(w=>{let se=!1;w.members&&w.members.some(re=>re.id===v)&&(w.members=w.members.filter(re=>re.id!==v),se=!0),w.sessionRoster&&w.sessionRoster.includes(v)&&(w.sessionRoster=w.sessionRoster.filter(re=>re!==v),se=!0),w.activeEnemies&&w.activeEnemies.some(re=>re.id===v)&&(w.activeEnemies=w.activeEnemies.filter(re=>re.id!==v),se=!0),se&&me.set(w.id,w)}),console.log("[DEBUG] Deleting character with ID:",v);let F=0;for(const w of fe.keys()){const se=fe.get(w);(w===v||se&&se.id===v)&&(console.log("[DEBUG] Found match for deletion - Key:",w,"Char ID:",se?.id),fe.delete(w),F++)}console.log("[DEBUG] Total entries deleted from map:",F),tt.set(v,{type:"character",deletedAt:Date.now()}),console.log("[DEBUG] Deletion tracked in deletedIdsMap"),pa(),u(Y,!1)}},!0),u(Y,!0)}var ie=Bo();vt("touchstart",ra,R),vt("touchmove",ra,L),vt("touchend",ra,C);var ae=D(ie),$e=t(ae),de=t($e);{let v=_t(()=>d(E)?"animate-spin":""),I=_t(()=>d(b)*2);Ts(de,{get class(){return d(v)},size:20,get style(){return`transform: rotate(${d(I)??""}deg)`}})}e($e),e(ae);var ge=a(ae,2),ce=t(ge),Ie=t(ce),yt=t(Ie);st(2),e(Ie);var kt=a(Ie,2),be=t(kt),pt=t(be),Me=a(pt,2);Me.__click=()=>u(m,"characters");var Gt=t(Me);Ba(Gt,{size:18});var Zt=a(Gt);e(Me);var gt=a(Me,2);gt.__click=()=>u(m,"campaigns");var Bt=t(gt);va(Bt,{size:18});var Qt=a(Bt);e(gt),e(be),e(kt);var wa=a(kt,2),ya=t(wa);_o(ya,{});var $t=a(ya,2);$t.__click=()=>u(_,!0);var es=t($t);ga(es,{size:20}),e($t);var ea=a($t,2),St=t(ea);St.__click=()=>u(V,!d(V));var ka=t(St);ca(ka,{size:20});var $a=a(ka,2),ts=t($a,!0);e($a),e(St);var as=a(St,2);{var ss=v=>{var I=zo(),F=D(I),w=t(F);w.__click=()=>T("pt");var se=a(w,2);se.__click=()=>T("en"),e(F);var re=a(F,2);re.__click=()=>u(V,!1),O(()=>{ke(w,1,`flex items-center gap-2 px-3 py-2 text-sm font-bold rounded-lg ${s()==="pt"?"bg-indigo-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"}`),ke(se,1,`flex items-center gap-2 px-3 py-2 text-sm font-bold rounded-lg ${s()==="en"?"bg-indigo-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"}`)}),g(v,I)};B(as,v=>{d(V)&&v(ss)})}e(ea);var os=a(ea,2);co(os,{}),e(wa),e(ce);var ta=a(ce,2),Sa=t(ta),Ca=t(Sa),Ct=a(Ca,2);Ct.__click=()=>u(m,"characters");var Ea=t(Ct);{let v=_t(()=>d(m)==="characters"?2.5:2);Ba(Ea,{size:20,get strokeWidth(){return d(v)},class:"transition-all duration-300"})}var za=a(Ea,2),rs=t(za,!0);e(za),e(Ct);var At=a(Ct,2);At.__click=()=>u(m,"campaigns");var Ia=t(At);{let v=_t(()=>d(m)==="campaigns"?2.5:2);va(Ia,{size:20,get strokeWidth(){return d(v)},class:"transition-all duration-300"})}var Ta=a(Ia,2),ns=t(Ta,!0);e(Ta),e(At),e(Sa),e(ta);var aa=a(ta,2),is=t(aa);{var ls=v=>{var I=No(),F=t(I);Yt(F,1,l,it=>it.id,(it,_e)=>{var lt=To(),ft=t(lt),mt=t(ft),Et=t(mt),Ft=t(Et,!0);e(Et);var ht=a(Et,2),zt=t(ht),sa=t(zt,!0);e(zt);var ve=a(zt,2),Q=t(ve);e(ve);var we=a(ve,2);{var Ce=Pe=>{var Ue=Io(),Oe=t(Ue);e(Ue),O(()=>f(Oe,`â€¢ ${d(_e).playerName??""}`)),g(Pe,Ue)};B(we,Pe=>{d(_e).playerName&&Pe(Ce)})}e(ht);var xe=a(ht,2),Te=t(xe),Ee=t(Te);Jt(Ee,{size:10});var Ne=a(Ee);e(Te),e(xe),e(mt);var Ge=a(mt,2),Se=t(Ge);Se.__click=()=>ee(d(_e));var Be=t(Se);ga(Be,{size:16}),e(Se);var De=a(Se,2);De.__click=()=>oe(d(_e).id);var Ae=t(De);Ma(Ae,{size:16}),e(De),e(Ge),e(ft);var qe=a(ft,2),Ye=t(qe),Je=t(Ye),We=t(Je);va(We,{size:12});var Ke=a(We);e(Je);var Xe=a(Je,2),It=t(Xe,!0);e(Xe),e(Ye),e(qe);var Ze=a(qe,2);Ze.__click=()=>Vt(qt("/characters/[id]",{id:d(_e).id}));var bt=t(Ze),dt=a(bt);Aa(dt,{size:14,fill:"currentColor"}),e(Ze),e(lt),O((Pe,Ue,Oe,ct,xt,Tt)=>{f(Ft,d(_e).name),f(sa,d(_e).ancestry||"Humano"),f(Q,`${Pe??""} ${d(_e).level??""}`),f(Ne,` ${Ue??""}`),ze(Se,"title",Oe),ze(De,"title",ct),f(Ke,` ${xt??""}`),f(It,d(_e).paths?.novice||"-"),f(bt,`${Tt??""} `)},[()=>i()("common.labels.level"),()=>da(d(_e).system).name,()=>i()("common.buttons.settings"),()=>i()("common.buttons.delete"),()=>i()("dashboard.characters.paths"),()=>i()("dashboard.characters.open_sheet")]),g(it,lt)});var w=a(F,2);w.__click=()=>Z();var se=t(w),re=t(se);la(re,{size:32}),e(se);var Ut=a(se,2),Ot=t(Ut,!0);e(Ut),e(w),e(I),O(it=>f(Ot,it),[()=>i()("dashboard.characters.new_character")]),ut(1,I,()=>Dt,()=>({x:-100,duration:300,easing:Rt})),ut(2,I,()=>Dt,()=>({x:-100,duration:300,easing:Rt})),g(v,I)},ds=v=>{var I=Go(),F=t(I),w=t(F);Yt(w,1,n,ve=>ve.id,(ve,Q)=>{var we=Po(),Ce=t(we),xe=t(Ce),Te=t(xe),Ee=t(Te,!0);e(Te);var Ne=a(Te,2),Ge=t(Ne);{var Se=Oe=>{var ct=Do(),xt=t(ct);ca(xt,{size:10});var Tt=a(xt);e(ct),O(oa=>f(Tt,` ${oa??""}`),[()=>i()("dashboard.campaigns.published")]),g(Oe,ct)};B(Ge,Oe=>{d(Q).isPublished&&Oe(Se)})}var Be=a(Ge,2);Be.__click=()=>G(d(Q));var De=t(Be);fs(De,{size:16}),e(Be);var Ae=a(Be,2);Ae.__click=()=>pe(d(Q).id);var qe=t(Ae);Ma(qe,{size:16}),e(Ae),e(Ne),e(xe);var Ye=a(xe,2),Je=t(Ye,!0);e(Ye);var We=a(Ye,2),Ke=t(We),Xe=t(Ke);Jt(Xe,{size:10});var It=a(Xe);e(Ke),e(We);var Ze=a(We,2),bt=t(Ze,!0);e(Ze),e(Ce);var dt=a(Ce,2);dt.__click=()=>Vt(qt("/campaigns/[id]",{id:d(Q).id}));var Pe=t(dt);Aa(Pe,{size:18,fill:"currentColor"});var Ue=a(Pe);e(dt),e(we),O((Oe,ct,xt,Tt,oa,vs)=>{f(Ee,d(Q).name),ze(Be,"title",Oe),ze(Ae,"title",ct),f(Je,xt),f(It,` ${Tt??""}`),f(bt,oa),f(Ue,` ${vs??""}`)},[()=>i()("common.buttons.edit"),()=>i()("common.buttons.delete"),()=>d(Q).gmName||i()("common.labels.master"),()=>da(d(Q).system||Fe).name,()=>d(Q).description||i()("dashboard.campaigns.no_description"),()=>i()("dashboard.campaigns.start_session")]),g(ve,we)});var se=a(w,2);se.__click=()=>G();var re=t(se),Ut=t(re);la(Ut,{size:32}),e(re);var Ot=a(re,2),it=t(Ot,!0);e(Ot),e(se),e(F);var _e=a(F,2),lt=t(_e),ft=a(t(lt),2),mt=t(ft);ca(mt,{size:14});var Et=a(mt);e(ft),st(2),e(lt);var Ft=a(lt,2),ht=t(Ft);Yt(ht,1,p,ve=>ve.id,(ve,Q)=>{var we=jo(),Ce=t(we),xe=t(Ce),Te=t(xe,!0);e(xe);var Ee=a(xe,2),Ne=t(Ee),Ge=t(Ne,!0);e(Ne);var Se=a(Ne,2),Be=a(t(Se));e(Se),e(Ee);var De=a(Ee,2),Ae=t(De),qe=t(Ae);Jt(qe,{size:10});var Ye=a(qe);e(Ae),e(De);var Je=a(De,2),We=t(Je,!0);e(Je),e(Ce);var Ke=a(Ce,2);Ke.__click=()=>Vt(qt("/campaigns/[id]/invite",{id:d(Q).id}));var Xe=t(Ke),It=a(Xe);la(It,{size:18,class:"group-hover:rotate-90 transition-transform"}),e(Ke),e(we),O((Ze,bt,dt,Pe,Ue)=>{f(Te,d(Q).name),f(Ge,Ze),f(Be,` ${bt??""}`),f(Ye,` ${dt??""}`),f(We,Pe),f(Xe,`${Ue??""} `)},[()=>d(Q).gmName||i()("common.labels.master"),()=>i()("dashboard.campaigns.online"),()=>da(d(Q).system||Fe).name,()=>d(Q).description||i()("dashboard.campaigns.public_description"),()=>i()("dashboard.campaigns.join_adventure")]),g(ve,we)});var zt=a(ht,2);{var sa=ve=>{var Q=Mo(),we=t(Q),Ce=t(we);ys(Ce,{size:32}),e(we);var xe=a(we,2),Te=t(xe,!0);e(xe);var Ee=a(xe,2),Ne=t(Ee,!0);e(Ee),e(Q),O((Ge,Se)=>{f(Te,Ge),f(Ne,Se)},[()=>i()("dashboard.campaigns.no_online_campaigns"),()=>i()("dashboard.campaigns.no_online_description")]),g(ve,Q)};B(zt,ve=>{p().length===0&&ve(sa)})}e(Ft),e(_e),e(I),O((ve,Q)=>{f(it,ve),f(Et,` ${Q??""}`)},[()=>i()("dashboard.campaigns.new_campaign"),()=>i()("dashboard.campaigns.public_campaigns")]),ut(1,I,()=>Dt,()=>({x:100,duration:300,easing:Rt})),ut(2,I,()=>Dt,()=>({x:100,duration:300,easing:Rt})),g(v,I)};B(is,v=>{d(m)==="characters"?v(ls):v(ds,!1)})}e(aa);var Na=a(aa,2);qs(Na,{get isOpen(){return d(y)},get initialData(){return d(M)},onClose:()=>u(y,!1),onSave:q});var Da=a(Na,2);$s(Da,{get isOpen(){return d(U)},get initialData(){return d(ne)},onClose:()=>u(U,!1),onSave:X});var Pa=a(Da,2);xs(Pa,{get isOpen(){return d(Y)},get title(){return d(te).title},get message(){return d(te).message},get onConfirm(){return d(te).onConfirm},onCancel:()=>u(Y,!1)});var ja=a(Pa,2);Js(ja,{get isOpen(){return d(j)},get characterData(){return d(N)},onClose:()=>u(j,!1),onSave:S});var cs=a(ja,2);Eo(cs,{get isOpen(){return d(_)},onClose:()=>u(_,!1)}),e(ge),O((v,I,F,w,se,re)=>{na(ae,`transform: translateY(${(d(E)?60:d(b))??""}px); opacity: ${d(b)>0?1:0}`),ze(yt,"src",`${ws??""}/logo-black.webp`),na(pt,`transform: translateX(${d(m)==="campaigns"?"100%":"0%"})`),ke(Me,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${d(m)==="characters"?"text-white":"text-slate-400 hover:text-white"}`),f(Zt,` ${v??""}`),ke(gt,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${d(m)==="campaigns"?"text-white":"text-slate-400 hover:text-white"}`),f(Qt,` ${I??""}`),ze($t,"title",F),ze(St,"title",w),f(ts,s()==="pt"?"PT":"EN"),na(Ca,`transform: translateX(${d(m)==="campaigns"?"100%":"0%"})`),ke(Ct,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${d(m)==="characters"?"text-indigo-400":"text-slate-500"}`),f(rs,se),ke(At,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${d(m)==="campaigns"?"text-indigo-400":"text-slate-500"}`),f(ns,re)},[()=>i()("dashboard.tabs.characters"),()=>i()("dashboard.tabs.campaigns"),()=>i()("settings.title"),()=>i()("common.labels.language")||"Language",()=>i()("dashboard.tabs.characters"),()=>i()("dashboard.tabs.campaigns")]),g(c,ie),rt(),k()}nt(["click"]);var Uo=x("<!> <!>",1);function or(c){var o=Uo(),r=D(o);Fs(r,{});var l=a(r,2);Ao(l,{}),g(c,o)}export{or as component};

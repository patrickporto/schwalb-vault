import{c as Pe,a as g,f as N}from"../chunks/vbI-l42I.js";import"../chunks/BX-sjYO1.js";import{B as je,p as Be,_ as We,j as it,b as Ke,c as e,s as a,r as t,C as $,d,t as we,n as x,g as s}from"../chunks/BlobBfBu.js";import{d as Le,s as z}from"../chunks/OaA2MUvX.js";import{r as ae,b as re,s as Oe,e as Ee}from"../chunks/BO950AV2.js";import{l as lt,s as ot,p as Ae,i as se}from"../chunks/BBccnPWr.js";import{s as nt,a as $e}from"../chunks/iJn5IoH5.js";import{g as dt}from"../chunks/CI59BmNm.js";import{C as ct,a as Ge,l as vt}from"../chunks/Ctq-IqO-.js";import{S as pt,G as He,C as ut,u as Ve,P as Re}from"../chunks/DF9JvrmA.js";import{I as gt,U as bt,a as Te,r as ye,b as ke,p as ht}from"../chunks/Ffp28osj.js";import{g as Ce}from"../chunks/BCI4IhRR.js";import{h as mt}from"../chunks/BYmFNSF7.js";import{s as ft}from"../chunks/-C23ZK4E.js";import{P as qe,T as Ue,S as xt}from"../chunks/BK3mqTpI.js";function Je(A,_){const K=lt(_,["children","$$slots","$$events","$$legacy"]);const L=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];gt(A,ot({name:"scroll"},()=>K,{get iconNode(){return L},children:(l,Q)=>{var G=Pe(),b=je(G);ft(b,_,"default",{}),g(l,G)},$$slots:{default:!0}}))}var _t=N('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="presentation"><div class="bg-slate-800 rounded-xl w-full max-w-md p-6 border border-slate-700 shadow-2xl" role="dialog" aria-modal="true" aria-labelledby="character-modal-title"><h3 id="character-modal-title" class="font-bold text-white text-lg mb-4 tracking-tight">Configurações do Personagem</h3> <div class="space-y-4"><div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome</label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Alaric"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Ancestralidade</label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Humano"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nível</label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Trilha Inicial (Novice)</label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Guerreiro, Mago"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Defesa</label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Vida Máxima</label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Salvar</button></div></div></div>');function wt(A,_){Be(_,!0);let K=Ae(_,"isOpen",3,!1),L=Ae(_,"initialData",3,"{}"),l=We({name:"",ancestry:"",novicePath:"",level:1,defense:10,health:24});it(()=>{if(K()&&L())try{const o=JSON.parse(L());l.name=o.name||"",l.ancestry=o.ancestry||"",l.novicePath=o.paths&&o.paths.novice?o.paths.novice:"",l.level=o.level||1,l.defense=o.defense||10,l.health=o.health||o.normalHealth||24}catch{l.name="",l.ancestry="",l.novicePath="",l.level=1,l.defense=10,l.health=24}});function Q(o){o.target===o.currentTarget&&_.onClose()}var G=Pe(),b=je(G);{var X=o=>{var V=_t();V.__click=Q;var pe=e(V),ie=a(e(pe),2),le=e(ie),R=a(e(le),2);ae(R),t(le);var U=a(le,2),Y=e(U),ue=a(e(Y),2);ae(ue),t(Y);var oe=a(Y,2),ge=a(e(oe),2);ae(ge),t(oe),t(U);var k=a(U,2),H=a(e(k),2);ae(H),t(k);var be=a(k,2),ne=e(be),Z=a(e(ne),2);ae(Z),t(ne);var D=a(ne,2),ee=a(e(D),2);ae(ee),t(D),t(be),t(ie);var de=a(ie,2),he=e(de);he.__click=function(...c){_.onClose?.apply(this,c)};var me=a(he,2);me.__click=()=>_.onSave({...l}),t(de),t(pe),t(V),re(R,()=>l.name,c=>l.name=c),re(ue,()=>l.ancestry,c=>l.ancestry=c),re(ge,()=>l.level,c=>l.level=c),re(H,()=>l.novicePath,c=>l.novicePath=c),re(Z,()=>l.defense,c=>l.defense=c),re(ee,()=>l.health,c=>l.health=c),g(o,V)};se(b,o=>{K()&&o(X)})}g(A,G),Ke()}Le(["click"]);var yt=N('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-8"> </h3> <div class="flex items-center gap-2 mt-1"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span></div></div> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100"><!></button></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> Trilhas</span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2">Abrir Ficha <!></button></div>'),kt=N('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500"><button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold">Novo Personagem</span></button> <!></div>'),Ct=N('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> Publicada</span>'),Pt=N('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <!></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <div class="flex gap-3 mt-4"><button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> Gerir Sessão</button> <div class="flex gap-2"><button class="p-3 text-slate-400 hover:text-white bg-slate-800/50 rounded-2xl border border-slate-800 hover:border-slate-700 transition-all" title="Editar"><!></button> <button class="p-3 text-slate-400 hover:text-red-400 bg-slate-800/50 rounded-2xl border border-slate-800 hover:border-red-900/30 transition-all" title="Excluir"><!></button></div></div></div>'),jt=N('<div class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500"><button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold">Nova Campanha</span></button> <!></div>'),zt=N('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> Online</div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group">Participar da Aventura <!></button></div>'),Nt=N('<div class="col-span-full py-24 flex flex-col items-center text-center opacity-40"><div class="w-20 h-20 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-4 border border-slate-700 border-dashed"><!></div> <h3 class="text-2xl font-black uppercase tracking-widest text-slate-500">Nenhuma Campanha Online</h3> <p class="text-slate-600 max-w-sm mt-3 font-medium">Os Mestres precisam publicar suas sessões e estarem ativos para que apareçam aqui.</p></div>'),Mt=N('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500"><!> <!></div>'),St=N('<div class="animate-in fade-in p-4 md:p-8 max-w-7xl mx-auto pb-20"><header class="mb-8 flex flex-col md:flex-row justify-between items-center gap-4 border-b border-slate-800 pb-6"><div><h1 class="text-3xl font-bold text-white flex items-center gap-2 text-gradient"><!> Weird Wizard Vault</h1> <p class="text-slate-400 mt-1">Gestor de Personagens e Campanhas</p></div> <div class="flex bg-slate-900 p-1 rounded-xl border border-slate-800 glass shadow-xl"><button><!> Personagens</button> <button><!> Campanhas</button> <button><!> Públicas</button></div></header> <div class="min-h-[500px]"><!></div> <!> <!> <!></div>');function Ot(A,_){Be(_,!0);const K=()=>$e(vt,"$liveCharacters",Q),L=()=>$e(Ge,"$liveCampaigns",Q),l=()=>$e(ht,"$publicCampaigns",Q),[Q,G]=nt();let b=$("characters"),X=$(!1),o=$(null),V=$("{}");const pe={name:"",ancestry:"Humano",novicePath:"",level:0,defense:8,health:5};function ie(r=null){d(o,r?r.id:null,!0),d(V,JSON.stringify(r||pe),!0),d(X,!0)}function le(r){const v=s(o)||Ve(),i=s(o)?Te.get(v):{},n={...i,id:v,name:r.name,ancestry:r.ancestry,level:r.level,defense:r.defense,paths:{novice:r.novicePath||i.paths?.novice||"-",expert:i.paths?.expert||"-",master:i.paths?.master||"-"},attributes:i.attributes||[{name:"Força",value:10,key:"str"},{name:"Agilidade",value:10,key:"agi"},{name:"Intelecto",value:10,key:"int"},{name:"Vontade",value:10,key:"wil"}],speed:i.speed||5,health:r.health,currentHealth:s(o)&&i.currentHealth||r.health};s(o)||(n.spells=[],n.talents=[],n.equipment=[],n.afflictions=[],n.effects=[],n.currency={gp:0,sp:0,cp:0},n.languages=["Comum"]),Te.set(v,n),d(X,!1),s(o)||Ce(ye("/characters/[id]",{id:v}))}let R=$(!1),U=$(null),Y=$("{}");const ue={name:"",description:"",gmName:""};function oe(r=null){d(U,r?r.id:null,!0),d(Y,JSON.stringify(r||ue),!0),d(R,!0)}async function ge(r){const v=s(U)||Ve(),i=s(U)?ke.get(v):{},n={...i,id:v,name:r.name,description:r.description,gmName:r.gmName,players:i.players||[]};r.removePassword?delete n.passwordHash:r.password&&(n.passwordHash=await mt(r.password)),ke.set(v,n),d(R,!1)}let k=$(!1),H=$(We({title:"",message:"",onConfirm:()=>{}}));function be(r){d(H,{title:"Excluir Campanha",message:"Tem certeza que deseja apagar esta campanha permanentemente?",onConfirm:()=>{ke.delete(r),d(k,!1)}},!0),d(k,!0)}function ne(r){d(H,{title:"Excluir Personagem",message:"Tem certeza que deseja apagar este personagem permanentemente?",onConfirm:()=>{dt(Ge).forEach(i=>{let n=!1;i.members&&i.members.some(h=>h.id===r)&&(i.members=i.members.filter(h=>h.id!==r),n=!0),i.sessionRoster&&i.sessionRoster.includes(r)&&(i.sessionRoster=i.sessionRoster.filter(h=>h!==r),n=!0),i.activeEnemies&&i.activeEnemies.some(h=>h.id===r)&&(i.activeEnemies=i.activeEnemies.filter(h=>h.id!==r),n=!0),n&&ke.set(i.id,i)}),Te.delete(r),d(k,!1)}},!0),d(k,!0)}var Z=St(),D=e(Z),ee=e(D),de=e(ee),he=e(de);pt(he,{class:"text-indigo-500"}),x(),t(de),x(2),t(ee);var me=a(ee,2),c=e(me);c.__click=()=>d(b,"characters");var Qe=e(c);bt(Qe,{size:16}),x(),t(c);var ce=a(c,2);ce.__click=()=>d(b,"campaigns");var Xe=e(ce);Je(Xe,{size:16}),x(),t(ce);var fe=a(ce,2);fe.__click=()=>d(b,"discovery");var Ye=e(fe);He(Ye,{size:16}),x(),t(fe),t(me),t(D);var ze=a(D,2),Ze=e(ze);{var De=r=>{var v=kt(),i=e(v);i.__click=()=>ie();var n=e(i),h=e(n);qe(h,{size:32}),t(n),x(2),t(i);var T=a(i,2);Ee(T,1,K,C=>C.id,(C,m)=>{var q=yt(),M=e(q),S=e(M),P=e(S),w=e(P,!0);t(P);var F=a(P,2),p=e(F),u=e(p,!0);t(p);var f=a(p,2),O=e(f);t(f),t(F),t(S);var E=a(S,2);E.__click=()=>ne(s(m).id);var ve=e(E);Ue(ve,{size:16}),t(E),t(M);var y=a(M,2),J=e(y),I=e(J),te=e(I);Je(te,{size:12}),x(),t(I);var B=a(I,2),j=e(B,!0);t(B),t(J),t(y);var W=a(y,2);W.__click=()=>Ce(ye("/characters/[id]",{id:s(m).id}));var xe=a(e(W));Re(xe,{size:14,fill:"currentColor"}),t(W),t(q),we(()=>{z(w,s(m).name),z(u,s(m).ancestry||"Humano"),z(O,`Nível ${s(m).level??""}`),z(j,s(m).paths?.novice||"-")}),g(C,q)}),t(v),g(r,v)},et=r=>{var v=Pe(),i=je(v);{var n=T=>{var C=jt(),m=e(C);m.__click=()=>oe();var q=e(m),M=e(q);qe(M,{size:32}),t(q),x(2),t(m);var S=a(m,2);Ee(S,1,L,P=>P.id,(P,w)=>{var F=Pt(),p=e(F),u=e(p),f=e(u),O=e(f,!0);t(f);var E=a(f,2);{var ve=Me=>{var Se=Ct(),st=e(Se);He(st,{size:10}),x(),t(Se),g(Me,Se)};se(E,Me=>{s(w).isPublished&&Me(ve)})}t(u);var y=a(u,2),J=e(y,!0);t(y);var I=a(y,2),te=e(I,!0);t(I),t(p);var B=a(p,2),j=e(B);j.__click=()=>Ce(ye("/campaigns/[id]",{id:s(w).id}));var W=e(j);Re(W,{size:18,fill:"currentColor"}),x(),t(j);var xe=a(j,2),_e=e(xe);_e.__click=()=>oe(s(w));var at=e(_e);xt(at,{size:20}),t(_e);var Ne=a(_e,2);Ne.__click=()=>be(s(w).id);var rt=e(Ne);Ue(rt,{size:20}),t(Ne),t(xe),t(B),t(F),we(()=>{z(O,s(w).name),z(J,s(w).gmName||"Mestre"),z(te,s(w).description||"Uma jornada sem descrição ainda.")}),g(P,F)}),t(C),g(T,C)},h=T=>{var C=Pe(),m=je(C);{var q=M=>{var S=Mt(),P=e(S);Ee(P,1,l,p=>p.id,(p,u)=>{var f=zt(),O=e(f),E=e(O),ve=e(E,!0);t(E);var y=a(E,2),J=e(y),I=e(J,!0);t(J),x(2),t(y);var te=a(y,2),B=e(te,!0);t(te),t(O);var j=a(O,2);j.__click=()=>Ce(ye("/campaigns/[id]/invite",{id:s(u).id}));var W=a(e(j));qe(W,{size:18,class:"group-hover:rotate-90 transition-transform"}),t(j),t(f),we(()=>{z(ve,s(u).name),z(I,s(u).gmName||"Mestre"),z(B,s(u).description||"Uma jornada por terras desconhecidas aguarada heróis.")}),g(p,f)});var w=a(P,2);{var F=p=>{var u=Nt(),f=e(u),O=e(f);He(O,{size:40}),t(f),x(4),t(u),g(p,u)};se(w,p=>{l().length===0&&p(F)})}t(S),g(M,S)};se(m,M=>{s(b)==="discovery"&&M(q)},!0)}g(T,C)};se(i,T=>{s(b)==="campaigns"?T(n):T(h,!1)},!0)}g(r,v)};se(Ze,r=>{s(b)==="characters"?r(De):r(et,!1)})}t(ze);var Fe=a(ze,2);wt(Fe,{get isOpen(){return s(X)},get initialData(){return s(V)},onClose:()=>d(X,!1),onSave:le});var Ie=a(Fe,2);ut(Ie,{get isOpen(){return s(R)},get initialData(){return s(Y)},onClose:()=>d(R,!1),onSave:ge});var tt=a(Ie,2);ct(tt,{get isOpen(){return s(k)},get title(){return s(H).title},get message(){return s(H).message},get onConfirm(){return s(H).onConfirm},onCancel:()=>d(k,!1)}),t(Z),we(()=>{Oe(c,1,`px-5 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s(b)==="characters"?"bg-indigo-600 text-white shadow-[0_0_20px_rgba(79,70,229,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-800"}`),Oe(ce,1,`px-5 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s(b)==="campaigns"?"bg-indigo-600 text-white shadow-[0_0_20px_rgba(79,70,229,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-800"}`),Oe(fe,1,`px-5 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s(b)==="discovery"?"bg-emerald-600 text-white shadow-[0_0_20px_rgba(16,185,129,0.4)]":"text-slate-400 hover:text-white hover:bg-slate-800"}`)}),g(A,Z),Ke(),G()}Le(["click"]);function Kt(A){Ot(A,{})}export{Kt as component};

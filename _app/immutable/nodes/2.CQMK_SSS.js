import"../chunks/DsnmJJEf.js";import"../chunks/D9IBKMOw.js";import{d as Le,e as ne,a as g,p as je,k as Ee,o as u,G as A,j as i,f as k,l as e,n as b,w as t,V as $t,z as $e,s as o,t as X,aj as Yt,I as Qt,H as bt}from"../chunks/BkhWOpPj.js";import{d as Ae,o as it,g as Y,w as Zt,s as B}from"../chunks/CqLQNChA.js";import{l as It,s as jt,i as K,p as Ie}from"../chunks/DbalZYyT.js";import{I as Et,s as At}from"../chunks/CUvy-rMn.js";import{r as se,s as be,d as xt,f as _t,e as at}from"../chunks/Am2pCLS3.js";import{t as Ue,f as qe}from"../chunks/p8T5NLcP.js";import{s as Ot,a as Te}from"../chunks/CPHStP6i.js";import{a as nt,l as Mt,C as ea}from"../chunks/CbAYYRpU.js";import{S as ta,C as aa,u as wt,P as yt,G as kt}from"../chunks/B87lhilk.js";import{b as ie,d as xe,e as _e,p as oa}from"../chunks/DpieVsxQ.js";import{g as Ve}from"../chunks/hqda9HG3.js";import{U as Ct,r as Je,W as ra}from"../chunks/Byzf0FCw.js";import{M as Ft,a as sa,T as St,P as ot,q as We,b as ia}from"../chunks/f4sK7lT0.js";import{U as lt,L as na}from"../chunks/CLg5UOL_.js";import{h as la}from"../chunks/BYmFNSF7.js";function da(n,a){const s=It(a,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];Et(n,jt({name:"download"},()=>s,{get iconNode(){return d},children:(r,w)=>{var c=Le(),h=ne(c);At(h,a,"default",{}),g(r,c)},$$slots:{default:!0}}))}function rt(n,a){const s=It(a,["children","$$slots","$$events","$$legacy"]);const d=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"}]];Et(n,jt({name:"scroll"},()=>s,{get iconNode(){return d},children:(r,w)=>{var c=Le(),h=ne(c);At(h,a,"default",{}),g(r,c)},$$slots:{default:!0}}))}var ca=k('<button class="fixed bottom-6 right-6 z-40 bg-indigo-600 hover:bg-indigo-500 text-white p-4 rounded-full shadow-2xl shadow-indigo-900/50 flex items-center gap-2 font-bold animate-pulse hover:animate-none transition-all active:scale-95"><!> <span class="text-sm uppercase tracking-wider hidden sm:inline">Instalar App</span></button>');function ua(n,a){je(a,!0);let s=A(null),d=A(!1);it(()=>{window.addEventListener("beforeinstallprompt",v=>{v.preventDefault(),u(s,v,!0),u(d,!0)}),window.addEventListener("appinstalled",()=>{u(s,null),u(d,!1)})});async function r(){if(!i(s))return;i(s).prompt();const{outcome:v}=await i(s).userChoice;v==="accepted"&&(u(s,null),u(d,!1))}var w=Le(),c=ne(w);{var h=v=>{var m=ca();m.__click=r;var P=e(m);da(P,{size:24}),b(2),t(m),g(v,m)};K(c,v=>{i(d)&&v(h)})}g(n,w),Ee()}Ae(["click"]);var va=k('<div class="space-y-4"><div><label for="char-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nome do Personagem</label> <input id="char-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Alaric, o Errante"/></div> <div><label for="char-player" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="char-player" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-ancestry" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Ancestralidade</label> <input id="char-ancestry" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Humano"/></div> <div><label for="char-level" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Nível</label> <input id="char-level" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div> <div><label for="char-path" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Trilha Inicial (Novice)</label> <input id="char-path" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Ex: Guerreiro, Mago"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="char-defense" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Defesa</label> <input id="char-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div> <div><label for="char-health" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest">Vida Máxima</label> <input id="char-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors"/></div></div></div> <div class="flex gap-3 mt-8"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Criar Personagem</button></div>',1);function pa(n,a){je(a,!0);let s=Ie(a,"isOpen",3,!1),d=Ie(a,"initialData",3,"{}"),r=$t({name:"",playerName:"",ancestry:"",novicePath:"",level:1,defense:10,health:24});$e(()=>{if(s()&&d())try{const c=JSON.parse(d());r.name=c.name||"",r.playerName=c.playerName||"",r.ancestry=c.ancestry||"",r.novicePath=c.paths&&c.paths.novice?c.paths.novice:"",r.level=c.level||1,r.defense=c.defense||10,r.health=c.health||c.normalHealth||24}catch{r.name="",r.playerName="",r.ancestry="",r.novicePath="",r.level=1,r.defense=10,r.health=24}});function w(){a.onSave({...r})}Ft(n,{get isOpen(){return s()},get onClose(){return a.onClose},title:"Novo Personagem",maxWidth:"max-w-md",children:(c,h)=>{var v=va(),m=ne(v),P=e(m),C=o(e(P),2);se(C),t(P);var S=o(P,2),T=e(S),M=e(T);lt(M,{size:12}),b(),t(T);var U=o(T,2);se(U),t(S);var z=o(S,2),E=e(z),ue=o(e(E),2);se(ue),t(E);var N=o(E,2),I=o(e(N),2);se(I),t(N),t(z);var F=o(z,2),W=o(e(F),2);se(W),t(F);var D=o(F,2),Q=e(D),x=o(e(Q),2);se(x),t(Q);var G=o(Q,2),te=o(e(G),2);se(te),t(G),t(D),t(m);var Oe=o(m,2),ve=e(Oe);ve.__click=function(...y){a.onClose?.apply(this,y)};var we=o(ve,2);we.__click=w,t(Oe),ie(C,()=>r.name,y=>r.name=y),ie(U,()=>r.playerName,y=>r.playerName=y),ie(ue,()=>r.ancestry,y=>r.ancestry=y),ie(I,()=>r.level,y=>r.level=y),ie(W,()=>r.novicePath,y=>r.novicePath=y),ie(x,()=>r.defense,y=>r.defense=y),ie(te,()=>r.health,y=>r.health=y),g(c,v)},$$slots:{default:!0}}),Ee()}Ae(["click"]);var ga=k('<div class="space-y-5"><div><label for="settings-player-name" class="text-xs text-slate-500 uppercase font-black block mb-1 tracking-widest flex items-center gap-1"><!> Nome do Jogador</label> <input id="settings-player-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors" placeholder="Seu nome ou apelido"/> <p class="text-[10px] text-slate-500 mt-1">O nome do jogador associado a este personagem.</p></div></div> <div class="flex flex-col-reverse sm:flex-row gap-3 mt-6"><button class="flex-1 bg-slate-700 hover:bg-slate-600 transition-all py-4 sm:py-3 rounded-xl text-white font-bold active:scale-95">Cancelar</button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 transition-all py-4 sm:py-3 rounded-xl text-white font-bold shadow-lg shadow-indigo-900/20 active:scale-95">Salvar</button></div>',1);function fa(n,a){je(a,!0);let s=Ie(a,"isOpen",3,!1),d=Ie(a,"characterData",3,null),r=A("");$e(()=>{s()&&d()&&u(r,d().playerName||"",!0)});function w(){a.onSave({playerName:i(r)})}Ft(n,{get isOpen(){return s()},get onClose(){return a.onClose},title:"⚙️ Configurações do Personagem",maxWidth:"max-w-md",children:(c,h)=>{var v=ga(),m=ne(v),P=e(m),C=e(P),S=e(C);lt(S,{size:12}),b(),t(C);var T=o(C,2);se(T),b(2),t(P),t(m);var M=o(m,2),U=e(M);U.__click=function(...E){a.onClose?.apply(this,E)};var z=o(U,2);z.__click=w,t(M),ie(T,()=>i(r),E=>u(r,E)),g(c,v)},$$slots:{default:!0}}),Ee()}Ae(["click"]);const ma="701898444454-7ml9onnv529k99rkvgh1slhdj4a1arrm.apps.googleusercontent.com",zt="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile",O=Zt({signedIn:!1,accessToken:null,userProfile:null,isInited:!1});let De,Nt=!1;const Re="wwv_google_session";async function Gt(n){try{const a=await fetch("https://www.googleapis.com/oauth2/v1/userinfo?alt=json",{headers:{Authorization:`Bearer ${n}`}});if(a.ok){const s=await a.json();O.update(d=>({...d,userProfile:{name:s.name,picture:s.picture}})),ba()}}catch(a){console.error("Failed to fetch user profile:",a)}}function ha(){try{const n=localStorage.getItem(Re);if(n){const a=JSON.parse(n);if(a.accessToken)return O.set({signedIn:!0,accessToken:a.accessToken,userProfile:a.userProfile||null,isInited:!0}),console.log("Restored session from localStorage"),Gt(a.accessToken),!0}}catch(n){console.error("Failed to load stored session:",n)}return!1}function ba(){const n=Y(O);n.signedIn&&n.accessToken?localStorage.setItem(Re,JSON.stringify({accessToken:n.accessToken,userProfile:n.userProfile})):localStorage.removeItem(Re)}async function xa(){const n=ma;if(ha()){try{await Tt(),De=google.accounts.oauth2.initTokenClient({client_id:n,scope:zt,callback:Pt}),Nt=!0}catch(s){console.warn("Could not initialize GIS after restoring session:",s)}return}try{await Tt(),De=google.accounts.oauth2.initTokenClient({client_id:n,scope:zt,callback:Pt}),Nt=!0,O.update(s=>({...s,isInited:!0})),console.log("Google Auth Initialized")}catch(s){console.error("Failed to initialize Google Auth:",s),O.update(d=>({...d,isInited:!0})),alert("Falha ao inicializar Google Auth. Verifique sua conexão/Console.")}}function Pt(n){if(n.error!==void 0){console.error("Google Auth Error:",n);return}console.log("Google Auth Success",n),O.update(a=>({...a,signedIn:!0,accessToken:n.access_token})),Gt(n.access_token)}function Tt(){return new Promise((n,a)=>{if(typeof google<"u"&&google.accounts){n();return}const s=document.createElement("script");s.src="https://accounts.google.com/gsi/client",s.async=!0,s.defer=!0,s.onload=()=>{const d=setInterval(()=>{typeof google<"u"&&google.accounts&&(clearInterval(d),n())},50);setTimeout(()=>{clearInterval(d),(typeof google>"u"||!google.accounts)&&a(new Error("Google object not available after script load"))},3e3)},s.onerror=()=>{a(new Error("Failed to load Google Identity Services script"))},document.head.appendChild(s)})}function _a(){De?De.requestAccessToken():(console.error("Google Auth not initialized"),alert("Google Auth ainda não inicializou. Tente novamente em alguns segundos."))}function wa(){const n=Y(O).accessToken;localStorage.removeItem(Re),O.update(a=>({...a,signedIn:!1,accessToken:null,userProfile:null})),n&&typeof google<"u"&&google.accounts&&google.accounts.oauth2.revoke(n,()=>{console.log("Access token revoked")})}async function Ht(){const n=Y(O).accessToken;if(!n)throw new Error("Not signed in");const s=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent("name = 'weird-wizard-backup.json' and 'appDataFolder' in parents and trashed = false")}&spaces=appDataFolder&fields=files(id, name, modifiedTime, size)`,d=await fetch(s,{headers:{Authorization:`Bearer ${n}`}});if(!d.ok)throw new Error("Failed to list backups: "+d.statusText);return(await d.json()).files||[]}async function ya(n){const a=Y(O).accessToken;if(!a)throw new Error("Not signed in");const s=JSON.stringify(n),d="weird-wizard-backup.json",r=await Ht(),w=r.length>0?r[0].id:null;if(w){const c=`https://www.googleapis.com/upload/drive/v3/files/${w}?uploadType=media`,h=await fetch(c,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:s});if(!h.ok){const v=await h.text();throw console.error("Upload error details:",v),new Error("Upload failed: "+h.statusText)}return await h.json()}else{const c={name:d,mimeType:"application/json",parents:["appDataFolder"]},h=new FormData;h.append("metadata",new Blob([JSON.stringify(c)],{type:"application/json"})),h.append("file",new Blob([s],{type:"application/json"}));const m=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:h});if(!m.ok){const P=await m.text();throw console.error("Upload error details:",P),new Error("Upload failed: "+m.statusText)}return await m.json()}}async function ka(n){const a=Y(O).accessToken;if(!a)throw new Error("Not signed in");const s=`https://www.googleapis.com/drive/v3/files/${n}?alt=media`,d=await fetch(s,{headers:{Authorization:`Bearer ${a}`}});if(!d.ok)throw new Error("Download failed: "+d.statusText);return await d.json()}let st;async function Ca(){if(Y(O).accessToken)try{console.log("Syncing from cloud...");const a=await Ht();if(a.length===0){console.log("No backups found in cloud.");return}const s=a[0].id,d=await ka(s);if(d.characters&&Array.isArray(d.characters))for(const r of d.characters)xe.get(r.id)||(xe.set(r.id,r),console.log("Added character from cloud:",r.name));if(d.campaigns&&Array.isArray(d.campaigns))for(const r of d.campaigns)_e.get(r.id)||(_e.set(r.id,r),console.log("Added campaign from cloud:",r.name));console.log("Sync from cloud complete.")}catch(a){console.error("Failed to sync from cloud:",a)}}async function Sa(){Y(O).accessToken&&(st&&clearTimeout(st),st=setTimeout(async()=>{try{console.log("Syncing to cloud...");const a={characters:Y(Mt),campaigns:Y(nt),timestamp:Date.now(),version:1,appName:"WeirdWizardVault"};await ya(a),console.log("Sync to cloud complete.")}catch(a){console.error("Failed to sync to cloud:",a)}},2e3))}var za=k('<img alt="Avatar" class="w-10 h-10 rounded-full border-2 border-indigo-500/50 shadow-lg object-cover"/>'),Na=k('<div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white border-2 border-indigo-400/30 shadow-lg"><span class="font-bold text-lg"><!></span></div>'),Pa=k('<div class="absolute right-0 top-full mt-2 w-48 bg-slate-800 rounded-xl shadow-xl border border-slate-700 p-2 z-50 animate-in fade-in slide-in-from-top-2"><div class="px-3 py-2 border-b border-slate-700 mb-2"><p class="text-xs text-slate-400">Conectado como</p> <p class="text-sm font-bold text-white truncate"> </p></div> <button class="w-full flex items-center gap-2 px-3 py-2 text-slate-300 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm"><!> Sair</button></div>  <div class="fixed inset-0 z-40"></div>',1),Ta=k('<div class="relative"><button><!> <div class="absolute bottom-1 right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-slate-900"></div></button> <!></div>'),$a=k('<div class="w-4 h-4 rounded-full border-2 border-slate-300 border-t-slate-600 animate-spin"></div>'),Ia=Yt('<svg class="w-4 h-4" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>'),ja=k("<button><!> <span>Entrar</span></button>");function Ea(n,a){je(a,!0);const s=()=>Te(O,"$googleSession",d),[d,r]=Ot();let w=Ie(a,"className",3,""),c=A(!1);var h=Le(),v=ne(h);{var m=C=>{var S=Ta(),T=e(S);T.__click=()=>u(c,!i(c));var M=e(T);{var U=N=>{var I=za();X(()=>xt(I,"src",s().userProfile.picture)),g(N,I)},z=N=>{var I=Na(),F=e(I),W=e(F);{var D=x=>{var G=Qt();X(te=>B(G,te),[()=>s().userProfile.name[0].toUpperCase()]),g(x,G)},Q=x=>{lt(x,{size:20})};K(W,x=>{s().userProfile?.name?x(D):x(Q,!1)})}t(F),t(I),g(N,I)};K(M,N=>{s().userProfile?.picture?N(U):N(z,!1)})}b(2),t(T);var E=o(T,2);{var ue=N=>{var I=Pa(),F=ne(I),W=e(F),D=o(e(W),2),Q=e(D,!0);t(D),t(W);var x=o(W,2);x.__click=()=>{wa(),u(c,!1)};var G=e(x);na(G,{size:14}),b(),t(x),t(F);var te=o(F,2);te.__click=()=>u(c,!1),X(()=>B(Q,s().userProfile?.name??"Usuário")),g(N,I)};K(E,N=>{i(c)&&N(ue)})}t(S),X(()=>{be(T,1,`flex items-center gap-2 p-1 rounded-full hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-700 ${w()??""}`),xt(T,"title",s().userProfile?.name||"Conta Google")}),g(C,S)},P=C=>{var S=ja();S.__click=function(...z){_a?.apply(this,z)};var T=e(S);{var M=z=>{var E=$a();g(z,E)},U=z=>{var E=Ia();g(z,E)};K(T,z=>{s().isInited?z(U,!1):z(M)})}b(2),t(S),X(()=>{S.disabled=!s().isInited,be(S,1,`flex items-center gap-2 px-4 py-2 bg-white text-slate-900 hover:bg-slate-100 rounded-full font-bold text-xs transition-all shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-wait disabled:scale-100 disabled:shadow-none ${w()??""}`)}),g(C,S)};K(v,C=>{s().signedIn?C(m):C(P,!1)})}g(n,h),Ee(),r()}Ae(["click"]);var Aa=k('<span class="text-[10px] text-slate-400 font-medium"> </span>'),Oa=k('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all relative group flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="flex justify-between items-start mb-4"><div class="flex-1"><h3 class="font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate pr-16"> </h3> <div class="flex items-center gap-2 mt-1 flex-wrap"><span class="text-[10px] bg-indigo-500/10 text-indigo-400 font-black px-2 py-0.5 rounded uppercase tracking-wider"> </span> <span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest"> </span> <!></div></div> <div class="flex items-center gap-1"><button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100" title="Configurações"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100" title="Excluir"><!></button></div></div> <div class="space-y-3 mb-6"><div class="flex items-center justify-between text-xs text-slate-400"><span class="flex items-center gap-1.5 opacity-60"><!> Trilhas</span> <span class="font-bold text-slate-300 truncate max-w-[150px]"> </span></div></div> <button class="w-full bg-slate-800 hover:bg-indigo-600 text-white py-3 rounded-2xl font-bold transition-all active:scale-[0.98] border border-slate-700 hover:border-indigo-400/30 flex items-center justify-center gap-2">Abrir Ficha <!></button></div>'),Ma=k('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 absolute inset-0"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold">Novo Personagem</span></button></div>'),Fa=k('<span class="text-[9px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded-full border border-emerald-500/20 font-black uppercase tracking-widest flex items-center gap-1"><!> Publicada</span>'),Ga=k('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-indigo-500/40 transition-all group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10 border-t-white/5"><div class="mb-4"><div class="flex justify-between items-start mb-1"><h3 class="font-black text-2xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight"> </h3> <div class="flex items-center gap-1"><!> <button class="text-slate-700 hover:text-indigo-400 p-2 rounded-xl hover:bg-indigo-400/5 transition-all opacity-40 group-hover:opacity-100" title="Editar"><!></button> <button class="text-slate-700 hover:text-red-400 p-2 rounded-xl hover:bg-red-400/5 transition-all opacity-40 group-hover:opacity-100" title="Excluir"><!></button></div></div> <p class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.2em] mb-3"> </p> <p class="text-sm text-slate-400 line-clamp-2 leading-relaxed h-10"> </p></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-2xl font-bold flex items-center justify-center gap-2 border border-indigo-400/20 shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98]"><!> Iniciar Sessão</button></div>'),Ha=k('<div class="bg-slate-900 border border-slate-800 rounded-3xl p-6 hover:border-emerald-500/40 transition-all group relative flex flex-col justify-between shadow-xl border-t-white/5"><div><h3 class="font-black text-2xl text-white group-hover:text-emerald-400 mb-2 uppercase tracking-tight"> </h3> <div class="flex items-center gap-2 mb-4"><div class="px-2 py-0.5 bg-slate-800 rounded text-[9px] text-slate-400 font-black uppercase tracking-widest"> </div> <div class="flex items-center gap-1 px-2 py-0.5 bg-emerald-500/10 rounded text-[9px] text-emerald-400 font-black uppercase tracking-wider"><div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></div> Online</div></div> <p class="text-sm text-slate-400 line-clamp-3 leading-relaxed mb-6 h-15"> </p></div> <button class="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-3 rounded-2xl font-black uppercase text-xs tracking-[0.1em] flex items-center justify-center gap-2 border border-emerald-400/20 transition-all active:scale-[0.98] group">Participar da Aventura <!></button></div>'),Ba=k('<div class="col-span-full py-12 flex flex-col items-center text-center opacity-40"><div class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center text-slate-600 mb-3 border border-slate-700 border-dashed"><!></div> <h3 class="text-lg font-black uppercase tracking-widest text-slate-500">Nenhuma Campanha Online</h3> <p class="text-slate-600 max-w-sm mt-2 text-sm">Os Mestres precisam publicar suas sessões para aparecerem aqui.</p></div>'),Ua=k('<div class="space-y-8 absolute inset-0"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <button class="h-full min-h-[160px] border-2 border-dashed border-slate-800 rounded-3xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-500 transition-all hover:bg-indigo-500/5 gap-2 group shadow-sm bg-slate-900/20"><div class="w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center group-hover:bg-indigo-500/10 group-hover:scale-110 transition-all"><!></div> <span class="font-bold">Nova Campanha</span></button></div> <div><div class="flex items-center gap-3 mb-4"><div class="h-px flex-1 bg-slate-800"></div> <h3 class="text-xs font-black uppercase tracking-widest text-emerald-400 flex items-center gap-2"><!> Campanhas Públicas</h3> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!></div></div></div>'),qa=k('<div class="animate-in fade-in px-4 md:px-8 max-w-7xl mx-auto pb-32 md:pb-20"><header class="mb-8 flex justify-between items-center border-b border-slate-800/50 pt-4 md:pt-8 pb-4 sticky top-0 bg-slate-950/80 backdrop-blur-md z-40 -mx-4 px-4 md:-mx-8 md:px-8 transition-all"><div class="flex items-center"><h1 class="text-xl md:text-3xl font-bold text-white flex items-center gap-2 text-gradient m-0 leading-none"><!> <span class="hidden md:inline">Schwalb Vault</span> <span class="md:hidden">Schwalb Vault</span></h1></div> <div class="hidden md:flex absolute left-1/2 -translate-x-1/2 bg-slate-900/50 p-1.5 rounded-2xl border border-slate-800 glass shadow-xl backdrop-blur-md"><div class="relative flex"><div class="absolute inset-y-0 w-1/2 bg-indigo-600 rounded-xl transition-transform duration-300 ease-out shadow-lg shadow-indigo-500/20"></div> <button><!> Personagens</button> <button><!> Campanhas</button></div></div> <div class="flex items-center justify-end min-w-[40px]"><!></div></header> <div class="md:hidden fixed bottom-6 left-4 right-4 bg-slate-900/90 backdrop-blur-xl border border-slate-700/50 shadow-2xl rounded-2xl p-1.5 z-50"><div class="relative flex justify-between"><div class="absolute inset-y-0 w-1/2 bg-indigo-600/20 rounded-xl transition-transform duration-300 ease-out"></div> <button><!> <span class="transition-all duration-300">Personagens</span></button> <button><!> <span class="transition-all duration-300">Campanhas</span></button></div></div> <div class="min-h-[500px] relative"><!></div> <!> <!> <!> <!></div>');function Va(n,a){je(a,!0);const s=()=>Te(O,"$googleSession",c),d=()=>Te(Mt,"$liveCharacters",c),r=()=>Te(nt,"$liveCampaigns",c),w=()=>Te(oa,"$publicCampaigns",c),[c,h]=Ot();it(()=>{xa()});let v=A("characters"),m=A("characters");$e(()=>{i(v)!==i(m)&&u(m,i(v),!0)}),$e(()=>{s().signedIn&&Ca()}),$e(()=>{s().signedIn&&(d(),r(),Sa())});let P=A(!1),C=A(null);function S(l){u(C,l,!0),u(P,!0)}function T(l){if(!i(C))return;const f=i(C).id,$={...xe.get(f),...l};xe.set(f,$),u(P,!1)}let M=A(!1),U=A("{}");const z={name:"",playerName:"",ancestry:"Humano",novicePath:"",level:0,defense:8,health:5};function E(){u(U,JSON.stringify(z),!0),u(M,!0)}async function ue(l){const f=wt(),p={id:f,name:l.name,playerName:l.playerName||"",ancestry:l.ancestry,level:l.level,defense:l.defense,paths:{novice:l.novicePath||"-",expert:"-",master:"-"},attributes:[{name:"Força",value:10,key:"str"},{name:"Agilidade",value:10,key:"agi"},{name:"Intelecto",value:10,key:"int"},{name:"Vontade",value:10,key:"wil"}],speed:5,health:l.health,currentHealth:l.health,spells:[],talents:[],equipment:[],afflictions:[],effects:[],currency:{gp:0,sp:0,cp:0},languages:["Comum"]};xe.set(f,p),u(M,!1),Ve(Je("/characters/[id]",{id:f}))}let N=A(!1),I=A(null),F=A("{}");const W={name:"",description:"",gmName:""};function D(l=null){u(I,l?l.id:null,!0),u(F,JSON.stringify(l||W),!0),u(N,!0)}async function Q(l){const f=i(I)||wt(),p=i(I)?_e.get(f):{},$={...p,id:f,name:l.name,description:l.description,gmName:l.gmName,players:p.players||[],backupEnabled:l.backupEnabled||!1,backupHash:l.backupHash||""};l.removePassword?delete $.passwordHash:l.password&&($.passwordHash=await la(l.password)),_e.set(f,$),u(N,!1)}let x=A(!1),G=A($t({title:"",message:"",onConfirm:()=>{}}));function te(l){u(G,{title:"Excluir Campanha",message:"Tem certeza que deseja apagar esta campanha permanentemente?",onConfirm:()=>{_e.delete(l),u(x,!1)}},!0),u(x,!0)}function Oe(l){u(G,{title:"Excluir Personagem",message:"Tem certeza que deseja apagar este personagem permanentemente?",onConfirm:()=>{Y(nt).forEach(p=>{let $=!1;p.members&&p.members.some(j=>j.id===l)&&(p.members=p.members.filter(j=>j.id!==l),$=!0),p.sessionRoster&&p.sessionRoster.includes(l)&&(p.sessionRoster=p.sessionRoster.filter(j=>j!==l),$=!0),p.activeEnemies&&p.activeEnemies.some(j=>j.id===l)&&(p.activeEnemies=p.activeEnemies.filter(j=>j.id!==l),$=!0),$&&_e.set(p.id,p)}),xe.delete(l),u(x,!1)}},!0),u(x,!0)}it(()=>{});var ve=qa(),we=e(ve),y=e(we),dt=e(y),Bt=e(dt);ta(Bt,{class:"text-indigo-500",size:28}),b(4),t(dt),t(y);var Xe=o(y,2),ct=e(Xe),ut=e(ct),ye=o(ut,2);ye.__click=()=>u(v,"characters");var Ut=e(ye);Ct(Ut,{size:18}),b(),t(ye);var Me=o(ye,2);Me.__click=()=>u(v,"campaigns");var qt=e(Me);rt(qt,{size:18}),b(),t(Me),t(ct),t(Xe);var vt=o(Xe,2),Vt=e(vt);Ea(Vt,{}),t(vt),t(we);var Ke=o(we,2),pt=e(Ke),gt=e(pt),ke=o(gt,2);ke.__click=()=>u(v,"characters");var Jt=e(ke);{let l=bt(()=>i(v)==="characters"?2.5:2);Ct(Jt,{size:20,get strokeWidth(){return i(l)},class:"transition-all duration-300"})}b(2),t(ke);var Fe=o(ke,2);Fe.__click=()=>u(v,"campaigns");var Wt=e(Fe);{let l=bt(()=>i(v)==="campaigns"?2.5:2);rt(Wt,{size:20,get strokeWidth(){return i(l)},class:"transition-all duration-300"})}b(2),t(Fe),t(pt),t(Ke);var Ye=o(Ke,2),Dt=e(Ye);{var Rt=l=>{var f=Ma(),p=e(f);at(p,1,d,Ce=>Ce.id,(Ce,q)=>{var le=Oa(),pe=e(le),Se=e(pe),ge=e(Se),He=e(ge,!0);t(ge);var Be=o(ge,2),ze=e(Be),H=e(ze,!0);t(ze);var _=o(ze,2),V=e(_);t(_);var J=o(_,2);{var Z=ce=>{var Ne=Aa(),Pe=e(Ne);t(Ne),X(()=>B(Pe,`• ${i(q).playerName??""}`)),g(ce,Ne)};K(J,ce=>{i(q).playerName&&ce(Z)})}t(Be),t(Se);var ae=o(Se,2),R=e(ae);R.__click=()=>S(i(q));var de=e(R);sa(de,{size:16}),t(R);var oe=o(R,2);oe.__click=()=>Oe(i(q).id);var fe=e(oe);St(fe,{size:16}),t(oe),t(ae),t(pe);var L=o(pe,2),re=e(L),ee=e(re),Qe=e(ee);rt(Qe,{size:12}),b(),t(ee);var me=o(ee,2),Ze=e(me,!0);t(me),t(re),t(L);var he=o(L,2);he.__click=()=>Ve(Je("/characters/[id]",{id:i(q).id}));var et=o(e(he));yt(et,{size:14,fill:"currentColor"}),t(he),t(le),X(()=>{B(He,i(q).name),B(H,i(q).ancestry||"Humano"),B(V,`Nível ${i(q).level??""}`),B(Ze,i(q).paths?.novice||"-")}),g(Ce,le)});var $=o(p,2);$.__click=()=>E();var j=e($),Ge=e(j);ot(Ge,{size:32}),t(j),b(2),t($),t(f),Ue(1,f,()=>qe,()=>({x:-100,duration:300,easing:We})),Ue(2,f,()=>qe,()=>({x:-100,duration:300,easing:We})),g(l,f)},Lt=l=>{var f=Ua(),p=e(f),$=e(p);at($,1,r,H=>H.id,(H,_)=>{var V=Ga(),J=e(V),Z=e(J),ae=e(Z),R=e(ae,!0);t(ae);var de=o(ae,2),oe=e(de);{var fe=Pe=>{var tt=Fa(),Kt=e(tt);kt(Kt,{size:10}),b(),t(tt),g(Pe,tt)};K(oe,Pe=>{i(_).isPublished&&Pe(fe)})}var L=o(oe,2);L.__click=()=>D(i(_));var re=e(L);ia(re,{size:16}),t(L);var ee=o(L,2);ee.__click=()=>te(i(_).id);var Qe=e(ee);St(Qe,{size:16}),t(ee),t(de),t(Z);var me=o(Z,2),Ze=e(me,!0);t(me);var he=o(me,2),et=e(he,!0);t(he),t(J);var ce=o(J,2);ce.__click=()=>Ve(Je("/campaigns/[id]",{id:i(_).id}));var Ne=e(ce);yt(Ne,{size:18,fill:"currentColor"}),b(),t(ce),t(V),X(()=>{B(R,i(_).name),B(Ze,i(_).gmName||"Mestre"),B(et,i(_).description||"Uma jornada sem descrição ainda.")}),g(H,V)});var j=o($,2);j.__click=()=>D();var Ge=e(j),Ce=e(Ge);ot(Ce,{size:32}),t(Ge),b(2),t(j),t(p);var q=o(p,2),le=e(q),pe=o(e(le),2),Se=e(pe);kt(Se,{size:14}),b(),t(pe),b(2),t(le);var ge=o(le,2),He=e(ge);at(He,1,w,H=>H.id,(H,_)=>{var V=Ha(),J=e(V),Z=e(J),ae=e(Z,!0);t(Z);var R=o(Z,2),de=e(R),oe=e(de,!0);t(de),b(2),t(R);var fe=o(R,2),L=e(fe,!0);t(fe),t(J);var re=o(J,2);re.__click=()=>Ve(Je("/campaigns/[id]/invite",{id:i(_).id}));var ee=o(e(re));ot(ee,{size:18,class:"group-hover:rotate-90 transition-transform"}),t(re),t(V),X(()=>{B(ae,i(_).name),B(oe,i(_).gmName||"Mestre"),B(L,i(_).description||"Uma jornada por terras desconhecidas aguarada heróis.")}),g(H,V)});var Be=o(He,2);{var ze=H=>{var _=Ba(),V=e(_),J=e(V);ra(J,{size:32}),t(V),b(4),t(_),g(H,_)};K(Be,H=>{w().length===0&&H(ze)})}t(ge),t(q),t(f),Ue(1,f,()=>qe,()=>({x:100,duration:300,easing:We})),Ue(2,f,()=>qe,()=>({x:100,duration:300,easing:We})),g(l,f)};K(Dt,l=>{i(v)==="characters"?l(Rt):l(Lt,!1)})}t(Ye);var ft=o(Ye,2);pa(ft,{get isOpen(){return i(M)},get initialData(){return i(U)},onClose:()=>u(M,!1),onSave:ue});var mt=o(ft,2);aa(mt,{get isOpen(){return i(N)},get initialData(){return i(F)},onClose:()=>u(N,!1),onSave:Q});var ht=o(mt,2);ea(ht,{get isOpen(){return i(x)},get title(){return i(G).title},get message(){return i(G).message},get onConfirm(){return i(G).onConfirm},onCancel:()=>u(x,!1)});var Xt=o(ht,2);fa(Xt,{get isOpen(){return i(P)},get characterData(){return i(C)},onClose:()=>u(P,!1),onSave:T}),t(ve),X(()=>{_t(ut,`transform: translateX(${i(v)==="campaigns"?"100%":"0%"})`),be(ye,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${i(v)==="characters"?"text-white":"text-slate-400 hover:text-white"}`),be(Me,1,`relative z-10 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${i(v)==="campaigns"?"text-white":"text-slate-400 hover:text-white"}`),_t(gt,`transform: translateX(${i(v)==="campaigns"?"100%":"0%"})`),be(ke,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${i(v)==="characters"?"text-indigo-400":"text-slate-500"}`),be(Fe,1,`relative flex-1 py-3 rounded-xl text-xs font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 z-10 ${i(v)==="campaigns"?"text-indigo-400":"text-slate-500"}`)}),g(n,ve),Ee(),h()}Ae(["click"]);var Ja=k("<!> <!>",1);function lo(n){var a=Ja(),s=ne(a);ua(s,{});var d=o(s,2);Va(d,{}),g(n,a)}export{lo as component};

import"../chunks/DsnmJJEf.js";import{d as bt,s as k,g as Ht,q as Ra}from"../chunks/CqLQNChA.js";import{d as ie,e as F,a as i,p as dt,k as vt,f as l,l as t,w as e,s as r,j as a,H as ut,t as O,n as ve,o as Ae,G as Pt,I as Jt,V as oa,z as aa,an as Xt,ak as _a,u as ma}from"../chunks/BkhWOpPj.js";import{l as tt,s as at,p as ha,i as h}from"../chunks/DbalZYyT.js";import{a as de,s as xt,b as qa}from"../chunks/CPHStP6i.js";import{c as je,k as $e,i as La,q as na,u as Fa,v as Ga,x as Wt,y as da,z as Va,B as Ba,l as Wa,C as Ye,I as Nt,b as ke,D as Qt,E as Yt,F as Qa,G as va,M as Ya,H as Ka,J as Ma,K as Na,L as Tt,A as wa,N as Xa,O as ca,P as Ja,Q as jt,d as ia,m as $a,w as Za,R as er,a as tr,o as ar}from"../chunks/DpieVsxQ.js";import{p as rr}from"../chunks/DzkggBSF.js";import{g as Da}from"../chunks/hqda9HG3.js";import{U as ya,W as sr,r as Ea}from"../chunks/Byzf0FCw.js";import{s as me,f as or,r as Pe,e as Ie,i as Oe,d as Ce,h as Vt}from"../chunks/Am2pCLS3.js";import{b as ir}from"../chunks/CjcyXWTt.js";import{L as ka,U as lr}from"../chunks/CLg5UOL_.js";import{c as Ta,C as nr,L as dr,A as vr,D as cr,I as pr,s as ur,d as br,b as xr,S as Zt,M as ra,G as fr,H as gr}from"../chunks/CudhgMy-.js";import{W as _r}from"../chunks/WtC1WHX6.js";import"../chunks/D9IBKMOw.js";import{I as rt,s as st}from"../chunks/CUvy-rMn.js";import{a as mr,M as hr,T as Bt,P as ht,b as ta,S as wr,X as xa}from"../chunks/f4sK7lT0.js";import{C as Aa}from"../chunks/DLp-uDZ5.js";import{i as Ct}from"../chunks/DOB7oA_c.js";import{c as la}from"../chunks/D3bkbLly.js";import{t as pa,a as Pa,s as $r}from"../chunks/p8T5NLcP.js";function sa(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];rt(M,at({name:"activity"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function yr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];rt(M,at({name:"arrow-left"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function ua(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"}],["path",{d:"M8 10h8"}],["path",{d:"M8 18h8"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"}]];rt(M,at({name:"backpack"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function kr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["circle",{cx:"11",cy:"13",r:"9"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"}],["path",{d:"m22 2-1.5 1.5"}]];rt(M,at({name:"bomb"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function za(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];rt(M,at({name:"book"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function fa(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M16.17 7.83 2 22"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12"}],["path",{d:"m7.83 7.83 8.34 8.34"}]];rt(M,at({name:"clover"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Ar(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]];rt(M,at({name:"coins"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function zr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];rt(M,at({name:"ellipsis"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Sr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21"}],["path",{d:"m5.082 11.09 8.828 8.828"}]];rt(M,at({name:"eraser"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Mr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z"}]];rt(M,at({name:"fast-forward"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Sa(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];rt(M,at({name:"file-text"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Nr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8"}]];rt(M,at({name:"infinity"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Dr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];rt(M,at({name:"languages"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Er(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];rt(M,at({name:"moon"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Tr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M12 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 12 18z"}],["path",{d:"M22 6a2 2 0 0 0-3.414-1.414l-6 6a2 2 0 0 0 0 2.828l6 6A2 2 0 0 0 22 18z"}]];rt(M,at({name:"rewind"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Pr(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2"}],["path",{d:"m14.305 16.53.923-.382"}],["path",{d:"m15.228 13.852-.923-.383"}],["path",{d:"m16.852 12.228-.383-.923"}],["path",{d:"m16.852 17.772-.383.924"}],["path",{d:"m19.148 12.228.383-.923"}],["path",{d:"m19.53 18.696-.382-.924"}],["path",{d:"m20.772 13.852.924-.383"}],["path",{d:"m20.772 16.148.924.383"}],["circle",{cx:"18",cy:"15",r:"3"}],["circle",{cx:"9",cy:"7",r:"4"}]];rt(M,at({name:"user-cog"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function ea(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];rt(M,at({name:"wand-sparkles"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}function Dt(M,x){const s=tt(x,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];rt(M,at({name:"zap"},()=>s,{get iconNode(){return f},children:(y,S)=>{var n=ie(),m=F(n);st(m,x,"default",{}),i(y,n)},$$slots:{default:!0}}))}const Cr=!1,zi=Object.freeze(Object.defineProperty({__proto__:null,prerender:Cr},Symbol.toStringTag,{value:"Module"}));var Ir=l('<div class="text-[9px] font-black text-amber-500 uppercase tracking-tighter mt-1 animate-pulse">Aguardando Aprovação</div>'),Or=l('<div class="text-[10px] text-slate-400 mt-0.5 font-medium flex items-center gap-1"><span class="opacity-50 font-bold uppercase tracking-tighter">Mestre:</span> <span class="text-indigo-300"> </span></div>'),jr=l('<div><div class="flex items-center gap-3"><div class="relative"><div><!></div> <div></div></div> <div><div>Campanha Ativa</div> <div class="font-bold text-white text-base leading-tight"> </div> <!></div></div> <button class="bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-slate-500 hover:text-red-400 transition-all active:scale-95" title="Sair"><!></button></div>'),Hr=l("<div><div></div> <span> </span></div>"),Ur=l('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><div><!></div> <h3 class="text-[11px] font-black text-slate-400 uppercase tracking-[0.15em]">Campanha Ativa</h3></div> <button class="p-2 text-slate-600 hover:text-red-400 hover:bg-red-400/5 rounded-lg transition-all opacity-0 group-hover:opacity-100" title="Abandonar Campanha"><!></button></div> <div class="space-y-1"><div class="font-bold text-white text-lg tracking-tight leading-tight"> </div> <div class="text-[10px] font-medium text-slate-500 flex items-center gap-1.5 pt-0.5"><span class="uppercase tracking-tighter opacity-70">Mestre:</span> <span class="text-indigo-400 font-bold"> </span></div></div> <div class="flex items-center justify-between pt-3 border-t border-white/5"><div class="flex items-center gap-2"><div></div> <span> </span></div> <div class="flex items-center gap-1 text-[10px] text-slate-600 font-mono"><!> </div></div></div>');function ba(M,x){dt(x,!0);const s=()=>de(je,"$character",y),f=()=>de(La,"$isGmOnline",y),[y,S]=xt();let n=ha(x,"compact",3,!1),m=ha(x,"banner",3,!1);var T=ie(),Q=F(T);{var o=g=>{const z=ut(()=>s().campaignApproval==="pending");var N=ie(),G=F(N);{var I=R=>{var c=jr(),j=t(c),_=t(j),p=t(_),d=t(p);ya(d,{size:20}),e(p);var u=r(p,2);e(_);var b=r(_,2),P=t(b),q=r(P,2),v=t(q,!0);e(q);var $=r(q,2);{var C=B=>{var ce=Ir();i(B,ce)},V=B=>{var ce=Or(),K=r(t(ce),2),J=t(K,!0);e(K),e(ce),O(()=>k(J,s().gmName)),i(B,ce)};h($,B=>{a(z)?B(C):B(V,!1)})}e(b),e(j);var U=r(j,2);U.__click=()=>{confirm("Sair da campanha?")&&$e.leaveCampaign()};var A=t(U);ka(A,{size:18}),e(U),e(c),O(()=>{me(c,1,`bg-indigo-600/10 backdrop-blur-md border border-indigo-500/20 rounded-2xl p-4 flex items-center justify-between shadow-xl shadow-indigo-950/20 ${a(z)?"border-amber-500/30 bg-amber-500/5":""}`),me(p,1,`w-10 h-10 ${a(z)?"bg-amber-600/20 text-amber-400 border-amber-500/30":"bg-indigo-600/20 text-indigo-400 border-indigo-500/30"} rounded-xl flex items-center justify-center`),me(u,1,`absolute -top-1 -right-1 w-3 h-3 ${a(z)?"bg-amber-500 animate-pulse":f()?"bg-green-500 animate-pulse":"bg-slate-600"} rounded-full border-2 border-slate-950 shadow-[0_0_8px_rgba(34,197,94,0.6)]`),me(P,1,`text-[10px] ${a(z)?"text-amber-500/70":"text-indigo-400/70"} font-black uppercase tracking-[0.2em] leading-none mb-1`),k(v,s().campaignName)}),i(R,c)},D=R=>{var c=ie(),j=F(c);{var _=d=>{var u=Hr(),b=t(u),P=r(b,2),q=t(P,!0);e(P),e(u),O(()=>{me(u,1,`inline-flex items-center gap-2 px-3 py-1 ${a(z)?"bg-amber-500/10 border-amber-500/20":"bg-indigo-500/10 border-indigo-500/20"} rounded-full shadow-sm glass`),me(b,1,`w-1.5 h-1.5 rounded-full ${a(z)?"bg-amber-500 animate-pulse":f()?"bg-green-500 animate-pulse":"bg-slate-600"} shadow-[0_0_8px_rgba(34,197,94,0.4)]`),me(P,1,`text-[9px] font-black ${a(z)?"text-amber-500":"text-indigo-400"} uppercase tracking-widest truncate max-w-[150px]`),k(q,s().campaignName)}),i(d,u)},p=d=>{var u=Ur(),b=t(u),P=t(b),q=t(P),v=t(q);ya(v,{size:16}),e(q),ve(2),e(P);var $=r(P,2);$.__click=function(...ee){$e.leaveCampaign?.apply(this,ee)};var C=t($);ka(C,{size:14}),e($),e(b);var V=r(b,2),U=t(V),A=t(U,!0);e(U);var B=r(U,2),ce=r(t(B),2),K=t(ce,!0);e(ce),e(B),e(V);var J=r(V,2),Y=t(J),pe=t(Y),le=r(pe,2),fe=t(le,!0);e(le),e(Y);var W=r(Y,2),ue=t(W);{var Me=ee=>{Ta(ee,{size:10,class:"opacity-40 animate-spin",style:"animation-duration: 3s"})},qe=ee=>{var be=ie(),He=F(be);{var Fe=he=>{sr(he,{size:10,class:"opacity-40"})},ze=he=>{_r(he,{size:10,class:"opacity-40 text-red-500/50"})};h(He,he=>{f()?he(Fe):he(ze,!1)},!0)}i(ee,be)};h(ue,ee=>{a(z)?ee(Me):ee(qe,!1)})}var Ee=r(ue);e(W),e(J),e(u),O(()=>{me(u,1,`bg-slate-900/50 border border-slate-800 rounded-2xl p-5 space-y-4 shadow-lg backdrop-blur-sm group hover:border-indigo-500/30 transition-all duration-300 ${!f()&&!a(z)?"opacity-60 saturate-50":""} ${a(z)?"border-amber-500/20":""}`),me(q,1,`p-1.5 ${a(z)?"bg-amber-500/10 text-amber-500":f()?"bg-indigo-500/10 text-indigo-400":"bg-slate-800 text-slate-500"} rounded-lg`),k(A,s().campaignName),k(K,s().gmName),me(pe,1,`w-1.5 h-1.5 rounded-full ${a(z)?"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.4)] animate-pulse":f()?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.4)] animate-pulse":"bg-slate-700"}`),me(le,1,`text-[11px] font-bold uppercase tracking-wider ${a(z)?"text-amber-500":f()?"text-slate-400":"text-slate-600"}`),k(fe,a(z)?"Pendente de Aprovação":f()?"Online":"Offline"),k(Ee,` ${a(z)?"PENDENTE":f()?"SYNCED":"WAITING"}`)}),i(d,u)};h(j,d=>{n()?d(_):d(p,!1)},!0)}i(R,c)};h(G,R=>{m()?R(I):R(D,!1)})}i(g,N)};h(Q,g=>{s().campaignId&&g(o)})}i(M,T),vt(),S()}bt(["click"]);var Rr=l('<div class="fixed inset-0 z-40"></div> <div class="absolute top-full left-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 overflow-hidden animate-in slide-in-from-top-2 fade-in duration-200"><button class="w-full text-left px-4 py-3 text-xs font-bold text-slate-300 hover:text-white hover:bg-slate-700 flex items-center gap-3 transition-colors border-b border-slate-700/50"><!> Alterar Foto</button> <button class="w-full text-left px-4 py-3 text-xs font-bold text-slate-300 hover:text-white hover:bg-slate-700 flex items-center gap-3 transition-colors"><!> Editar Informações</button></div>',1),qr=l('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),Lr=l('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),Fr=l('<div class="absolute top-0 left-0 w-full h-full z-20 bg-cyan-400/20 pointer-events-none animate-pulse"></div>'),Gr=l('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),Vr=l('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group" aria-label="Voltar para Dashboard" title="Voltar para Dashboard"><!> <!></button> <div class="relative"><button class="flex items-center gap-2 group text-left relative" aria-label="Opções do Personagem"><div class="rounded-lg sm:rounded-full overflow-hidden border border-white/10 shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition-transform w-8 h-8 sm:w-10 sm:h-10"><!></div> <div class="hidden xs:block svelte-fpzs02"><div class="flex items-center gap-2"><h1 class="text-xs sm:text-sm font-bold text-white leading-tight truncate max-w-[80px] sm:max-w-none group-hover:text-indigo-400 transition-colors"> </h1></div> <p class="text-[10px] text-slate-500 font-medium"> </p></div></button> <!></div></div> <button class="flex-1 max-w-md cursor-pointer group px-2 sm:px-0 text-left" aria-label="Estado de Saúde"><div class="flex justify-between text-[10px] sm:text-xs mb-1.5 px-1"><span><!></span> <span class="text-slate-400 font-mono flex items-center gap-1 group-hover:text-white transition-colors"><span> </span><span class="opacity-30">/</span><span class="text-white font-bold"> </span></span></div> <div class="h-3 sm:h-5 w-full bg-slate-950 rounded-full border border-white/5 relative overflow-hidden group-hover:border-white/20 transition-all shadow-inner"><div></div> <!> <!> <!></div></button> <div class="flex items-center gap-1 sm:gap-2"><button class="p-2 text-slate-400 hover:text-indigo-400 hover:bg-indigo-400/10 rounded-full transition-all" title="Descanso"><!></button> <button class="p-2 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative" title="Histórico"><!> <!></button> <button class="hidden sm:flex p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all" title="Configurações"><!></button></div></div></div></header> <input type="file" hidden="" accept="image/*"/> <!>',1);function Br(M,x){dt(x,!0);const s=()=>de(je,"$character",o),f=()=>de(Fa,"$isIncapacitated",o),y=()=>de(Ga,"$isInjured",o),S=()=>de(Wt,"$damage",o),n=()=>de(da,"$effectiveMaxHealth",o),m=()=>de(Va,"$damagePercentage",o),T=()=>de(Ba,"$tempHealth",o),Q=()=>de(Wa,"$rollHistory",o),[o,g]=xt();let z=Pt(!1),N=Pt(!1),G=Pt(""),I=Pt(void 0);function D(w){Ye.update(L=>({...L,type:w,isOpen:!0}))}function R(w){const L=w.target.files;if(L&&L.length>0){const we=L[0],Ne=new FileReader;Ne.onload=()=>{Ae(G,Ne.result,!0),Ae(N,!0),Ae(z,!1)},Ne.readAsDataURL(we)}w.target&&(w.target.value="")}async function c(w){console.log("CharacterHeader: handleCrop started",w);try{const L=await ur(w);console.log("CharacterHeader: Image saved, hash:",L),je.update(we=>({...we,imageUrl:L})),Ae(N,!1)}catch(L){console.error("CharacterHeader: Error in handleCrop:",L),alert(L.message||"Erro ao salvar imagem")}}var j=Vr(),_=F(j),p=t(_),d=t(p),u=t(d),b=t(u);b.__click=()=>Da(Ea("/"));var P=t(b);nr(P,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var q=r(P,2);dr(q,{size:18,class:"hidden sm:block opacity-50"}),e(b);var v=r(b,2),$=t(v);$.__click=()=>Ae(z,!a(z));var C=t($),V=t(C);{let w=ut(()=>s().name.charAt(0));vr(V,{get hash(){return s().imageUrl},get alt(){return s().name},get fallbackText(){return a(w)},size:"custom"})}e(C);var U=r(C,2),A=t(U),B=t(A),ce=t(B,!0);e(B),e(A);var K=r(A,2),J=t(K);e(K),e(U),e($);var Y=r($,2);{var pe=w=>{var L=Rr(),we=F(L);we.__click=()=>Ae(z,!1);var Ne=r(we,2),ye=t(Ne);ye.__click=()=>a(I).click();var Re=t(ye);br(Re,{size:16,class:"text-indigo-400"}),ve(),e(ye);var De=r(ye,2);De.__click=()=>{D("character_info"),Ae(z,!1)};var Be=t(De);Pr(Be,{size:16,class:"text-slate-400"}),ve(),e(De),e(Ne),i(w,L)};h(Y,w=>{a(z)&&w(pe)})}e(v),e(u);var le=r(u,2);le.__click=()=>D("health");var fe=t(le),W=t(fe),ue=t(W);{var Me=w=>{var L=Jt("INCAPACITADO");i(w,L)},qe=w=>{var L=ie(),we=F(L);{var Ne=Re=>{var De=Jt("FERIDO");i(Re,De)},ye=Re=>{var De=ie(),Be=F(De);{var ft=gt=>{},Ke=gt=>{var Qe=Jt("SAUDÁVEL");i(gt,Qe)};h(Be,gt=>{S()>0?gt(ft):gt(Ke,!1)},!0)}i(Re,De)};h(we,Re=>{y()?Re(Ne):Re(ye,!1)},!0)}i(w,L)};h(ue,w=>{f()?w(Me):w(qe,!1)})}e(W);var Ee=r(W,2),ee=t(Ee),be=t(ee,!0);e(ee);var He=r(ee,2),Fe=t(He,!0);e(He),e(Ee),e(fe);var ze=r(fe,2),he=t(ze),Ue=r(he,2);{var Ve=w=>{var L=qr();O(()=>{me(L,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10 ${f()?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":m()>=80?"bg-gradient-to-r from-red-600 to-rose-500":y()?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),or(L,`width: ${m()??""}%`)}),i(w,L)};h(Ue,w=>{m()>0&&w(Ve)})}var Ge=r(Ue,2);{var ge=w=>{var L=Lr();i(w,L)};h(Ge,w=>{S()===0&&w(ge)})}var se=r(Ge,2);{var H=w=>{var L=Fr();i(w,L)};h(se,w=>{T()>0&&w(H)})}e(ze),e(le);var te=r(le,2),X=t(te);X.__click=()=>D("rest_confirm");var xe=t(X);Er(xe,{size:18}),e(X);var oe=r(X,2);oe.__click=()=>na.update(w=>!w);var Se=t(oe);cr(Se,{size:18});var Le=r(Se,2);{var Z=w=>{var L=Gr();i(w,L)};h(Le,w=>{Q().length>0&&w(Z)})}e(oe);var E=r(oe,2);E.__click=()=>D("character_info");var ae=t(E);mr(ae,{size:18}),e(E),e(te),e(d),e(p),e(_);var re=r(_,2);re.__change=R,ir(re,w=>Ae(I,w),()=>a(I));var ne=r(re,2);pr(ne,{get isOpen(){return a(N)},get imageUrl(){return a(G)},onClose:()=>Ae(N,!1),onCrop:c}),O(()=>{k(ce,s().name),k(J,`Nv ${s().level??""}`),me(W,1,`font-black uppercase tracking-wider ${f()?"text-red-500 animate-pulse":y()?"text-amber-500":S()>0?"text-slate-400":"text-emerald-500"}`),me(ee,1,`${S()===0?"text-emerald-400":f()?"text-red-400":y()?"text-amber-400":"text-orange-400"} font-bold group-hover:text-red-300`),k(be,S()),k(Fe,n()),me(he,1,`absolute top-0 left-0 h-full w-full ${S()===0?"bg-emerald-900/20":"bg-slate-900/50"}`)}),i(M,j),vt(),g()}bt(["click","change"]);var Wr=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),Qr=l("<option> </option>"),Yr=l("<option> </option>"),Kr=l('<div class="grid grid-cols-3 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Dano</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Dano (d6)"/></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Traits</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Traits"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Empunhadura</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block col-span-2"><span class="text-[10px] text-slate-500 uppercase font-bold">Alcance</span> <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Range"/></label></div>'),Xr=l('<div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Fixa</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Fixed Def"/></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Def. Mod</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Mod Def"/></label></div>'),Jr=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),Zr=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tipo</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Qtd</span> <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Qtd"/></label></div> <!> <!> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),es=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),ts=l("<option> </option>"),as=l("<option> </option>"),rs=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),ss=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="grid grid-cols-2 gap-2"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tier</span> <select class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs"></select></label> <div class="relative"><label class="block"><span class="text-[10px] text-slate-500 uppercase font-bold">Tradição</span> <input list="traditions" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs" placeholder="Tradição"/></label> <datalist id="traditions"></datalist></div></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><label for="maxCastings" class="text-xs text-slate-400 uppercase">Castings</label> <input id="maxCastings" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),os=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),is=l('<div class="flex items-center gap-2 border-l border-slate-700 pl-2"><label for="maxUses" class="text-xs text-slate-400 uppercase">Max Uses</label> <input id="maxUses" type="number" class="w-16 bg-slate-800 border border-slate-600 rounded p-1 text-white text-center"/></div>'),ls=l('<button class="bg-red-900/50 hover:bg-red-900 text-red-200 p-2 rounded" title="Excluir"><!></button>'),ns=l('<div class="space-y-3"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold mb-1" placeholder="Nome"/></label> <!></div> <div class="flex items-center gap-2 bg-slate-900 p-2 rounded border border-slate-700"><input type="checkbox" id="isPassive" class="w-4 h-4 rounded bg-slate-800 border-slate-600 text-indigo-600 focus:ring-indigo-500"/> <label for="isPassive" class="text-xs text-slate-400 uppercase font-bold flex-1 cursor-pointer">Passivo / Ilimitado</label> <!></div> <div class="bg-slate-900 p-2 rounded border border-slate-700 flex justify-between items-center"><span class="text-xs text-slate-400 font-bold uppercase">Efeito Associado</span> <button> </button></div> <label class="block text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm" placeholder="Descrição"></textarea></label> <div class="flex gap-2"><!> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div></div>'),ds=l('<p class="text-[10px] text-red-500">* Nome obrigatório</p>'),vs=l('<div><label for="effectName" class="text-xs font-bold text-slate-400 uppercase">Nome</label> <input id="effectName" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/> <!></div>'),cs=l('<div class="text-center text-xs text-slate-500 italic mb-2">Nome e Descrição herdados do item pai.</div>'),ps=l("<option> </option>"),us=l('<input type="number" class="bg-slate-900 border border-slate-700 rounded p-2 text-white"/>'),bs=l("<option> </option>"),xs=l('<div class="flex gap-1 items-center"><select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/3"></select> <select class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4"><option>Add (+/-)</option><option>Set (=)</option><option>Mult (x)</option></select> <input type="number" class="bg-slate-900 border border-slate-700 rounded text-[10px] text-white p-1 w-1/4 text-center"/> <button class="text-slate-600 hover:text-red-400 p-1" aria-label="Remover Modificador"><!></button></div>'),fs=l('<div><label class="text-xs font-bold text-slate-400 uppercase">Descrição <textarea class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"></textarea></label></div>'),gs=l('<div class="space-y-4"><!> <div><label for="effectDuration" class="text-xs font-bold text-slate-400 uppercase">Duração</label> <div class="grid grid-cols-2 gap-2"><select id="effectDuration" class="bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"></select> <!></div></div> <div class="bg-slate-950 p-3 rounded border border-slate-800"><div class="flex justify-between items-center mb-2"><span class="text-xs font-bold text-indigo-400 uppercase">Modificadores</span> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600 flex items-center gap-1"><!> Add</button></div> <div class="space-y-2"></div></div> <!> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar Efeito</button></div>'),_s=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),ms=l('<div class="space-y-4"><h3 class="text-white font-bold text-lg uppercase"> </h3> <div><label class="text-xs text-slate-400 uppercase font-bold">Valor Base <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Salvar</button></div>'),hs=l('<div class="space-y-4"><div class="grid grid-cols-2 gap-4"><div><label class="text-xs text-slate-400 uppercase font-bold">Vida Normal <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs text-slate-400 uppercase font-bold">Vida Atual <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div><label class="text-xs text-red-400 uppercase font-bold">Dano <input type="number" class="w-full bg-slate-900 border border-red-900/50 rounded p-2 text-white"/></label></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded">Atualizar</button></div>'),ws=l('<div class="space-y-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nome <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-xs font-bold text-slate-400 uppercase">Nível <input type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div> <div><label class="text-xs font-bold text-slate-400 uppercase">Ancestralidade <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></label></div></div> <div class="pt-2 border-t border-slate-700 space-y-3"><div><label class="text-[10px] font-bold text-slate-400 uppercase">Novice <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Expert <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div> <div><label class="text-[10px] font-bold text-slate-400 uppercase">Master <input class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></label></div></div> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded mt-2">Salvar</button></div>'),$s=l('<div class="mt-4 p-3 bg-green-900/20 border border-green-900/50 rounded-lg"><div class="flex items-center gap-2 mb-1 text-[10px] font-bold text-green-400 uppercase tracking-wider">Efeito Associado</div> <div class="text-xs text-green-200/70"> </div></div>'),ys=l('<button class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> APLICAR EFEITO E USAR</button> <button class="w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-2 rounded-lg text-sm transition-colors">USAR SEM APLICAR EFEITO</button>',1),ks=l('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all active:scale-[0.98]"><!> CONFIRMAR USO</button>'),As=l('<div class="space-y-4"><div class="bg-slate-900 p-4 rounded-lg border border-slate-700"><p class="text-indigo-300 font-bold text-2xl mb-1 text-center"> </p> <p class="text-slate-400 text-sm italic mb-4 text-center"> </p> <!></div> <div class="flex flex-col gap-2 pt-2"><!> <button class="w-full text-slate-500 hover:text-slate-300 text-xs font-bold uppercase tracking-widest py-2 transition-colors mt-2">CANCELAR</button></div></div>'),zs=l('<div class="text-center space-y-6"><div class="flex justify-center"><!></div> <div><p class="text-lg text-white font-bold">Realizar Descanso?</p></div> <div class="flex gap-4 justify-center"><button class="px-6 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold">Cancelar</button><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold">Descansar</button></div></div>'),Ss=l('<div class="space-y-6 text-center"><div class="bg-indigo-900/20 border border-indigo-500/30 p-4 rounded-xl"><h3 class="text-2xl font-bold text-white mb-1"> </h3> <p class="text-xs text-indigo-300 uppercase tracking-widest font-bold"> </p></div> <div class="grid grid-cols-2 gap-4"><button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-indigo-600 border border-slate-700 hover:border-indigo-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Ataque</span></button> <button class="flex flex-col items-center justify-center p-6 bg-slate-900/80 hover:bg-red-600 border border-slate-700 hover:border-red-400 rounded-2xl transition-all group"><div class="p-3 rounded-full bg-slate-800 text-red-500 group-hover:bg-red-500 group-hover:text-white mb-3 shadow-lg"><!></div> <span class="font-black text-white tracking-widest uppercase text-sm">Dano</span></button></div> <button class="text-slate-500 hover:text-slate-300 text-[10px] font-bold uppercase tracking-[0.2em]">Voltar</button></div>'),Ms=l('<span class="text-[10px] text-slate-500 uppercase font-black tracking-widest">Passivo</span>'),Ns=l("<span></span>"),Ds=l('<span class="block text-[10px] text-slate-500 uppercase font-bold text-center">Cargas</span> <p class="flex items-center justify-center gap-1"></p> <span> </span>',1),Es=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-yellow-900/20 hover:border-yellow-600/50 flex items-center justify-between transition-all group disabled:opacity-30 disabled:hover:bg-slate-900/50 disabled:hover:border-slate-700 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform"><!></div> <div><p class="text-white font-bold"> </p> <p class="text-[10px] text-slate-500 italic max-w-xs"> </p></div></div> <div class="text-right shrink-0"><!></div></button>'),Ts=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Nenhum talento disponível.</p></div>'),Ps=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Cs=l("<div></div>"),Is=l('<button class="w-full text-left p-4 bg-slate-900/50 border border-slate-700 rounded-xl hover:bg-indigo-900/20 hover:border-indigo-600 text-indigo-400/0 hover:text-indigo-400 flex items-center justify-between transition-all group disabled:opacity-30 active:scale-[0.99]"><div class="flex items-center gap-4"><div class="p-2.5 rounded-lg bg-slate-800 text-indigo-400 group-hover:scale-110 transition-all border border-transparent group-hover:border-indigo-500/30"><!></div> <div><p class="text-white font-bold group-hover:text-indigo-300 transition-colors"> </p> <p class="text-[10px] text-slate-500 uppercase font-bold tracking-tight"> </p></div></div> <div class="text-right shrink-0"><span class="block text-[10px] text-slate-500 uppercase font-bold text-center mb-1">Casts</span> <div class="flex gap-0.5"></div></div></button>'),Os=l('<div class="text-center py-10 bg-slate-900/30 rounded-xl border border-dashed border-slate-700"><!> <p class="text-slate-500 italic text-sm">Grimório vazio.</p></div>'),js=l('<div class="space-y-3 max-h-[50vh] overflow-y-auto custom-scrollbar pr-1"></div>'),Hs=l("<button> <!></button>"),Us=l('<div class="text-xs"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),Rs=l('<p class="text-xs text-slate-600 italic text-center">Nenhuma aflição selecionada.</p>'),qs=l('<div class="grid grid-cols-2 gap-2"></div> <div class="mt-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700"><p class="text-[10px] text-slate-500 uppercase font-bold mb-2">Resumo dos Efeitos</p> <div class="space-y-2"><!> <!></div></div>',1),Ls=l('<div class="p-6 overflow-y-auto custom-scrollbar"><!></div>'),Fs=l("<!> <!>",1);function Gs(M,x){dt(x,!0);const s=()=>de(Ye,"$modalState",T),f=()=>de(Wt,"$damage",T),y=()=>de(Qt,"$normalHealth",T),S=()=>de(Yt,"$currentHealth",T),n=()=>de(je,"$character",T),m=()=>de(Qa,"$activeEffects",T),[T,Q]=xt();let o=Pt(oa({})),g=Pt(oa({})),z=Pt(oa([]));aa(()=>{if(s().isOpen){const{type:v,data:$}=s();v==="item"&&Ae(o,$?{...$}:{name:"",type:Nt.OTHER,quantity:1,price:0,description:"",availability:"Common",quality:"Standard"},!0),v==="spell"&&Ae(o,$?{...$}:{name:"",tier:"Novice",tradition:"Destruction",type:"Attack",castings:1,maxCastings:1,description:"",effect:null},!0),v==="talent"&&Ae(o,$?{...$}:{name:"",description:"",uses:0,maxUses:0,isPassive:!1,effect:null},!0),v==="attribute"&&Ae(o,{...$},!0),v==="health"&&Ae(o,{d:f(),nh:y(),ch:S()},!0),v==="character_info"&&Ae(o,{name:n().name,level:n().level,ancestry:n().ancestry,novicePath:n().paths.novice,expertPath:n().paths.expert,masterPath:n().paths.master,normalHealth:y(),currentHealth:S()},!0),v==="stat"&&($==="defense"?Ae(o,{key:"naturalDefense",name:"Defesa Natural",value:n().naturalDefense},!0):$==="speed"&&Ae(o,{key:"speed",name:"Velocidade",value:n().speed},!0)),v==="pre_roll"&&Ae(z,m().map(C=>C.id),!0),v==="effect"&&($&&$.parentType?Ae(g,$.parentData.effect||{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0):$?(Ae(g,{...$},!0),Array.isArray(a(g).modifiers)||(a(g).modifiers=[])):Ae(g,{name:"",description:"",isActive:!0,duration:"ROUNDS",roundsLeft:1,initialRounds:1,modifiers:[]},!0))}});function N(){Ye.update(v=>({...v,type:null,isOpen:!1,data:null}))}function G(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};s().data?$e.updateItem(v):$e.addItem(v),N()}function I(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};s().data?$e.updateSpell(v):$e.addSpell(v),N()}function D(){if(!a(o).name?.trim())return alert("Nome é obrigatório");const v={...a(o),id:a(o).id||Date.now()};a(o).isPassive?(v.maxUses=0,v.uses=0):!s().data&&a(o).maxUses>0&&(v.uses=a(o).maxUses),s().data?$e.updateTalent(v):$e.addTalent(v),N()}function R(){const v=a(g);if(!s().data?.parentType&&!v.name?.trim())return alert("Nome do efeito é obrigatório");const $={...v,initialRounds:v.duration==="ROUNDS"?v.roundsLeft:0};if(s().data?.parentType){const C={...s().data.parentData,effect:$};Ye.update(V=>({...V,type:s().data.parentType,data:C}));return}v.id&&n().effects.some(C=>C.id===v.id)?$e.updateEffect($):$e.addEffect({...$,id:Date.now(),isActive:!0}),N()}function c(){je.update(v=>({...v,attributes:v.attributes.map($=>$.key===a(o).key?{...$,value:parseInt(a(o).value)}:$)})),N()}function j(){Wt.set(Math.max(0,parseInt(a(o).d))),Qt.set(Math.max(1,parseInt(a(o).nh))),Yt.set(Math.max(0,parseInt(a(o).ch))),N()}function _(){je.update(v=>({...v,name:a(o).name,level:parseInt(a(o).level)||0,ancestry:a(o).ancestry,paths:{novice:a(o).novicePath,expert:a(o).expertPath,master:a(o).masterPath}})),Qt.set(parseInt(a(o).normalHealth)),Yt.set(parseInt(a(o).currentHealth)),N()}function p(){je.update(v=>({...v,[a(o).key]:parseInt(a(o).value)||0})),N()}function d(){a(g).modifiers=[...a(g).modifiers||[],{target:"str",type:Tt.ADD,value:1}]}function u(v){a(g).modifiers=a(g).modifiers.filter(($,C)=>C!==v)}var b=Fs(),P=F(b);{let v=ut(()=>s().isOpen&&s().type!=="pre_roll"),$=ut(()=>s().type==="item"?"Editor de Item":s().type==="spell"?"Editar Magia":s().type==="talent"?"Editar Talento":s().type==="effect"?"Gerenciar Efeito":s().type==="pre_roll"?"":s().type==="confirm_spell"?"Confirmar Conjuração":s().type==="confirm_talent"?"Confirmar Ativação":s().type==="cast_spell"?"Grimório":s().type==="select_talent"?"Seus Talentos":s().type==="weapon_menu"?"Opções de Ataque":s().type==="character_info"?"Informações do Personagem":s().type==="health"?"Vigor & Dano":s().type==="attribute"?"Atributo":s().type==="stat"?a(o).name:s().type==="affliction"?"Gerenciar Aflições":"Informação");hr(P,{get isOpen(){return a(v)},onClose:N,maxWidth:"max-w-lg",get title(){return a($)},children:(C,V)=>{var U=Ls(),A=t(U);{var B=K=>{var J=Zr(),Y=t(J),pe=t(Y),le=r(t(pe));Pe(le),e(pe);var fe=r(pe,2);{var W=H=>{var te=Wr();i(H,te)};h(fe,H=>{a(o).name||H(W)})}e(Y);var ue=r(Y,2),Me=t(ue),qe=r(t(Me),2);Ie(qe,21,()=>Object.values(Nt),Oe,(H,te)=>{var X=Qr(),xe=t(X,!0);e(X);var oe={};O(()=>{k(xe,a(te)),oe!==(oe=a(te))&&(X.value=(X.__value=a(te))??"")}),i(H,X)}),e(qe),e(Me);var Ee=r(Me,2),ee=r(t(Ee),2);Pe(ee),e(Ee),e(ue);var be=r(ue,2);{var He=H=>{var te=Kr(),X=t(te),xe=r(t(X),2);Pe(xe),e(X);var oe=r(X,2),Se=r(t(oe),2);Pe(Se),e(oe);var Le=r(oe,2),Z=r(t(Le),2);Ie(Z,21,()=>Object.values(va),Oe,(re,ne)=>{var w=Yr(),L=t(w,!0);e(w);var we={};O(()=>{k(L,a(ne)),we!==(we=a(ne))&&(w.value=(w.__value=a(ne))??"")}),i(re,w)}),e(Z),e(Le);var E=r(Le,2),ae=r(t(E),2);Pe(ae),e(E),e(te),ke(xe,()=>a(o).damageDice,re=>a(o).damageDice=re),ke(Se,()=>a(o).traits,re=>a(o).traits=re),Vt(Z,()=>a(o).grip,re=>a(o).grip=re),ke(ae,()=>a(o).range,re=>a(o).range=re),i(H,te)};h(be,H=>{a(o).type===Nt.WEAPON&&H(He)})}var Fe=r(be,2);{var ze=H=>{var te=Xr(),X=t(te),xe=r(t(X),2);Pe(xe),e(X);var oe=r(X,2),Se=r(t(oe),2);Pe(Se),e(oe),e(te),ke(xe,()=>a(o).defenseFixed,Le=>a(o).defenseFixed=Le),ke(Se,()=>a(o).defenseMod,Le=>a(o).defenseMod=Le),i(H,te)};h(Fe,H=>{a(o).type===Nt.ARMOR&&H(ze)})}var he=r(Fe,2),Ue=r(t(he));Xt(Ue),Ce(Ue,"rows",3),e(he);var Ve=r(he,2),Ge=t(Ve);{var ge=H=>{var te=Jr();te.__click=()=>{$e.deleteItem(s().data.id),N()};var X=t(te);Bt(X,{size:18}),e(te),i(H,te)};h(Ge,H=>{s().data&&H(ge)})}var se=r(Ge,2);se.__click=G,e(Ve),e(J),ke(le,()=>a(o).name,H=>a(o).name=H),Vt(qe,()=>a(o).type,H=>a(o).type=H),ke(ee,()=>a(o).quantity,H=>a(o).quantity=H),ke(Ue,()=>a(o).description,H=>a(o).description=H),i(K,J)},ce=K=>{var J=ie(),Y=F(J);{var pe=fe=>{var W=ss(),ue=t(W),Me=t(ue),qe=r(t(Me));Pe(qe),e(Me);var Ee=r(Me,2);{var ee=E=>{var ae=es();i(E,ae)};h(Ee,E=>{a(o).name||E(ee)})}e(ue);var be=r(ue,2),He=t(be),Fe=r(t(He),2);Ie(Fe,20,()=>["Novice","Expert","Master"],Oe,(E,ae)=>{var re=ts(),ne=t(re,!0);e(re);var w={};O(()=>{k(ne,ae),w!==(w=ae)&&(re.value=(re.__value=ae)??"")}),i(E,re)}),e(Fe),e(He);var ze=r(He,2),he=t(ze),Ue=r(t(he),2);Pe(Ue),e(he);var Ve=r(he,2);Ie(Ve,21,()=>Ya,Oe,(E,ae)=>{var re=as(),ne=t(re,!0);e(re);var w={};O(()=>{k(ne,a(ae)),w!==(w=a(ae))&&(re.value=(re.__value=a(ae))??"")}),i(E,re)}),e(Ve),e(ze),e(be);var Ge=r(be,2),ge=r(t(Ge),2);Pe(ge),ge.__input=()=>a(o).castings=a(o).maxCastings,e(Ge);var se=r(Ge,2),H=r(t(se),2);H.__click=()=>Ye.update(E=>({...E,type:"effect",data:{parentType:"spell",parentData:a(o)}}));var te=t(H,!0);e(H),e(se);var X=r(se,2),xe=r(t(X));Xt(xe),Ce(xe,"rows",4),e(X);var oe=r(X,2),Se=t(oe);{var Le=E=>{var ae=rs();ae.__click=()=>{$e.deleteSpell(s().data.id),N()};var re=t(ae);Bt(re,{size:18}),e(ae),i(E,ae)};h(Se,E=>{s().data&&E(Le)})}var Z=r(Se,2);Z.__click=I,e(oe),e(W),O(()=>{me(H,1,`text-[10px] px-2 py-1 rounded border ${a(o).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),k(te,a(o).effect?"Configurado":"Nenhum")}),ke(qe,()=>a(o).name,E=>a(o).name=E),Vt(Fe,()=>a(o).tier,E=>a(o).tier=E),ke(Ue,()=>a(o).tradition,E=>a(o).tradition=E),ke(ge,()=>a(o).maxCastings,E=>a(o).maxCastings=E),ke(xe,()=>a(o).description,E=>a(o).description=E),i(fe,W)},le=fe=>{var W=ie(),ue=F(W);{var Me=Ee=>{var ee=ns(),be=t(ee),He=t(be),Fe=r(t(He));Pe(Fe),e(He);var ze=r(He,2);{var he=E=>{var ae=os();i(E,ae)};h(ze,E=>{a(o).name||E(he)})}e(be);var Ue=r(be,2),Ve=t(Ue);Pe(Ve);var Ge=r(Ve,4);{var ge=E=>{var ae=is(),re=r(t(ae),2);Pe(re),e(ae),ke(re,()=>a(o).maxUses,ne=>a(o).maxUses=ne),i(E,ae)};h(Ge,E=>{a(o).isPassive||E(ge)})}e(Ue);var se=r(Ue,2),H=r(t(se),2);H.__click=()=>Ye.update(E=>({...E,type:"effect",data:{parentType:"talent",parentData:a(o)}}));var te=t(H,!0);e(H),e(se);var X=r(se,2),xe=r(t(X));Xt(xe),Ce(xe,"rows",4),e(X);var oe=r(X,2),Se=t(oe);{var Le=E=>{var ae=ls();ae.__click=()=>{$e.deleteTalent(s().data.id),N()};var re=t(ae);Bt(re,{size:18}),e(ae),i(E,ae)};h(Se,E=>{s().data&&E(Le)})}var Z=r(Se,2);Z.__click=D,e(oe),e(ee),O(()=>{me(H,1,`text-[10px] px-2 py-1 rounded border ${a(o).effect?"bg-indigo-900 border-indigo-500 text-indigo-200":"bg-slate-800 border-slate-600 text-slate-500"}`),k(te,a(o).effect?"Configurado":"Nenhum")}),ke(Fe,()=>a(o).name,E=>a(o).name=E),Ka(Ve,()=>a(o).isPassive,E=>a(o).isPassive=E),ke(xe,()=>a(o).description,E=>a(o).description=E),i(Ee,ee)},qe=Ee=>{var ee=ie(),be=F(ee);{var He=ze=>{var he=gs(),Ue=t(he);{var Ve=ne=>{var w=vs(),L=r(t(w),2);Pe(L);var we=r(L,2);{var Ne=ye=>{var Re=ds();i(ye,Re)};h(we,ye=>{a(g).name||ye(Ne)})}e(w),ke(L,()=>a(g).name,ye=>a(g).name=ye),i(ne,w)},Ge=ne=>{var w=cs();i(ne,w)};h(Ue,ne=>{s().data?.parentType?ne(Ge,!1):ne(Ve)})}var ge=r(Ue,2),se=r(t(ge),2),H=t(se);Ie(H,21,()=>Object.entries(Ma),Oe,(ne,w)=>{var L=ut(()=>_a(a(w),2));let we=()=>a(L)[0],Ne=()=>a(L)[1];var ye=ps(),Re=t(ye,!0);e(ye);var De={};O(()=>{k(Re,Ne()),De!==(De=we())&&(ye.value=(ye.__value=we())??"")}),i(ne,ye)}),e(H);var te=r(H,2);{var X=ne=>{var w=us();Pe(w),ke(w,()=>a(g).roundsLeft,L=>a(g).roundsLeft=L),i(ne,w)};h(te,ne=>{a(g).duration==="ROUNDS"&&ne(X)})}e(se),e(ge);var xe=r(ge,2),oe=t(xe),Se=r(t(oe),2);Se.__click=d;var Le=t(Se);ht(Le,{size:10}),ve(),e(Se),e(oe);var Z=r(oe,2);Ie(Z,21,()=>a(g).modifiers,Oe,(ne,w,L)=>{var we=xs(),Ne=t(we);Ie(Ne,21,()=>Object.entries(Na),Oe,(ot,At)=>{var Je=ut(()=>_a(a(At),2));let it=()=>a(Je)[0],wt=()=>a(Je)[1];var ct=bs(),Xe=t(ct,!0);e(ct);var Te={};O(()=>{k(Xe,wt()),Te!==(Te=it())&&(ct.value=(ct.__value=it())??"")}),i(ot,ct)}),e(Ne);var ye=r(Ne,2),Re=t(ye),De={},Be=r(Re),ft={},Ke=r(Be),gt={};e(ye);var Qe=r(ye,2);Pe(Qe);var _t=r(Qe,2);_t.__click=()=>u(L);var kt=t(_t);Bt(kt,{size:12}),e(_t),e(we),O(()=>{De!==(De=Tt.ADD)&&(Re.value=(Re.__value=Tt.ADD)??""),ft!==(ft=Tt.SET)&&(Be.value=(Be.__value=Tt.SET)??""),gt!==(gt=Tt.MULT)&&(Ke.value=(Ke.__value=Tt.MULT)??""),Ce(Qe,"step",a(w).type===Tt.MULT?"0.1":"1")}),Vt(Ne,()=>a(w).target,ot=>a(w).target=ot),Vt(ye,()=>a(w).type,ot=>a(w).type=ot),ke(Qe,()=>a(w).value,ot=>a(w).value=ot),i(ne,we)}),e(Z),e(xe);var E=r(xe,2);{var ae=ne=>{var w=fs(),L=t(w),we=r(t(L));Xt(we),e(L),e(w),ke(we,()=>a(g).description,Ne=>a(g).description=Ne),i(ne,w)};h(E,ne=>{s().data?.parentType||ne(ae)})}var re=r(E,2);re.__click=R,e(he),Vt(H,()=>a(g).duration,ne=>a(g).duration=ne),i(ze,he)},Fe=ze=>{var he=ie(),Ue=F(he);{var Ve=ge=>{var se=_s(),H=t(se),te=t(H,!0);e(H);var X=r(H,2),xe=t(X),oe=r(t(xe));Pe(oe),e(xe),e(X);var Se=r(X,2);Se.__click=c,e(se),O(()=>k(te,a(o).name)),ke(oe,()=>a(o).value,Le=>a(o).value=Le),i(ge,se)},Ge=ge=>{var se=ie(),H=F(se);{var te=xe=>{var oe=ms(),Se=t(oe),Le=t(Se,!0);e(Se);var Z=r(Se,2),E=t(Z),ae=r(t(E));Pe(ae),e(E),e(Z);var re=r(Z,2);re.__click=p,e(oe),O(()=>k(Le,a(o).name)),ke(ae,()=>a(o).value,ne=>a(o).value=ne),i(xe,oe)},X=xe=>{var oe=ie(),Se=F(oe);{var Le=E=>{var ae=hs(),re=t(ae),ne=t(re),w=t(ne),L=r(t(w));Pe(L),e(w),e(ne);var we=r(ne,2),Ne=t(we),ye=r(t(Ne));Pe(ye),e(Ne),e(we),e(re);var Re=r(re,2),De=t(Re),Be=r(t(De));Pe(Be),e(De),e(Re);var ft=r(Re,2);ft.__click=j,e(ae),ke(L,()=>a(o).nh,Ke=>a(o).nh=Ke),ke(ye,()=>a(o).ch,Ke=>a(o).ch=Ke),ke(Be,()=>a(o).d,Ke=>a(o).d=Ke),i(E,ae)},Z=E=>{var ae=ie(),re=F(ae);{var ne=L=>{var we=ws(),Ne=t(we),ye=t(Ne),Re=r(t(ye));Pe(Re),e(ye),e(Ne);var De=r(Ne,2),Be=t(De),ft=t(Be),Ke=r(t(ft));Pe(Ke),e(ft),e(Be);var gt=r(Be,2),Qe=t(gt),_t=r(t(Qe));Pe(_t),e(Qe),e(gt),e(De);var kt=r(De,2),ot=t(kt),At=t(ot),Je=r(t(At));Pe(Je),e(At),e(ot);var it=r(ot,2),wt=t(it),ct=r(t(wt));Pe(ct),e(wt),e(it);var Xe=r(it,2),Te=t(Xe),We=r(t(Te));Pe(We),e(Te),e(Xe),e(kt);var mt=r(kt,2);mt.__click=_,e(we),ke(Re,()=>a(o).name,_e=>a(o).name=_e),ke(Ke,()=>a(o).level,_e=>a(o).level=_e),ke(_t,()=>a(o).ancestry,_e=>a(o).ancestry=_e),ke(Je,()=>a(o).novicePath,_e=>a(o).novicePath=_e),ke(ct,()=>a(o).expertPath,_e=>a(o).expertPath=_e),ke(We,()=>a(o).masterPath,_e=>a(o).masterPath=_e),i(L,we)},w=L=>{var we=ie(),Ne=F(we);{var ye=De=>{var Be=As(),ft=t(Be),Ke=t(ft),gt=t(Ke,!0);e(Ke);var Qe=r(Ke,2),_t=t(Qe,!0);e(Qe);var kt=r(Qe,2);{var ot=Xe=>{var Te=$s(),We=r(t(Te),2),mt=t(We);e(We),e(Te),O(()=>k(mt,`${s().data.effect.name??""}: ${s().data.effect.description??""}`)),i(Xe,Te)};h(kt,Xe=>{s().data.effect&&Xe(ot)})}e(ft);var At=r(ft,2),Je=t(At);{var it=Xe=>{var Te=ys(),We=F(Te);We.__click=()=>{$e.applyEffectToCharacter(s().data.effect,s().data),s().type==="confirm_spell"?$e.commitSpellCast(s().data):$e.commitTalentUse(s().data)};var mt=t(We);Aa(mt,{size:18}),ve(),e(We);var _e=r(We,2);_e.__click=()=>{s().type==="confirm_spell"?$e.commitSpellCast(s().data):$e.commitTalentUse(s().data)},i(Xe,Te)},wt=Xe=>{var Te=ks();Te.__click=()=>{s().type==="confirm_spell"?$e.commitSpellCast(s().data):$e.commitTalentUse(s().data)};var We=t(Te);Dt(We,{size:18}),ve(),e(Te),i(Xe,Te)};h(Je,Xe=>{s().data.effect?Xe(it):Xe(wt,!1)})}var ct=r(Je,2);ct.__click=N,e(At),e(Be),O(()=>{k(gt,s().data.name),k(_t,s().data.description)}),i(De,Be)},Re=De=>{var Be=ie(),ft=F(Be);{var Ke=Qe=>{var _t=zs(),kt=t(_t),ot=t(kt);Bt(ot,{size:48,class:"text-indigo-400"}),e(kt);var At=r(kt,4),Je=t(At);Je.__click=N;var it=r(Je);it.__click=function(...wt){$e.confirmRest?.apply(this,wt)},e(At),e(_t),i(Qe,_t)},gt=Qe=>{var _t=ie(),kt=F(_t);{var ot=Je=>{var it=Ss(),wt=t(it),ct=t(wt),Xe=t(ct,!0);e(ct);var Te=r(ct,2),We=t(Te,!0);e(Te),e(wt);var mt=r(wt,2),_e=t(mt);_e.__click=()=>Ye.update(Mt=>({...Mt,type:"pre_roll",data:{type:"weapon_attack",source:s().data}}));var zt=t(_e),St=t(zt);Dt(St,{size:24}),e(zt),ve(2),e(_e);var $t=r(_e,2);$t.__click=()=>Ye.update(Mt=>({...Mt,type:"pre_roll",data:{type:"weapon_damage",source:s().data}}));var It=t($t),Ze=t(It);ht(Ze,{size:24}),e(It),ve(2),e($t),e(mt);var lt=r(mt,2);lt.__click=N,e(it),O(()=>{k(Xe,s().data.name),k(We,s().data.traits||"Sem Atributos")}),i(Je,it)},At=Je=>{var it=ie(),wt=F(it);{var ct=Te=>{var We=Ps();Ie(We,5,()=>n().talents,Oe,(mt,_e)=>{var zt=Es();zt.__click=()=>Ye.update(et=>({...et,type:"confirm_talent",data:a(_e)}));var St=t(zt),$t=t(St),It=t($t);Dt(It,{size:20}),e($t);var Ze=r($t,2),lt=t(Ze),Mt=t(lt,!0);e(lt);var Ot=r(lt,2),Lt=t(Ot,!0);e(Ot),e(Ze),e(St);var Ut=r(St,2),Rt=t(Ut);{var Kt=et=>{var nt=Ms();i(et,nt)},Ft=et=>{var nt=Ds(),pt=r(F(nt),2);Ie(pt,21,()=>Array(a(_e).maxUses),Oe,(qt,Et,Ua)=>{var ga=Ns();O(()=>me(ga,1,`w-1.5 h-1.5 rounded-full ${Ua<a(_e).uses?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]":"bg-slate-700"}`)),i(qt,ga)}),e(pt);var yt=r(pt,2),Gt=t(yt);e(yt),O(()=>{me(yt,1,`font-mono font-bold text-xs ${a(_e).uses>0?"text-green-400":"text-red-400"}`),k(Gt,`${a(_e).uses??""}/${a(_e).maxUses??""}`)}),i(et,nt)};h(Rt,et=>{a(_e).isPassive?et(Kt):et(Ft,!1)})}e(Ut),e(zt),O(()=>{zt.disabled=!a(_e).isPassive&&a(_e).maxUses>0&&a(_e).uses===0,k(Mt,a(_e).name),k(Lt,a(_e).description)}),i(mt,zt)},mt=>{var _e=Ts(),zt=t(_e);Dt(zt,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),ve(2),e(_e),i(mt,_e)}),e(We),i(Te,We)},Xe=Te=>{var We=ie(),mt=F(We);{var _e=St=>{var $t=js();Ie($t,5,()=>n().spells,Oe,(It,Ze)=>{var lt=Is();lt.__click=()=>Ye.update(yt=>({...yt,type:"confirm_spell",data:a(Ze)}));var Mt=t(lt),Ot=t(Mt),Lt=t(Ot);ea(Lt,{size:20}),e(Ot);var Ut=r(Ot,2),Rt=t(Ut),Kt=t(Rt,!0);e(Rt);var Ft=r(Rt,2),et=t(Ft);e(Ft),e(Ut),e(Mt);var nt=r(Mt,2),pt=r(t(nt),2);Ie(pt,21,()=>Array(a(Ze).maxCastings),Oe,(yt,Gt,qt)=>{var Et=Cs();O(()=>me(Et,1,`w-3 h-1 rounded-full ${qt<a(Ze).castings?"bg-indigo-500":"bg-slate-700"}`)),i(yt,Et)}),e(pt),e(nt),e(lt),O(()=>{lt.disabled=a(Ze).castings===0,k(Kt,a(Ze).name),k(et,`${a(Ze).tradition??""} • ${a(Ze).tier??""}`)}),i(It,lt)},It=>{var Ze=Os(),lt=t(Ze);ea(lt,{size:32,class:"mx-auto text-slate-700 mb-2 opacity-20"}),ve(2),e(Ze),i(It,Ze)}),e($t),i(St,$t)},zt=St=>{var $t=ie(),It=F($t);{var Ze=lt=>{var Mt=qs(),Ot=F(Mt);Ie(Ot,21,()=>Object.keys(wa),Oe,(et,nt)=>{var pt=Hs();pt.__click=()=>$e.toggleAffliction(a(nt));var yt=t(pt),Gt=r(yt);{var qt=Et=>{Aa(Et,{size:14})};h(Gt,Et=>{n().afflictions.includes(a(nt))&&Et(qt)})}e(pt),O(Et=>{me(pt,1,`p-3 rounded-lg border text-sm font-bold transition-all text-left flex justify-between items-center ${Et??""}`),k(yt,`${a(nt)??""} `)},[()=>n().afflictions.includes(a(nt))?"bg-red-900/40 border-red-500 text-red-200 shadow-lg shadow-red-900/20":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:bg-slate-850"]),i(et,pt)}),e(Ot);var Lt=r(Ot,2),Ut=r(t(Lt),2),Rt=t(Ut);Ie(Rt,1,()=>n().afflictions,Oe,(et,nt)=>{var pt=Us(),yt=t(pt),Gt=t(yt);e(yt);var qt=r(yt,2),Et=t(qt,!0);e(qt),e(pt),O(()=>{k(Gt,`${a(nt)??""}:`),k(Et,wa[a(nt)]?.effect||"")}),i(et,pt)});var Kt=r(Rt,2);{var Ft=et=>{var nt=Rs();i(et,nt)};h(Kt,et=>{n().afflictions.length===0&&et(Ft)})}e(Ut),e(Lt),i(lt,Mt)};h(It,lt=>{s().type==="affliction"&&lt(Ze)},!0)}i(St,$t)};h(mt,St=>{s().type==="cast_spell"?St(_e):St(zt,!1)},!0)}i(Te,We)};h(wt,Te=>{s().type==="select_talent"?Te(ct):Te(Xe,!1)},!0)}i(Je,it)};h(kt,Je=>{s().type==="weapon_menu"?Je(ot):Je(At,!1)},!0)}i(Qe,_t)};h(ft,Qe=>{s().type==="rest_confirm"?Qe(Ke):Qe(gt,!1)},!0)}i(De,Be)};h(Ne,De=>{s().type==="confirm_spell"||s().type==="confirm_talent"?De(ye):De(Re,!1)},!0)}i(L,we)};h(re,L=>{s().type==="character_info"?L(ne):L(w,!1)},!0)}i(E,ae)};h(Se,E=>{s().type==="health"?E(Le):E(Z,!1)},!0)}i(xe,oe)};h(H,xe=>{s().type==="stat"?xe(te):xe(X,!1)},!0)}i(ge,se)};h(Ue,ge=>{s().type==="attribute"?ge(Ve):ge(Ge,!1)},!0)}i(ze,he)};h(be,ze=>{s().type==="effect"?ze(He):ze(Fe,!1)},!0)}i(Ee,ee)};h(ue,Ee=>{s().type==="talent"?Ee(Me):Ee(qe,!1)},!0)}i(fe,W)};h(Y,fe=>{s().type==="spell"?fe(pe):fe(le,!1)},!0)}i(K,J)};h(A,K=>{s().type==="item"?K(B):K(ce,!1)})}e(U),i(C,U)},$$slots:{default:!0}})}var q=r(P,2);{let v=ut(()=>s().isOpen&&s().type==="pre_roll"),$=ut(()=>s().data?.type==="weapon_damage"?"Dados Extras":"Boons / Banes");xr(q,{get isOpen(){return a(v)},title:"Confirmar Rolagem",get label(){return a($)},rollLabel:"ROLAR",onClose:N,onRoll:C=>{$e.finalizeRoll(s().data,C,m().filter(V=>a(z).includes(V.id)).map(V=>V.name)),N()}})}i(M,b),vt(),Q()}bt(["click","input"]);var Vs=l("<div> </div>"),Bs=l('<div class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 text-center transition-all hover:bg-slate-800 active:scale-[0.98] group relative shadow-lg shadow-black/20 cursor-pointer" role="button" tabindex="0"><div class="py-2.5 px-2"><div class="text-[9px] uppercase text-slate-500 font-black tracking-widest group-hover:text-indigo-400 transition-colors mb-1"> </div> <div class="flex items-center justify-center gap-1.5 mb-1.5"><div class="text-2xl font-black text-white leading-none"> </div> <!></div> <div class="inline-flex px-2 py-0.5 bg-indigo-500/10 rounded-lg"><div class="text-xs text-indigo-400 font-black tracking-tight"> </div></div></div> <button class="absolute top-1.5 right-1.5 p-1 text-slate-700 hover:text-white hover:bg-white/5 rounded-md transition-all"><!></button></div>'),Ws=l('<div class="grid grid-cols-2 gap-3"></div>');function Ca(M,x){dt(x,!1);const s=()=>de(je,"$character",y),f=()=>de(Xa,"$derivedStats",y),[y,S]=xt();function n(o,g){Ye.update(z=>({...z,type:o,isOpen:!0,data:g}))}function m(o){n("pre_roll",{type:"attribute",source:o})}function T(o,g){o.stopPropagation(),n("attribute",g)}Ct();var Q=Ws();Ie(Q,5,()=>s().attributes,Oe,(o,g)=>{var z=Bs();z.__click=()=>m(a(g));var N=t(z),G=t(N),I=t(G,!0);e(G);var D=r(G,2),R=t(D),c=t(R,!0);e(R);var j=r(R,2);{var _=q=>{var v=Vs(),$=t(v);e(v),O(()=>{me(v,1,`text-[11px] font-bold ${f()[a(g).key]>a(g).value?"text-green-500 bg-green-500/10":"text-red-500 bg-red-500/10"} px-1 rounded-md`),k($,`${f()[a(g).key]>a(g).value?"+":""}${f()[a(g).key]-a(g).value}`)}),i(q,v)};h(j,q=>{f()[a(g).key]!==a(g).value&&q(_)})}e(D);var p=r(D,2),d=t(p),u=t(d);e(d),e(p),e(N);var b=r(N,2);b.__click=q=>T(q,a(g));var P=t(b);ta(P,{size:12}),e(b),e(z),O(()=>{Ce(z,"aria-label",`Rolar teste de ${a(g).name}`),k(I,a(g).name),k(c,f()[a(g).key]),k(u,`+${f()[a(g).key]-10}`),Ce(b,"aria-label",`Editar ${a(g).name??""}`)}),i(o,z)}),e(Q),i(M,Q),vt(),S()}bt(["click"]);var Qs=l('<div class="p-1 bg-red-500/10 rounded"><!></div>'),Ys=l('<div class="space-y-3"><div class="grid grid-cols-2 gap-3"><button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Defesa</div> <div class="flex items-baseline gap-1"><span class="text-3xl font-black text-white leading-none"> </span></div></button> <button class="bg-slate-900 overflow-hidden rounded-2xl border border-slate-800 p-3 text-left transition-all hover:bg-slate-800 active:scale-95 group shadow-lg shadow-black/20"><div class="text-[9px] font-black text-slate-500 uppercase tracking-widest group-hover:text-indigo-400 transition-colors flex items-center gap-1.5 mb-2"><!> Speed</div> <div class="flex items-baseline justify-between w-full"><span> </span> <!></div></button></div> <div class="bg-slate-900 rounded-2xl border border-slate-800 p-4 shadow-lg shadow-black/20"><span class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"><!> Bônus de Dano</span> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90" aria-label="Diminuir Dano Bônus"><!></button> <div class="flex flex-col items-center"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span> <span class="text-[9px] text-slate-600 font-bold uppercase mt-1">Dados Extras</span></div> <button class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20" aria-label="Aumentar Dano Bônus"><!></button></div></div></div>');function Ia(M,x){dt(x,!1);const s=()=>de(ca,"$totalDefense",S),f=()=>de(Ja,"$effectiveSpeed",S),y=()=>de(je,"$character",S),[S,n]=xt();function m(Y,pe){Ye.update(le=>({...le,type:Y,isOpen:!0,data:pe}))}function T(){je.update(Y=>({...Y,bonusDamage:Math.max(0,(Y.bonusDamage||0)-1)}))}function Q(){je.update(Y=>({...Y,bonusDamage:(Y.bonusDamage||0)+1}))}Ct();var o=Ys(),g=t(o),z=t(g);z.__click=()=>m("stat","defense");var N=t(z),G=t(N);wr(G,{size:12}),ve(),e(N);var I=r(N,2),D=t(I),R=t(D,!0);e(D),e(I),e(z);var c=r(z,2);c.__click=()=>m("stat","speed");var j=t(c),_=t(j);Dt(_,{size:12}),ve(),e(j);var p=r(j,2),d=t(p),u=t(d,!0);e(d);var b=r(d,2);{var P=Y=>{var pe=Qs(),le=t(pe);sa(le,{size:10,class:"text-red-500"}),e(pe),i(Y,pe)};h(b,Y=>{f()<y().speed&&Y(P)})}e(p),e(c),e(g);var q=r(g,2),v=t(q),$=t(v);Zt($,{size:14,class:"text-indigo-500"}),ve(),e(v);var C=r(v,2),V=t(C);V.__click=T;var U=t(V);ra(U,{size:18}),e(V);var A=r(V,2),B=t(A),ce=t(B);e(B),ve(2),e(A);var K=r(A,2);K.__click=Q;var J=t(K);ht(J,{size:18}),e(K),e(C),e(q),e(o),O(()=>{k(R,s()),me(d,1,`text-3xl font-black ${f()<y().speed?"text-red-400":"text-white"} leading-none`),k(u,f()),k(ce,`${(y().bonusDamage||0)??""}d6`)}),i(M,o),vt(),n()}bt(["click"]);var Ks=l('<div class="bg-slate-900 p-3 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-3"><h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-1.5"><!> Moedas</h4></div> <div class="grid grid-cols-3 gap-2"><div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-yellow-500 font-black uppercase tracking-tight relative z-10">GP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir GP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar GP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-slate-300 font-black uppercase tracking-tight relative z-10">SP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir SP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar SP"><!></button></div></div> <div class="bg-slate-950 rounded-xl p-2 border border-slate-800/50 flex flex-col items-center gap-1.5 relative overflow-hidden group"><div class="text-[9px] text-orange-700/80 font-black uppercase tracking-tight relative z-10">CP</div> <div class="flex items-center justify-between w-full relative z-10 bg-black/40 rounded-lg p-0.5 border border-white/5"><button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-md transition-all active:scale-75" aria-label="Diminuir CP"><!></button> <span class="text-sm font-black text-white font-mono leading-none"> </span> <button class="w-7 h-7 flex items-center justify-center text-slate-500 hover:text-green-400 hover:bg-green-400/10 rounded-md transition-all active:scale-75" aria-label="Aumentar CP"><!></button></div></div></div></div>');function Oa(M,x){dt(x,!1);const s=()=>de(je,"$character",f),[f,y]=xt(),{updateCurrency:S}=$e;Ct();var n=Ks(),m=t(n),T=t(m),Q=t(T);Ar(Q,{size:14,class:"text-yellow-500"}),ve(),e(T),e(m);var o=r(m,2),g=t(o),z=r(t(g),2),N=t(z);N.__click=()=>S("gp",-1);var G=t(N);ra(G,{size:14}),e(N);var I=r(N,2),D=t(I,!0);e(I);var R=r(I,2);R.__click=()=>S("gp",1);var c=t(R);ht(c,{size:14}),e(R),e(z),e(g);var j=r(g,2),_=r(t(j),2),p=t(_);p.__click=()=>S("sp",-1);var d=t(p);ra(d,{size:14}),e(p);var u=r(p,2),b=t(u,!0);e(u);var P=r(u,2);P.__click=()=>S("sp",1);var q=t(P);ht(q,{size:14}),e(P),e(_),e(j);var v=r(j,2),$=r(t(v),2),C=t($);C.__click=()=>S("cp",-1);var V=t(C);ra(V,{size:14}),e(C);var U=r(C,2),A=t(U,!0);e(U);var B=r(U,2);B.__click=()=>S("cp",1);var ce=t(B);ht(ce,{size:14}),e(B),e($),e(v),e(o),e(n),O(()=>{k(D,s().currency.gp),k(b,s().currency.sp),k(A,s().currency.cp)}),i(M,n),vt(),y()}bt(["click"]);var Xs=l('<div class="bg-slate-950 border border-slate-700 text-slate-200 px-3 py-1.5 rounded-xl text-sm font-bold flex items-center gap-2 group transition-all hover:border-indigo-500/50"> <button class="text-slate-500 hover:text-red-400 p-1 rounded-full hover:bg-red-400/10 transition-all"><!></button></div>'),Js=l('<span class="text-sm text-slate-500 italic py-2 px-1">Nenhum idioma registrado.</span>'),Zs=l('<div class="bg-slate-900 p-4 rounded-2xl border border-slate-800 shadow-xl shadow-black/20"><div class="flex justify-between items-center mb-4"><h4 class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2"><!> Idiomas</h4></div> <div class="flex flex-wrap gap-2 mb-4"><!> <!></div> <div class="relative group"><input type="text" placeholder="Adicionar novo idioma..." class="w-full bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500 transition-all placeholder:text-slate-600 focus:ring-1 focus:ring-indigo-500/20" aria-label="Adicionar novo idioma"/> <div class="absolute right-3 top-1/2 -translate-y-1/2 p-1.5 bg-slate-800 rounded-lg text-slate-500 group-focus-within:text-indigo-400 group-focus-within:bg-indigo-400/10 transition-all"><!></div></div></div>');function ja(M,x){dt(x,!1);const s=()=>de(je,"$character",f),[f,y]=xt(),{addLanguage:S,removeLanguage:n}=$e;function m(_){if(_.key==="Enter"){const p=_.target,d=p.value.trim();d!==""&&(S(d),p.value="")}}Ct();var T=Zs(),Q=t(T),o=t(Q),g=t(o);Dr(g,{size:16,class:"text-indigo-500"}),ve(),e(o),e(Q);var z=r(Q,2),N=t(z);Ie(N,1,()=>s().languages,Oe,(_,p,d)=>{var u=Xs(),b=t(u),P=r(b);P.__click=()=>n(d);var q=t(P);xa(q,{size:14}),e(P),e(u),O(()=>{k(b,`${a(p)??""} `),Ce(P,"aria-label",`Remover idioma ${a(p)??""}`)}),i(_,u)});var G=r(N,2);{var I=_=>{var p=Js();i(_,p)};h(G,_=>{s().languages.length===0&&_(I)})}e(z);var D=r(z,2),R=t(D);R.__keydown=m;var c=r(R,2),j=t(c);ht(j,{size:16}),e(c),e(D),e(T),i(M,T),vt(),y()}bt(["click","keydown"]);var eo=l('<span class="text-xs text-slate-500 italic">Nenhuma aflição ativa.</span>'),to=l('<div class="group relative"><div class="text-xs bg-red-900/30 border border-red-700 text-red-200 px-2 py-1 rounded flex items-center gap-1 cursor-help" title="Aflição Ativa"> <button class="ml-1 text-red-400 hover:text-white"><!></button></div></div>'),ao=l('<div class="bg-slate-900 p-3 rounded-xl border border-slate-800"><div class="flex justify-between items-center mb-2"><h4 class="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1"><!> Aflições</h4> <button class="text-slate-500 hover:text-white" aria-label="Adicionar Aflição"><!></button></div> <div class="flex flex-wrap gap-2"><!> <!></div></div>');function Ha(M,x){dt(x,!1);const s=()=>de(je,"$character",f),[f,y]=xt(),{toggleAffliction:S}=$e;function n(){Ye.update(c=>({...c,type:"affliction",isOpen:!0}))}function m(c,j){c.stopPropagation(),S(j)}Ct();var T=ao(),Q=t(T),o=t(Q),g=t(o);sa(g,{size:12}),ve(),e(o);var z=r(o,2);z.__click=n;var N=t(z);ht(N,{size:14}),e(z),e(Q);var G=r(Q,2),I=t(G);{var D=c=>{var j=eo();i(c,j)};h(I,c=>{s().afflictions.length===0&&c(D)})}var R=r(I,2);Ie(R,1,()=>s().afflictions,Oe,(c,j)=>{var _=to(),p=t(_),d=t(p),u=r(d);u.__click=P=>m(P,a(j));var b=t(u);xa(b,{size:10}),e(u),e(p),e(_),O(()=>{k(d,`${a(j)??""} `),Ce(u,"aria-label",`Remover aflição ${a(j)??""}`)}),i(c,_)}),e(G),e(T),i(M,T),vt(),y()}bt(["click"]);var ro=l('<button><!> <span class="text-[10px] font-bold uppercase tracking-wide"> </span></button>'),so=l('<div class="md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]"></div> <div class="md:hidden fixed bottom-0 left-0 right-0 z-[70] bg-slate-900 border-t border-slate-700 rounded-t-3xl shadow-2xl safe-area-pb"><div class="flex justify-between items-center px-6 py-4 border-b border-slate-800"><h3 class="text-sm font-black text-white uppercase tracking-wider">Mais Opções</h3> <button class="p-2 rounded-full bg-slate-800 text-slate-400 hover:text-white transition-colors"><!></button></div> <div class="grid grid-cols-3 gap-2 p-4"></div></div>',1),oo=l('<button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide"> </span></button>'),io=l('<div class="absolute inset-x-0 bottom-0 h-0.5 bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.5)]"></div>'),lo=l('<button role="tab"><!> <span class="tracking-widest uppercase"> </span> <!></button>'),no=l('<!> <div class="md:hidden fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-lg border-t border-slate-800 safe-area-pb" role="tablist"><div class="flex justify-around items-center py-2"><!> <button role="tab"><!> <span class="text-[9px] font-bold uppercase tracking-wide">MAIS</span></button></div></div> <div class="hidden md:flex bg-slate-900/80 backdrop-blur-md border-b border-slate-800 overflow-x-auto no-scrollbar sticky top-[60px] z-30" role="tablist"></div> <div class="h-4 bg-slate-950 hidden md:block"></div>',1);function vo(M,x){dt(x,!0);const s=()=>de(jt,"$activeTab",f),[f,y]=xt(),S=[{id:"acoes",label:"AÇÕES",icon:Zt},{id:"magias",label:"MAGIAS",icon:za},{id:"talentos",label:"TALENTOS",icon:Dt},{id:"equipamento",label:"ITENS",icon:ua},{id:"notas",label:"NOTAS",icon:Sa},{id:"efeitos",label:"EFEITOS",icon:sa}],n=[{id:"stats",label:"STATS",icon:lr},{id:"acoes",label:"AÇÕES",icon:Zt},{id:"notas",label:"NOTAS",icon:Sa},{id:"equipamento",label:"ITENS",icon:ua}],m=[{id:"magias",label:"MAGIAS",icon:za},{id:"talentos",label:"TALENTOS",icon:Dt},{id:"efeitos",label:"EFEITOS",icon:sa}];let T=Pt(!1);function Q(_){jt.set(_),Ae(T,!1)}let o=ut(()=>m.some(_=>_.id===s()));var g=no(),z=F(g);{var N=_=>{var p=so(),d=F(p);d.__click=()=>Ae(T,!1);var u=r(d,2),b=t(u),P=r(t(b),2);P.__click=()=>Ae(T,!1);var q=t(P);xa(q,{size:18}),e(P),e(b);var v=r(b,2);Ie(v,21,()=>m,Oe,($,C)=>{var V=ro();V.__click=()=>Q(a(C).id);var U=t(V);la(U,()=>a(C).icon,(ce,K)=>{K(ce,{size:24})});var A=r(U,2),B=t(A,!0);e(A),e(V),O(()=>{me(V,1,`flex flex-col items-center gap-2 p-4 rounded-2xl transition-all active:scale-95 ${s()===a(C).id?"bg-indigo-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`),k(B,a(C).label)}),i($,V)}),e(v),e(u),pa(3,d,()=>Pa,()=>({duration:150})),pa(3,u,()=>$r,()=>({duration:200})),i(_,p)};h(z,_=>{a(T)&&_(N)})}var G=r(z,2),I=t(G),D=t(I);Ie(D,17,()=>n,Oe,(_,p)=>{var d=oo();d.__click=()=>Q(a(p).id);var u=t(d);{let q=ut(()=>s()===a(p).id?"text-indigo-400":"text-slate-500");la(u,()=>a(p).icon,(v,$)=>{$(v,{size:20,get class(){return a(q)}})})}var b=r(u,2),P=t(b,!0);e(b),e(d),O(()=>{me(d,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${s()===a(p).id?"text-indigo-400":"text-slate-500"}`),Ce(d,"aria-selected",s()===a(p).id),k(P,a(p).label)}),i(_,d)});var R=r(D,2);R.__click=()=>Ae(T,!a(T));var c=t(R);{let _=ut(()=>a(o)||a(T)?"text-indigo-400":"text-slate-500");zr(c,{size:20,get class(){return a(_)}})}ve(2),e(R),e(I),e(G);var j=r(G,2);Ie(j,21,()=>S,Oe,(_,p)=>{var d=lo();d.__click=()=>jt.set(a(p).id);var u=t(d);{let $=ut(()=>s()===a(p).id?"text-indigo-400":"text-slate-500");la(u,()=>a(p).icon,(C,V)=>{V(C,{size:14,get class(){return`${a($)??""} group-hover:scale-110 transition-transform`}})})}var b=r(u,2),P=t(b,!0);e(b);var q=r(b,2);{var v=$=>{var C=io();i($,C)};h(q,$=>{s()===a(p).id&&$(v)})}e(d),O(()=>{me(d,1,`px-5 lg:px-6 py-4 flex items-center gap-2 font-black text-xs transition-all whitespace-nowrap border-b-2 relative group ${s()===a(p).id?"text-indigo-400 border-indigo-500 bg-indigo-500/5":"text-slate-500 border-transparent hover:text-slate-300"}`),Ce(d,"aria-selected",s()===a(p).id),k(P,a(p).label)}),i(_,d)}),e(j),ve(2),O(()=>{me(R,1,`flex flex-col items-center gap-0.5 px-3 py-2 transition-all ${a(o)||a(T)?"text-indigo-400":"text-slate-500"}`),Ce(R,"aria-expanded",a(T))}),i(M,g),vt(),y()}bt(["click"]);var co=l('<span class="text-[10px] bg-indigo-900 text-indigo-200 px-1 rounded uppercase"> </span>'),po=l('<button class="text-xs bg-red-900/50 text-red-200 px-3 py-1 rounded border border-red-800 hover:bg-red-900 flex items-center gap-1"><!> </button>'),uo=l('<div class="flex flex-col sm:flex-row justify-between p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-900 cursor-pointer transition-colors gap-4 active:scale-[0.99]" role="button" tabindex="0"><div class="flex items-start gap-3"><div class="bg-slate-800 p-2 rounded text-slate-400 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2"> <!></p> <p class="text-xs text-slate-500"> </p></div></div> <div class="flex flex-col items-end gap-2"><div class="flex items-center gap-4 bg-slate-900 p-2 rounded-lg border border-slate-800"><div class="text-center px-2"><span class="block text-[10px] font-bold text-slate-500 uppercase">Dano</span> <span class="text-xl font-mono text-white font-bold"> </span></div></div> <!></div></div>'),bo=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-indigo-500 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-indigo-900/50 p-2 rounded text-indigo-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-indigo-300 transition-colors">Conjurar Magia</p> <p class="text-xs text-slate-500">Selecione uma magia do grimório para lançar.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-indigo-400 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),xo=l('<div class="flex flex-col sm:flex-row items-center p-4 bg-slate-950 rounded-lg border border-slate-800 hover:border-yellow-600 cursor-pointer transition-colors gap-4 group" role="button" tabindex="0"><div class="flex items-start gap-3 w-full"><div class="bg-yellow-900/30 p-2 rounded text-yellow-300 mt-1"><!></div> <div><p class="font-bold text-white flex items-center gap-2 group-hover:text-yellow-300 transition-colors">Usar Talento</p> <p class="text-xs text-slate-500">Ative uma habilidade ou talento especial.</p></div></div> <div class="ml-auto"><div class="bg-slate-900 px-3 py-1 rounded text-xs font-bold text-yellow-500 uppercase tracking-wider border border-slate-800">Selecionar</div></div></div>'),fo=l('<div class="flex flex-col items-center justify-center py-16 px-6 text-center bg-gradient-to-b from-slate-900/50 to-slate-950/50 rounded-[2.5rem] border border-dashed border-slate-800 shadow-2xl relative overflow-hidden group mt-4"><div class="absolute -top-24 -right-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full"></div> <div class="relative"><div class="w-20 h-20 bg-slate-800 rounded-3xl flex items-center justify-center text-indigo-400 mb-6 mx-auto transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-xl border border-slate-700"><!></div> <h3 class="text-2xl font-black text-white mb-3 uppercase tracking-tight">Pronto para o Combate?</h3> <p class="text-slate-400 mb-8 max-w-sm mx-auto leading-relaxed">Sua lista de ações rápidas está vazia. Equipe seu herói para ver armas, magias e talentos ativos aqui.</p> <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-md"><button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Inventário</span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Magias</span></button> <button class="flex flex-col items-center gap-2 p-4 bg-slate-900/80 hover:bg-slate-800 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all active:scale-95 group/btn"><div class="p-2 bg-slate-800 rounded-lg text-slate-400 group-hover/btn:text-indigo-400 transition-colors"><!></div> <span class="text-[10px] font-black uppercase tracking-wider text-slate-500 group-hover/btn:text-slate-300">Talentos</span></button></div></div></div>'),go=l('<div class="space-y-4"><!> <!> <!> <!></div>');function _o(M,x){dt(x,!0);const s=()=>de(je,"$character",f),[f,y]=xt(),{useConsumable:S}=$e;let n=ut(()=>s().equipment.filter(_=>_.type===Nt.WEAPON&&_.equippedState||_.type===Nt.EXPLOSIVE)),m=ut(()=>s().spells.length>0),T=ut(()=>s().talents.length>0),Q=ut(()=>a(n).length===0&&!a(m)&&!a(T));function o(_,p=null){Ye.update(d=>({...d,type:_,isOpen:!0,data:p}))}function g(_,p){_.stopPropagation(),S(p)}var z=go(),N=t(z);Ie(N,17,()=>a(n),Oe,(_,p)=>{var d=uo();d.__click=()=>o("weapon_menu",a(p));var u=t(d),b=t(u),P=t(b);Zt(P,{size:20}),e(b);var q=r(b,2),v=t(q),$=t(v),C=r($);{var V=fe=>{var W=co(),ue=t(W,!0);e(W),O(()=>k(ue,a(p).equippedState)),i(fe,W)};h(C,fe=>{a(p).equippedState&&fe(V)})}e(v);var U=r(v,2),A=t(U);e(U),e(q),e(u);var B=r(u,2),ce=t(B),K=t(ce),J=r(t(K),2),Y=t(J);e(J),e(K),e(ce);var pe=r(ce,2);{var le=fe=>{var W=po();W.__click=qe=>g(qe,a(p));var ue=t(W);kr(ue,{size:12});var Me=r(ue);e(W),O(()=>{Ce(W,"aria-label",`Usar ${a(p).name??""}`),k(Me,` Throw (${a(p).quantity??""})`)}),i(fe,W)};h(pe,fe=>{a(p).type===Nt.EXPLOSIVE&&fe(le)})}e(B),e(d),O(()=>{Ce(d,"aria-label",`Opções para ${a(p).name??""}`),k($,`${a(p).name??""} `),k(A,`${(a(p).traits||"-")??""} • ${(a(p).range||"-")??""}`),k(Y,`${(a(p).damageDice||0)??""}d6`)}),i(_,d)});var G=r(N,2);{var I=_=>{var p=bo();p.__click=()=>o("cast_spell");var d=t(p),u=t(d),b=t(u);ea(b,{size:20}),e(u),ve(2),e(d),ve(2),e(p),i(_,p)};h(G,_=>{a(m)&&_(I)})}var D=r(G,2);{var R=_=>{var p=xo();p.__click=()=>o("select_talent");var d=t(p),u=t(d),b=t(u);Dt(b,{size:20}),e(u),ve(2),e(d),ve(2),e(p),i(_,p)};h(D,_=>{a(T)&&_(R)})}var c=r(D,2);{var j=_=>{var p=fo(),d=r(t(p),4),u=t(d),b=t(u);Zt(b,{size:40,class:"opacity-80"}),e(u);var P=r(u,6),q=t(P);q.__click=()=>jt.set("equipamento");var v=t(q),$=t(v);ua($,{size:20}),e(v),ve(2),e(q);var C=r(q,2);C.__click=()=>jt.set("magias");var V=t(C),U=t(V);ea(U,{size:20}),e(V),ve(2),e(C);var A=r(C,2);A.__click=()=>jt.set("talentos");var B=t(A),ce=t(B);Dt(ce,{size:20}),e(B),ve(2),e(A),e(P),e(d),e(p),pa(1,p,()=>Pa,()=>({duration:300})),i(_,p)};h(c,_=>{a(Q)&&_(j)})}e(z),i(M,z),vt(),y()}bt(["click"]);var mo=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl group hover:border-indigo-500/50 transition-all duration-300"><div class="flex justify-between items-start mb-3"><div><div class="font-bold text-white text-lg group-hover:text-indigo-300 transition-colors uppercase tracking-tight"> </div> <div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div></div> <button class="text-slate-600 hover:text-white p-1 hover:bg-slate-800 rounded-md transition-all"><!></button></div> <div class="text-sm text-slate-400 mb-4 line-clamp-2 leading-relaxed h-10"> </div> <div class="flex items-center justify-between bg-slate-950/50 p-3 rounded-xl border border-slate-800/50"><span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Usos Mágicos</span> <div class="flex items-center gap-3"><span> </span> <button class="bg-indigo-600 disabled:opacity-20 text-white text-[10px] font-black px-4 py-1.5 rounded-lg hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/40 active:scale-95 uppercase tracking-wider">Cast</button></div></div></div>'),ho=l('<div class="space-y-3"><h4 class="text-[10px] font-black text-indigo-400 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-8 h-px bg-indigo-500/30"></span> <span class="flex-1 h-px bg-indigo-500/30"></span></h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),wo=l('<div class="text-center py-16 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Seu grimório está vazio.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeira Magia</button></div>'),$o=l('<div class="space-y-8"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Grimório Arcano</h3> <p class="text-xs text-slate-500">Seus feitiços e magias conhecidas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Nova Magia"><!> Nova Magia</button></div> <!> <!></div>');function yo(M,x){dt(x,!1);const s=()=>de(je,"$character",f),[f,y]=xt();function S(N,G=null){Ye.update(I=>({...I,type:N,isOpen:!0,data:G}))}Ct();var n=$o(),m=t(n),T=r(t(m),2);T.__click=()=>S("spell");var Q=t(T);ht(Q,{size:16}),ve(),e(T),e(m);var o=r(m,2);Ie(o,0,()=>["Novice","Expert","Master"],Oe,(N,G)=>{var I=ie(),D=F(I);{var R=c=>{var j=ho(),_=t(j),p=r(t(_));ve(),e(_);var d=r(_,2);Ie(d,5,()=>s().spells.filter(u=>u.tier===G),Oe,(u,b)=>{var P=mo(),q=t(P),v=t(q),$=t(v),C=t($,!0);e($);var V=r($,2),U=t(V);e(V),e(v);var A=r(v,2);A.__click=()=>S("spell",a(b));var B=t(A);ta(B,{size:14}),e(A),e(q);var ce=r(q,2),K=t(ce,!0);e(ce);var J=r(ce,2),Y=r(t(J),2),pe=t(Y),le=t(pe);e(pe);var fe=r(pe,2);fe.__click=()=>S("confirm_spell",a(b)),e(Y),e(J),e(P),O(()=>{k(C,a(b).name),k(U,`${a(b).tradition??""} • ${a(b).type??""}`),Ce(A,"aria-label",`Editar ${a(b).name??""}`),k(K,a(b).description),me(pe,1,`text-sm font-mono font-bold ${a(b).castings===0?"text-red-500":"text-indigo-400"}`),k(le,`${a(b).castings??""}/${a(b).maxCastings??""}`),fe.disabled=a(b).castings===0}),i(u,P)}),e(d),e(j),O(()=>k(p,` ${G??""} Spells `)),i(c,j)};h(D,c=>{s().spells.some(j=>j.tier===G)&&c(R)})}i(N,I)});var g=r(o,2);{var z=N=>{var G=wo(),I=t(G);ea(I,{size:48,class:"mx-auto text-slate-800 mb-3"});var D=r(I,4);D.__click=()=>S("spell");var R=t(D);ht(R,{size:14}),ve(),e(D),e(G),i(N,G)};h(g,N=>{s().spells.length===0&&N(z)})}e(n),i(M,n),vt(),y()}bt(["click"]);var ko=l('<div class="text-2xl font-mono font-bold text-white leading-tight"> </div>'),Ao=l('<div class="text-sm font-bold text-slate-500 uppercase tracking-tighter mt-1 italic">Fora de Combate</div>'),zo=l('<div class="text-center text-slate-500 italic py-4">Nenhum efeito ativo.</div>'),So=l("<span> </span>"),Mo=l('<div class="flex flex-wrap gap-1 mt-1"></div>'),No=l('<button class="bg-yellow-900/40 hover:bg-yellow-800/40 text-yellow-500 border border-yellow-800 px-2 py-0.5 rounded flex items-center gap-1 transition-colors" aria-label="Sortear encerramento do efeito"><!> Sorte Encerra</button>'),Do=l('<div><div class="flex justify-between items-start"><div class="flex items-center gap-2"><button><div></div></button> <span class="font-bold text-white tracking-tight"> </span></div> <div class="flex gap-2"><button class="text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors"><!></button> <button class="text-slate-500 hover:text-red-400 p-1 hover:bg-slate-800 rounded transition-colors"><!></button></div></div> <div class="text-xs text-slate-400 leading-relaxed"> </div> <!> <div class="flex justify-between items-center text-[10px] text-slate-500 font-mono mt-1 border-t border-slate-800/50 pt-2"><span class="flex items-center gap-1"><!> </span> <!></div></div>'),Eo=l('<div class="space-y-4"><div class="flex justify-between items-center bg-slate-900 p-3 rounded-lg border border-slate-800"><div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400 disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Voltar Rodada"><!></button> <div class="text-center min-w-[80px]"><div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider"> </div> <!></div> <button class="p-2 hover:bg-slate-700 rounded text-white disabled:opacity-30 disabled:cursor-not-allowed" aria-label="Avançar Rodada"><!></button></div> <div class="flex gap-2"><button class="bg-slate-800 hover:bg-red-900/50 text-slate-400 hover:text-red-300 px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 border border-slate-700"><!> Limpar Inativos</button> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1"><!> Novo Efeito</button></div></div> <div class="space-y-2"><!> <!></div></div>');function To(M,x){dt(x,!1);const s=()=>de(je,"$character",f),[f,y]=xt(),{advanceRound:S,deleteEffect:n,checkLuckEnds:m}=$e;function T(U,A=null){Ye.update(B=>({...B,type:U,isOpen:!0,data:A}))}Ct();var Q=Eo(),o=t(Q),g=t(o),z=t(g);z.__click=()=>S("prev");var N=t(z);Tr(N,{size:20}),e(z);var G=r(z,2),I=t(G),D=t(I,!0);e(I);var R=r(I,2);{var c=U=>{var A=ko(),B=t(A,!0);e(A),O(()=>k(B,s().currentRound||1)),i(U,A)},j=U=>{var A=Ao();i(U,A)};h(R,U=>{s().combatActive?U(c):U(j,!1)})}e(G);var _=r(G,2);_.__click=()=>S("next");var p=t(_);Mr(p,{size:20}),e(_),e(g);var d=r(g,2),u=t(d);u.__click=function(...U){$e.cleanInactiveEffects?.apply(this,U)};var b=t(u);Sr(b,{size:14}),ve(),e(u);var P=r(u,2);P.__click=()=>T("effect");var q=t(P);ht(q,{size:14}),ve(),e(P),e(d),e(o);var v=r(o,2),$=t(v);{var C=U=>{var A=zo();i(U,A)};h($,U=>{s().effects.length===0&&U(C)})}var V=r($,2);Ie(V,1,()=>s().effects,Oe,(U,A)=>{var B=Do(),ce=t(B),K=t(ce),J=t(K);J.__click=()=>$e.toggleEffect(a(A).id);var Y=t(J);e(J);var pe=r(J,2),le=t(pe,!0);e(pe),e(K);var fe=r(K,2),W=t(fe);W.__click=()=>T("effect",a(A));var ue=t(W);ta(ue,{size:14}),e(W);var Me=r(W,2);Me.__click=()=>n(a(A).id);var qe=t(Me);Bt(qe,{size:14}),e(Me),e(fe),e(ce);var Ee=r(ce,2),ee=t(Ee,!0);e(Ee);var be=r(Ee,2);{var He=ge=>{var se=Mo();Ie(se,5,()=>a(A).modifiers,Oe,(H,te)=>{var X=So(),xe=t(X);e(X),O(()=>{me(X,1,`text-[9px] px-1.5 py-0.5 rounded border ${a(te).type===Tt.SET?"bg-yellow-900/30 text-yellow-200 border-yellow-800":"bg-slate-800 text-slate-300 border-slate-700"} font-medium`),k(xe,`${(Na[a(te).target]||a(te).target)??""}: ${a(te).type===Tt.SET?"=":a(te).type===Tt.MULT?"x":a(te).value>0?"+":""}${a(te).value??""}`)}),i(H,X)}),e(se),i(ge,se)};h(be,ge=>{a(A).isActive&&Array.isArray(a(A).modifiers)&&a(A).modifiers.length>0&&ge(He)})}var Fe=r(be,2),ze=t(Fe),he=t(ze);Ta(he,{size:10,class:"text-indigo-400"});var Ue=r(he);e(ze);var Ve=r(ze,2);{var Ge=ge=>{var se=No();se.__click=()=>m(a(A).id);var H=t(se);fa(H,{size:10}),ve(),e(se),i(ge,se)};h(Ve,ge=>{a(A).duration==="LUCK_ENDS"&&a(A).isActive&&ge(Ge)})}e(Fe),e(B),O(()=>{me(B,1,`p-3 rounded border flex flex-col gap-2 transition-all ${a(A).isActive?"bg-slate-900 border-indigo-900 shadow-lg shadow-indigo-950/20":"bg-slate-950 border-slate-800 opacity-60"}`),me(J,1,`w-8 h-4 rounded-full relative transition-colors ${a(A).isActive?"bg-green-500":"bg-slate-600"}`),Ce(J,"aria-label",a(A).isActive?"Desativar efeito {eff.name}":"Ativar efeito {eff.name}"),Ce(J,"aria-pressed",a(A).isActive),me(Y,1,`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${a(A).isActive?"left-4.5":"left-0.5"}`),k(le,a(A).name),Ce(W,"aria-label",`Editar ${a(A).name??""}`),Ce(Me,"aria-label",`Excluir ${a(A).name??""}`),k(ee,a(A).description),k(Ue,` ${Ma[a(A).duration]??""} ${a(A).duration==="ROUNDS"?`(${a(A).roundsLeft})`:""}`)}),i(U,B)}),e(v),e(Q),O(()=>{z.disabled=!!s().campaignId,k(D,s().combatActive?"Rodada Atual":"Status"),_.disabled=!!s().campaignId}),i(M,Q),vt(),y()}bt(["click"]);var Po=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Tipo</span> <span class="font-bold text-slate-300 text-xs flex items-center justify-center gap-1.5 bg-slate-800 px-2 py-1 rounded-md"><!> Passivo</span>',1),Co=l('<span class="block text-[10px] text-slate-500 uppercase font-black tracking-widest mb-1">Usos</span> <span> <span class="text-slate-600 text-sm"> </span></span>',1),Io=l('<div class="flex gap-2"><button title="Recuperar Uso" class="bg-slate-800 disabled:opacity-20 hover:bg-green-600/20 text-green-400 p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-green-500/50"><!></button> <button title="Usar Talento" class="bg-slate-800 disabled:opacity-20 hover:bg-indigo-600/20 text-white p-2 rounded-lg transition-all hover:scale-110 active:scale-90 border border-slate-700 hover:border-indigo-500/50"><!></button></div>'),Oo=l('<div class="p-5 bg-slate-900/40 backdrop-blur-sm border border-slate-800 rounded-2xl flex flex-col md:flex-row md:items-center gap-6 group hover:border-indigo-500/50 hover:bg-slate-900/60 transition-all duration-300"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><div class="p-2 rounded-lg bg-slate-800 text-yellow-500 group-hover:scale-110 transition-transform shadow-inner"><!></div> <h4 class="font-bold text-white text-lg tracking-tight uppercase tracking-tight"> </h4> <button class="text-slate-600 hover:text-indigo-400 opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110"><!></button></div> <p class="text-sm text-slate-400 leading-relaxed max-w-2xl"> </p></div> <div class="shrink-0 flex items-center gap-4 bg-slate-950/50 p-3 rounded-xl border border-slate-800 shadow-inner"><div class="text-center px-2 border-r border-slate-800 pr-4 min-w-[80px]"><!></div> <!></div></div>'),jo=l('<div class="text-center py-12 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-2xl"><!> <p class="text-slate-500 font-medium">Você ainda não possui talentos cadastrados.</p> <button class="mt-4 text-indigo-400 hover:text-indigo-300 text-sm font-bold flex items-center gap-1 mx-auto"><!> Adicionar Primeiro Talento</button></div>'),Ho=l('<div class="space-y-6"><div class="flex justify-between items-center mb-2"><div><h3 class="text-lg font-bold text-white tracking-tight">Talentos & Habilidades</h3> <p class="text-xs text-slate-500">Suas capacidades especiais e passivas.</p></div> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 shadow-lg shadow-indigo-900/20 transition-all active:scale-95" aria-label="Adicionar Novo Talento"><!> Novo Talento</button></div> <div class="grid grid-cols-1 gap-4"><!> <!></div></div>');function Uo(M,x){dt(x,!1);const s=()=>de(je,"$character",f),[f,y]=xt(),{recoverTalent:S}=$e;function n(I,D=null){Ye.update(R=>({...R,type:I,isOpen:!0,data:D}))}Ct();var m=Ho(),T=t(m),Q=r(t(T),2);Q.__click=()=>n("talent");var o=t(Q);ht(o,{size:16}),ve(),e(Q),e(T);var g=r(T,2),z=t(g);Ie(z,1,()=>s().talents,Oe,(I,D)=>{var R=Oo(),c=t(R),j=t(c),_=t(j),p=t(_);Dt(p,{size:18}),e(_);var d=r(_,2),u=t(d,!0);e(d);var b=r(d,2);b.__click=()=>n("talent",a(D));var P=t(b);ta(P,{size:14}),e(b),e(j);var q=r(j,2),v=t(q,!0);e(q),e(c);var $=r(c,2),C=t($),V=t(C);{var U=K=>{var J=Po(),Y=r(F(J),2),pe=t(Y);Nr(pe,{size:12,class:"text-indigo-400"}),ve(),e(Y),i(K,J)},A=K=>{var J=Co(),Y=r(F(J),2),pe=t(Y,!0),le=r(pe),fe=t(le);e(le),e(Y),O(()=>{me(Y,1,`font-mono font-bold text-lg ${a(D).uses===0?"text-red-400":"text-white"}`),k(pe,a(D).uses),k(fe,`/${a(D).maxUses??""}`)}),i(K,J)};h(V,K=>{a(D).isPassive?K(U):K(A,!1)})}e(C);var B=r(C,2);{var ce=K=>{var J=Io(),Y=t(J);Y.__click=()=>S(a(D).id);var pe=t(Y);ht(pe,{size:18}),e(Y);var le=r(Y,2);le.__click=()=>n("confirm_talent",a(D));var fe=t(le);Dt(fe,{size:18}),e(le),e(J),O(()=>{Y.disabled=a(D).uses>=a(D).maxUses,Ce(Y,"aria-label",`Recuperar uso de ${a(D).name??""}`),le.disabled=a(D).uses===0,Ce(le,"aria-label",`Usar ${a(D).name??""}`)}),i(K,J)};h(B,K=>{a(D).isPassive||K(ce)})}e($),e(R),O(()=>{k(u,a(D).name),Ce(b,"aria-label",`Editar ${a(D).name??""}`),k(v,a(D).description)}),i(I,R)});var N=r(z,2);{var G=I=>{var D=jo(),R=t(D);Dt(R,{size:48,class:"mx-auto text-slate-800 mb-3"});var c=r(R,4);c.__click=()=>n("talent");var j=t(c);ht(j,{size:14}),ve(),e(c),e(D),i(I,D)};h(N,I=>{s().talents.length===0&&I(G)})}e(g),e(m),i(M,m),vt(),y()}bt(["click"]);var Ro=l('<span class="block italic text-slate-400"> </span>'),qo=l("• Def <!>",1),Lo=l('<button class="text-xs bg-slate-800 hover:bg-slate-700 px-2 py-1 rounded border border-slate-600">Usar</button>'),Fo=l("<button> </button>"),Go=l("<button>2H</button>"),Vo=l("<button>Main</button>"),Bo=l("<!> <button>Off</button>",1),Wo=l('<div class="flex justify-center gap-1"><!></div>'),Qo=l('<tr class="hover:bg-slate-900/50"><td class="p-3"><div class="font-bold text-white"> </div> <div class="text-[10px] text-slate-500"> <!> <!></div></td><td class="p-3"><span class="text-[10px] border border-slate-700 px-1 rounded uppercase bg-slate-900"> </span></td><td class="p-3 text-center"><!></td><td class="p-3 text-right font-mono"> </td><td class="p-3 text-right"><button class="text-slate-500 hover:text-white"><!></button></td></tr>'),Yo=l('<div class="space-y-4"><div class="lg:hidden"><!></div> <div class="flex justify-between items-center"><h3 class="text-xs font-bold text-slate-500 uppercase">Inventário</h3> <button class="text-xs bg-indigo-600 hover:bg-indigo-500 px-3 py-1.5 rounded text-white font-bold flex items-center gap-1"><!> Novo Item</button></div> <div class="bg-slate-950 rounded-lg border border-slate-800 overflow-hidden"><table class="w-full text-sm text-left"><thead class="bg-slate-900 text-slate-400 font-bold uppercase text-[10px]"><tr><th class="p-3">Item</th><th class="p-3">Tipo</th><th class="p-3 text-center">Ações / Equipar</th><th class="p-3 text-right">Qtd</th><th class="p-3 w-8"></th></tr></thead><tbody class="divide-y divide-slate-800 text-slate-300"></tbody></table></div></div>');function Ko(M,x){dt(x,!1);const s=()=>de(je,"$character",f),[f,y]=xt(),{useConsumable:S,equipItem:n}=$e;function m(R,c=null){Ye.update(j=>({...j,type:R,isOpen:!0,data:c}))}Ct();var T=Yo(),Q=t(T),o=t(Q);Oa(o,{}),e(Q);var g=r(Q,2),z=r(t(g),2);z.__click=()=>m("item");var N=t(z);ht(N,{size:14}),ve(),e(z),e(g);var G=r(g,2),I=t(G),D=r(t(I));Ie(D,5,()=>s().equipment,Oe,(R,c)=>{var j=Qo(),_=t(j),p=t(_),d=t(p,!0);e(p);var u=r(p,2),b=t(u),P=r(b);{var q=W=>{var ue=Ro(),Me=t(ue,!0);e(ue),O(()=>k(Me,a(c).notes)),i(W,ue)};h(P,W=>{a(c).notes&&W(q)})}var v=r(P,2);{var $=W=>{var ue=qo(),Me=r(F(ue));{var qe=ee=>{var be=Jt();O(()=>k(be,`Fixed ${a(c).defenseFixed??""}`)),i(ee,be)},Ee=ee=>{var be=Jt();O(()=>k(be,`+${a(c).defenseMod??""}`)),i(ee,be)};h(Me,ee=>{a(c).defenseFixed?ee(qe):ee(Ee,!1)})}i(W,ue)};h(v,W=>{a(c).type===Nt.ARMOR&&W($)})}e(u),e(_);var C=r(_),V=t(C),U=t(V,!0);e(V),e(C);var A=r(C),B=t(A);{var ce=W=>{var ue=Lo();ue.__click=()=>S(a(c)),O(()=>{ue.disabled=a(c).quantity<=0,Ce(ue,"aria-label",`Usar ${a(c).name??""}`)}),i(W,ue)},K=W=>{var ue=ie(),Me=F(ue);{var qe=ee=>{var be=Fo();be.__click=()=>n(a(c));var He=t(be,!0);e(be),O(()=>{me(be,1,`text-xs px-2 py-1 rounded border transition-colors ${a(c).equipped?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-400"}`),Ce(be,"aria-label",a(c).equipped?"Desequipar armadura":"Equipar armadura"),k(He,a(c).equipped?"Equipado":"Equipar")}),i(ee,be)},Ee=ee=>{var be=ie(),He=F(be);{var Fe=ze=>{var he=Wo(),Ue=t(he);{var Ve=ge=>{var se=Go();se.__click=()=>n(a(c),a(c).equippedState?null:"two"),O(()=>{me(se,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="two"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Ce(se,"aria-label",a(c).equippedState==="two"?"Desequipar 2H":"Equipar 2H")}),i(ge,se)},Ge=ge=>{var se=Bo(),H=F(se);{var te=xe=>{var oe=Vo();oe.__click=()=>n(a(c),a(c).equippedState==="main"?null:"main"),O(()=>{me(oe,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="main"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Ce(oe,"aria-label",a(c).equippedState==="main"?"Desequipar Main Hand":"Equipar Main Hand")}),i(xe,oe)};h(H,xe=>{a(c).grip!==va.OFF&&xe(te)})}var X=r(H,2);X.__click=()=>n(a(c),a(c).equippedState==="off"?null:"off"),O(()=>{me(X,1,`text-[10px] px-2 py-1 rounded border ${a(c).equippedState==="off"?"bg-indigo-600 border-indigo-500 text-white":"bg-slate-800 border-slate-600 text-slate-500"}`),Ce(X,"aria-label",a(c).equippedState==="off"?"Desequipar Off Hand":"Equipar Off Hand")}),i(ge,se)};h(Ue,ge=>{a(c).grip===va.TWO?ge(Ve):ge(Ge,!1)})}e(he),i(ze,he)};h(He,ze=>{(a(c).type===Nt.WEAPON||a(c).type===Nt.SHIELD)&&ze(Fe)},!0)}i(ee,be)};h(Me,ee=>{a(c).type===Nt.ARMOR?ee(qe):ee(Ee,!1)},!0)}i(W,ue)};h(B,W=>{a(c).type===Nt.CONSUMABLE?W(ce):W(K,!1)})}e(A);var J=r(A),Y=t(J,!0);e(J);var pe=r(J),le=t(pe);le.__click=()=>m("item",a(c));var fe=t(le);ta(fe,{size:14}),e(le),e(pe),e(j),O(()=>{k(d,a(c).name),k(b,`${a(c).quality??""} • ${a(c).availability??""} • ${a(c).price??""}gp `),k(U,a(c).type),k(Y,a(c).quantity),Ce(le,"aria-label",`Editar ${a(c).name??""}`)}),i(R,j)}),e(D),e(I),e(G),e(T),i(M,T),vt(),y()}bt(["click"]);var Xo=l('<div class="space-y-6"><div class="lg:hidden"><!></div> <div class="space-y-4"><div class="flex justify-between items-center mb-2"><h3 class="text-xs font-bold text-slate-500 uppercase">Anotações do Personagem</h3> <span class="text-[10px] text-slate-600 italic">Salvo automaticamente</span></div> <textarea class="w-full h-[50vh] bg-slate-950 border border-slate-800 rounded p-4 text-white resize-none focus:border-indigo-500 focus:outline-none custom-scrollbar leading-relaxed font-mono text-sm" placeholder="Escreva aqui a história, anotações de campanha, NPCs importantes, segredos..." aria-label="Anotações do personagem"></textarea></div></div>');function Jo(M,x){dt(x,!1);const s=()=>de(je,"$character",f),[f,y]=xt();Ct();var S=Xo(),n=t(S),m=t(n);ja(m,{}),e(n);var T=r(n,2),Q=r(t(T),2);Xt(Q),e(T),e(S),ke(Q,()=>s().notes,o=>qa(je,ma(s).notes=o,ma(s))),i(M,S),vt(),y()}var Zo=l('<div class="space-y-4 flex-1 flex flex-col"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <div class="lg:hidden mt-auto pt-6"><!></div></div>');function ei(M,x){dt(x,!1),Ct();var s=Zo(),f=t(s);Ca(f,{});var y=r(f,2);y.__click=()=>Ye.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var S=t(y),n=t(S);fa(n,{size:24,class:"text-white"}),e(S),ve(2),e(y);var m=r(y,2);Ia(m,{});var T=r(m,2);Ha(T,{});var Q=r(T,2),o=t(Q);ba(o,{banner:!0}),e(Q),e(s),i(M,s),vt()}bt(["click"]);var ti=l('<div class="min-h-screen flex flex-col items-center justify-center p-4"><div class="bg-slate-900 border border-slate-800 rounded-3xl p-8 max-w-md w-full text-center shadow-2xl"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><!></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight">Personagem Não Encontrado</h1> <p class="text-slate-400 mb-8">Este personagem não existe na sua base local. Crie um novo personagem através da página inicial.</p> <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all"><!> Voltar ao Início</button></div></div>'),ai=l('<!> <!> <!> <main class="max-w-6xl mx-auto md:px-4 mt-6 lg:mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6"><aside class="hidden lg:block lg:col-span-3 space-y-4"><!> <button class="w-full bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 p-4 rounded-2xl border border-emerald-500/30 flex items-center justify-center gap-3 group transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-500/20 active:scale-[0.98] cursor-pointer"><div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform"><!></div> <span class="font-black text-white uppercase tracking-wider text-sm">Teste de Sorte</span></button> <!> <!> <!> <!> <div class="pt-2"><!></div></aside> <section class="lg:col-span-9"><div class="bg-slate-900 md:rounded-xl md:border md:border-slate-800 min-h-[calc(100vh-200px)] md:min-h-[60vh] flex flex-col"><!> <div class="p-4 md:p-6 flex-1 flex flex-col"><!> <!> <!> <!> <!> <!> <!></div></div></section></main> <div class="hidden"><!></div>',1),ri=l('<div class="flex items-center justify-center min-h-screen"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div></div>'),si=l('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-28 md:pb-20 relative overflow-x-hidden"><!></div> ```',1);function Si(M,x){dt(x,!0);const s=()=>de(je,"$character",g),f=()=>de(Qt,"$normalHealth",g),y=()=>de(Yt,"$currentHealth",g),S=()=>de(Wt,"$damage",g),n=()=>de(ca,"$totalDefense",g),m=()=>de(da,"$effectiveMaxHealth",g),T=()=>de(rr,"$page",g),Q=()=>de(na,"$isHistoryOpen",g),o=()=>de(jt,"$activeTab",g),[g,z]=xt();let N=Pt(!1),G=Pt(!1),I=Pt(null);aa(()=>{if(!a(N)||a(G)||!a(I))return;const d=s(),u=f(),b=y(),P=S(),q=n(),v=m(),$={...d,normalHealth:u,currentHealth:b,damage:P};ia.set(a(I),$),d.campaignId&&$a({id:a(I),type:"player",name:d.name,level:d.level,ancestry:d.ancestry,damage:P,currentHealth:b,normalHealth:u,health:v,defense:q,initiative:d.initiative,acted:d.acted,afflictions:d.afflictions||[],campaignApproval:d.campaignApproval,imageUrl:d.imageUrl})}),aa(()=>{if(!a(N)||a(G)||!a(I)||!Ht(je).campaignId)return;const u=setInterval(()=>{const b=Ht(je);$a({id:a(I),type:"player",name:b.name,level:b.level,ancestry:b.ancestry,damage:Ht(Wt),currentHealth:Ht(Yt),normalHealth:Ht(Qt),health:Ht(da),defense:Ht(ca),initiative:b.initiative,acted:b.acted,afflictions:b.afflictions||[],campaignApproval:b.campaignApproval,imageUrl:b.imageUrl})},3e4);return()=>clearInterval(u)}),aa(()=>{const d=T().params.id;d&&d!==a(I)&&D(d)});async function D(d){if(Ae(N,!1),Ae(G,!1),Ae(I,d,!0),await Za(),ia.has(d)){const u=ia.get(d);je.set({...er,...u,id:d}),u.normalHealth!==void 0&&Qt.set(u.normalHealth),u.currentHealth!==void 0&&Yt.set(u.currentHealth),u.damage!==void 0&&Wt.set(u.damage);const b=Ht(je);b.campaignId&&tr(b.campaignId,!1,a(I))}else Ae(G,!0);window.innerWidth<768?jt.set("stats"):Ht(jt)==="stats"&&jt.set("acoes"),Ae(N,!0)}Ra(()=>{ar()});var R=si(),c=F(R),j=t(c);{var _=d=>{var u=ie(),b=F(u);{var P=v=>{var $=ti(),C=t($),V=t(C),U=t(V);fr(U,{size:40}),e(V);var A=r(V,6);A.__click=()=>Da(Ea("/"));var B=t(A);yr(B,{size:18}),ve(),e(A),e(C),e($),i(v,$)},q=v=>{var $=ai(),C=F($);gr(C,{get isOpen(){return Q()},onClose:()=>na.set(!1)});var V=r(C,2);Gs(V,{});var U=r(V,2);Br(U,{});var A=r(U,2),B=t(A),ce=t(B);Ca(ce,{});var K=r(ce,2);K.__click=()=>Ye.set({type:"pre_roll",isOpen:!0,data:{type:"luck",source:{name:"Sorte"}}});var J=t(K),Y=t(J);fa(Y,{size:24,class:"text-white"}),e(J),ve(2),e(K);var pe=r(K,2);Ia(pe,{});var le=r(pe,2);Oa(le,{});var fe=r(le,2);ja(fe,{});var W=r(fe,2);Ha(W,{});var ue=r(W,2),Me=t(ue);ba(Me,{}),e(ue),e(B);var qe=r(B,2),Ee=t(qe),ee=t(Ee);vo(ee,{});var be=r(ee,2),He=t(be);{var Fe=Z=>{ei(Z,{})};h(He,Z=>{o()==="stats"&&Z(Fe)})}var ze=r(He,2);{var he=Z=>{_o(Z,{})};h(ze,Z=>{o()==="acoes"&&Z(he)})}var Ue=r(ze,2);{var Ve=Z=>{To(Z,{})};h(Ue,Z=>{o()==="efeitos"&&Z(Ve)})}var Ge=r(Ue,2);{var ge=Z=>{yo(Z,{})};h(Ge,Z=>{o()==="magias"&&Z(ge)})}var se=r(Ge,2);{var H=Z=>{Uo(Z,{})};h(se,Z=>{o()==="talentos"&&Z(H)})}var te=r(se,2);{var X=Z=>{Ko(Z,{})};h(te,Z=>{o()==="equipamento"&&Z(X)})}var xe=r(te,2);{var oe=Z=>{Jo(Z,{})};h(xe,Z=>{o()==="notas"&&Z(oe)})}e(be),e(Ee),e(qe),e(A);var Se=r(A,2),Le=t(Se);ba(Le,{banner:!0}),e(Se),i(v,$)};h(b,v=>{a(G)?v(P):v(q,!1)})}i(d,u)},p=d=>{var u=ri();i(d,u)};h(j,d=>{a(N)?d(_):d(p,!1)})}e(c),ve(),i(M,R),vt(),z()}bt(["click"]);export{Si as component,zi as universal};

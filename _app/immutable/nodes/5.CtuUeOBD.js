const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/0xdWb0YV.js","../chunks/COX-Du3q.js","../chunks/B1e8pvGG.js","../chunks/-uljABfF.js"])))=>i.map(i=>d[i]);
import{a as U,s as Fe,_ as Ye}from"../chunks/-uljABfF.js";import"../chunks/DsnmJJEf.js";import{d as Ke,o as Qe,s as l}from"../chunks/B1e8pvGG.js";import{d as ke,e as G,a as _,p as Xe,f as x,l as r,s as i,t as u,k as Ze,o as g,j as e,G as E,H as C,w as s,I as et,n as tt}from"../chunks/COX-Du3q.js";import{e as at,$ as rt,s as be,i as st,r as it,a as ot}from"../chunks/CEeMCE7T.js";import{l as nt,s as lt,i as w}from"../chunks/-cW7HwuZ.js";import{c as dt,a as vt,i as ct,b as mt}from"../chunks/0xdWb0YV.js";import{p as pt}from"../chunks/BywTOrBo.js";import{G as he,C as _t,g as le,l as ft,D as Y}from"../chunks/D7aE_nB-.js";import{g as we}from"../chunks/Btz4KpAm.js";import{U as ut,r as $e,W as gt}from"../chunks/BUN4r-RS.js";import{v as xt}from"../chunks/BYmFNSF7.js";import{C as bt}from"../chunks/yCfd3Xoi.js";import"../chunks/DRxX7t_H.js";import{I as ht,s as wt}from"../chunks/DJJOPez5.js";function ye(K,V){const Q=nt(V,["children","$$slots","$$events","$$legacy"]);const N=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];ht(K,lt({name:"triangle-alert"},()=>Q,{get iconNode(){return N},children:(n,I)=>{var J=ke(),z=G(J);wt(z,V,"default",{}),_(n,J)},$$slots:{default:!0}}))}var $t=x('<span class="block text-xs mt-1 uppercase tracking-widest text-slate-500 font-black"> </span>'),yt=x('<div class="mt-4 px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-full text-[10px] text-amber-500 font-bold uppercase tracking-wider animate-pulse flex items-center gap-2"><!> </div>'),kt=x('<div class="mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-3 flex items-center gap-3"><!> <p class="text-red-400 text-sm font-bold"> </p></div>'),Ct=x('<p class="text-red-400 text-xs mt-1"> </p>'),It=x('<div class="mb-6 bg-slate-950/50 p-4 rounded-xl border border-slate-800"><label for="campaign-pwd-input" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-indigo-500 animate-pulse"></div> </label> <input id="campaign-pwd-input" type="password"/> <!></div>'),zt=x('<button><div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold"> </div> <div class="flex-1 text-left"><div class="font-bold text-sm"> </div> <div class="text-[10px] opacity-60 flex items-center gap-1"> <span class="w-1 h-1 rounded-full bg-slate-600"></span> <!> </div></div> <!></button>'),Nt=x("<div> </div> <div> </div>",1),jt=x('<div class="text-xs text-slate-500 max-w-[200px]">Você tem personagens, mas eles são de outro sistema de jogo. Crie um personagem para <strong> </strong>.</div>'),Mt=x('<div class="text-xs text-slate-500"> </div>'),Et=x('<div class="flex flex-col items-center gap-2"><!> <div class="text-amber-500 font-bold"> </div> <!></div>'),Gt=x('<div class="text-center py-8 text-slate-600 italic text-sm space-y-2"><!></div>'),St=x('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),At=x('<div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> ',1),Ot=x('<div class="min-h-screen bg-slate-950 flex items-center justify-center p-4"><div class="max-w-md w-full bg-slate-900 border border-slate-800 rounded-2xl p-8 shadow-2xl"><div class="flex flex-col items-center text-center mb-8"><div class="w-16 h-16 bg-indigo-600/20 rounded-full flex items-center justify-center text-indigo-400 mb-4 border border-indigo-500/30"><!></div> <h1 class="text-2xl font-bold text-white mb-2"> </h1> <p class="text-slate-400"> <span class="text-indigo-400 font-bold"> </span> <!></p> <div class="mt-4 inline-flex items-center gap-1.5 px-3 py-1 rounded bg-slate-800 text-[10px] text-slate-400 border border-slate-700 font-bold uppercase tracking-wider"><!> </div> <!></div> <!> <!> <div class="space-y-4 mb-8"><label for="char-selector" class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"> </label> <div id="char-selector" class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div> <div class="flex gap-3"><button class="flex-1 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-bold transition-all"> </button> <button class="flex-1 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold transition-all shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-2"><!></button></div></div></div> <!>',1);function Qt(K,V){Xe(V,!0);const Q=()=>U(pt,"$page",z),N=()=>U(dt,"$character",z),n=()=>U(rt,"$t",z),I=()=>U(ft,"$liveCharacters",z),J=()=>U(ct,"$isGmOnline",z),[z,Ce]=Fe(),S=Q().params.id;let A=C(()=>N().campaignName||n()("invite.searching")),X=C(()=>N().gmName||"..."),L=C(()=>N().passwordHash),R=C(()=>N().system||Y),de=C(()=>I().filter(a=>!a.campaignId&&(a.system||Y)===e(R))),Ie=C(()=>I().some(a=>!a.campaignId&&(a.system||Y)!==e(R))),h=E(null),W=E(!1),O=E(""),P=E(!1),q=E(!1),j=E("");Qe(()=>{S&&vt(S,!1)});async function ze(){if(g(j,""),!e(h)||!S)return;if(I().find(t=>t.id===e(h))?.campaignId){g(j,n()("invite.already_in_campaign"),!0);return}if(e(L)){if(!e(O)){g(P,!0);return}g(q,!0);const t=await xt(e(O),e(L));if(g(q,!1),!t){g(P,!0);return}}g(P,!1),g(W,!0)}function Ne(){if(!e(h)||!S)return;const a=I().find(t=>t.id===e(h));if(a){if(a.campaignId){g(j,n()("invite.already_in_campaign"),!0),g(W,!1);return}Ye(async()=>{const{charactersMap:t}=await import("../chunks/0xdWb0YV.js").then(o=>o.S);return{charactersMap:t}},__vite__mapDeps([0,1,2,3]),import.meta.url).then(({charactersMap:t})=>{t.set(e(h),{...a,campaignId:S,campaignName:e(A),gmName:e(X),campaignApproval:"pending"}),we($e("/characters/[id]",{id:e(h)}))})}}var ve=Ot(),Z=G(ve),ce=r(Z),ee=r(ce),te=r(ee),je=r(te);ut(je,{size:32}),s(te);var ae=i(te,2),Me=r(ae,!0);s(ae);var re=i(ae,2),me=r(re),se=i(me),Ee=r(se,!0);s(se);var Ge=i(se,2);{var Se=a=>{var t=$t(),o=r(t);s(t),u(d=>l(o,`${d??""}: ${e(X)??""}`),[()=>n()("common.labels.master")]),_(a,t)};w(Ge,a=>{e(X)!=="..."&&a(Se)})}s(re);var ie=i(re,2),pe=r(ie);he(pe,{size:12});var Ae=i(pe);s(ie);var Oe=i(ie,2);{var Pe=a=>{var t=yt(),o=r(t);gt(o,{size:12});var d=i(o);s(t),u(p=>l(d,` ${p??""}`),[()=>n()("invite.waiting_gm")]),_(a,t)};w(Oe,a=>{J()||a(Pe)})}s(ee);var _e=i(ee,2);{var Te=a=>{var t=kt(),o=r(t);ye(o,{size:20,class:"text-red-500 mb-0.5"});var d=i(o,2),p=r(d,!0);s(d),s(t),u(()=>l(p,e(j))),_(a,t)};w(_e,a=>{e(j)&&a(Te)})}var fe=i(_e,2);{var De=a=>{var t=It(),o=r(t),d=i(r(o));s(o);var p=i(o,2);it(p);var c=i(p,2);{var m=v=>{var f=Ct(),y=r(f,!0);s(f),u(k=>l(y,k),[()=>n()("invite.password.incorrect")]),_(v,f)};w(c,v=>{e(P)&&v(m)})}s(t),u((v,f)=>{l(d,` ${v??""}`),ot(p,"placeholder",f),be(p,1,`w-full bg-slate-900 border ${e(P)?"border-red-500":"border-slate-700"} rounded-lg p-3 text-white outline-none focus:border-indigo-500 transition-colors`)},[()=>n()("invite.password.required"),()=>n()("invite.password.placeholder")]),mt(p,()=>e(O),v=>g(O,v)),_(a,t)};w(fe,a=>{e(L)&&a(De)})}var oe=i(fe,2),ne=r(oe),He=r(ne,!0);s(ne);var ue=i(ne,2),ge=r(ue);at(ge,17,()=>e(de),st,(a,t)=>{var o=zt();o.__click=()=>{g(h,e(t).id,!0),g(j,"")};var d=r(o),p=r(d,!0);s(d);var c=i(d,2),m=r(c),v=r(m,!0);s(m);var f=i(m,2),y=r(f),k=i(y,3);he(k,{size:8});var T=i(k);s(f),s(c);var D=i(c,2);{var $=b=>{bt(b,{size:16,class:"text-indigo-400"})};w(D,b=>{e(h)===e(t).id&&b($)})}s(o),u((b,M,H)=>{be(o,1,`w-full flex items-center gap-3 p-3 rounded-xl border transition-all ${e(h)===e(t).id?"bg-indigo-600/20 border-indigo-500 text-white":"bg-slate-950 border-slate-800 text-slate-400 hover:border-slate-700"}`),l(p,b),l(v,e(t).name),l(y,`${M??""} ${e(t).level??""} • ${e(t).ancestry??""} `),l(T,` ${H??""}`)},[()=>e(t).name.charAt(0),()=>n()("common.labels.level"),()=>le(e(t).system||Y).name]),_(a,o)});var Ue=i(ge,2);{var Ve=a=>{var t=Gt(),o=r(t);{var d=c=>{var m=Nt(),v=G(m),f=r(v,!0);s(v);var y=i(v,2),k=r(y,!0);s(y),u((T,D)=>{l(f,T),l(k,D)},[()=>n()("invite.no_characters"),()=>n()("invite.create_first")]),_(c,m)},p=c=>{var m=Et(),v=r(m);ye(v,{size:24,class:"text-amber-500"});var f=i(v,2),y=r(f,!0);s(f);var k=i(f,2);{var T=$=>{var b=jt(),M=i(r(b)),H=r(M,!0);s(M),tt(),s(b),u(Be=>l(H,Be),[()=>le(e(R)).name]),_($,b)},D=$=>{var b=Mt(),M=r(b,!0);s(b),u(H=>l(M,H),[()=>n()("invite.create_or_leave")]),_($,b)};w(k,$=>{e(Ie)?$(T):$(D,!1)})}s(m),u($=>l(y,$),[()=>n()("invite.all_in_campaigns")]),_(c,m)};w(o,c=>{I().length===0?c(d):c(p,!1)})}s(t),_(a,t)};w(Ue,a=>{e(de).length===0&&a(Ve)})}s(ue),s(oe);var xe=i(oe,2),B=r(xe);B.__click=()=>we($e("/"));var Je=r(B,!0);s(B);var F=i(B,2);F.__click=ze;var Le=r(F);{var Re=a=>{var t=St(),o=i(G(t));u(d=>l(o,` ${d??""}`),[()=>n()("invite.validating")]),_(a,t)},We=a=>{var t=ke(),o=G(t);{var d=c=>{var m=At(),v=i(G(m));u(f=>l(v,` ${f??""}`),[()=>n()("invite.loading")]),_(c,m)},p=c=>{var m=et();u(v=>l(m,v),[()=>n()("invite.accept")]),_(c,m)};w(o,c=>{e(A)===n()("invite.searching")?c(d):c(p,!1)},!0)}_(a,t)};w(Le,a=>{e(q)?a(Re):a(We,!1)})}s(F),s(xe),s(ce),s(Z);var qe=i(Z,2);{let a=C(()=>n()("invite.confirm_title")),t=C(()=>n()("invite.confirm_message",{values:{campaign:e(A),character:I().find(o=>o.id===e(h))?.name}}));_t(qe,{get isOpen(){return e(W)},get title(){return e(a)},get message(){return e(t)},onConfirm:Ne,onCancel:()=>g(W,!1)})}u((a,t,o,d,p)=>{l(Me,a),l(me,`${t??""} `),l(Ee,e(A)),l(Ae,` ${o??""}`),l(He,d),l(Je,p),F.disabled=!e(h)||e(q)||!!e(L)&&!e(O)||e(A)==="Buscando campanha..."},[()=>n()("invite.title"),()=>n()("invite.invited_to"),()=>le(e(R)).name,()=>n()("invite.select_character"),()=>n()("invite.decline")]),_(K,ve),Ze(),Ce()}Ke(["click"]);export{Qt as component};

import"../chunks/DsnmJJEf.js";import{B as At,o as Ge,k as d,p as ra,v as ia,j as c,q as t,x as a,u as s,z as xe,A as e,t as _,O as Ra,w as k,y as bt,n as ba,a2 as _a,at as pa}from"../chunks/CeF9Pysg.js";import{d as na,s as r,o as Ga,g as Ta,e as ha}from"../chunks/CG7HK1rV.js";import{l as oa,s as la,i as y,p as Kt}from"../chunks/dZMd9PJ3.js";import{e as Ze,s as tt,i as $t,$ as ta,r as ht,a as _e,h as Ua,g as ps,j as ms}from"../chunks/BdIRB7Hx.js";import{a as xa,s as qt}from"../chunks/CIaeXpBv.js";import{p as fs}from"../chunks/C5h3wmGA.js";import{d as Wa,m as Ma,j as gs,c as Qa,e as Qt,n as Pa,o as hs,q as ya,t as Ea,u as Oa,b as ct,v as Ya,f as Va,g as Aa,x as ys,y as ws,z as ks}from"../chunks/DOdbJzaW.js";import{C as Ka,D as wa,l as zs,b as Fa,c as es,a as Cs}from"../chunks/BaxZDONH.js";import{b as $s,t as Ia,f as Sa}from"../chunks/xr51uyWC.js";import{U as ts,C as Za,W as as,r as ss}from"../chunks/Bi8qQKWQ.js";import{A as Os,a as js,b as ja,B as Es,T as Ms,E as qa,M as rs,G as ga,H as is,C as Na,R as Is,c as Ss,I as ns,s as os,d as ls,S as ds,L as Rs,e as vs,f as Ns,D as ka,g as Ds}from"../chunks/DE5U84Hl.js";import{k as Ba}from"../chunks/Kfm9o0Gg.js";import{M as As,X as ma,P as ea,a as Xa,c as Ts,T as sa,b as Us}from"../chunks/BsLGdO_u.js";import{C as cs,G as ua,P as Ha,S as Ps,a as Hs}from"../chunks/BcyHxcqt.js";import"../chunks/C3FPqVk7.js";import{I as da,s as va}from"../chunks/DhGkR45b.js";import{b as us}from"../chunks/CWVXqVlC.js";import{g as Ls}from"../chunks/B9Uq1lfc.js";import{W as Fs}from"../chunks/BdfQ1NTG.js";function qs(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["path",{d:"m6 9 6 6 6-6"}]];da(Q,la({name:"chevron-down"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function Bs(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["path",{d:"m18 15-6-6-6 6"}]];da(Q,la({name:"chevron-up"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function Js(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];da(Q,la({name:"copy"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function Gs(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"}]];da(Q,la({name:"flame"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function Ws(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];da(Q,la({name:"grip-vertical"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function La(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];da(Q,la({name:"layers"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function bs(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["path",{d:"m16 6 4 14"}],["path",{d:"M12 6v14"}],["path",{d:"M8 8v12"}],["path",{d:"M4 4v16"}]];da(Q,la({name:"library"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function Qs(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}],["path",{d:"M21 21v.01"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}],["path",{d:"M3 12h.01"}],["path",{d:"M12 3h.01"}],["path",{d:"M12 16v.01"}],["path",{d:"M16 12h1"}],["path",{d:"M21 12v.01"}],["path",{d:"M12 21v-1"}]];da(Q,la({name:"qr-code"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function Ja(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];da(Q,la({name:"save"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function _s(Q,n){const o=oa(n,["children","$$slots","$$events","$$legacy"]);const ne=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21"}]];da(Q,la({name:"swords"},()=>o,{get iconNode(){return ne},children:(D,p)=>{var L=At(),W=Ge(L);va(W,n,"default",{}),d(D,L)},$$slots:{default:!0}}))}function Vs(Q){let n=!1;return document.body&&(document.body.appendChild(Q),n=!0),{destroy(){n&&Q.parentNode&&Q.parentNode.removeChild(Q)}}}var Zs=c("<button> <!></button>"),Xs=c('<p class="text-xs text-slate-600 italic"> </p>'),Ys=c('<div class="text-xs leading-tight"><span class="text-red-400 font-bold"> </span> <span class="text-slate-400"> </span></div>'),Ks=c('<div class="space-y-1"></div>'),er=c('<div class="grid grid-cols-2 gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar p-1"></div> <div class="mt-4 pt-3 border-t border-slate-800 flex flex-col gap-2"><div class="p-3 bg-slate-900/50 rounded-lg border border-slate-700/50 min-h-[60px]"><p class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </p> <!></div> <div class="flex justify-end mt-2"><button class="bg-indigo-600 text-white px-4 py-2 rounded-xl font-bold text-sm shadow hover:bg-indigo-500 transition-colors w-full sm:w-auto"> </button></div></div>',1),tr=c("<div><!></div>");function ar(Q,n){ra(n,!0);const o=()=>qt(ta,"$t",ne),[ne,D]=xa();var p=At(),L=Ge(p);{var W=i=>{var f=tr(),Z=t(f);{let Re=xe(()=>o()("session.affliction_modal.title"));As(Z,{get isOpen(){return n.isOpen},get onClose(){return n.onClose},get title(){return a(Re)},maxWidth:"max-w-md",children:(me,Te)=>{var ye=er(),ae=Ge(ye);Ze(ae,21,()=>Object.keys(Os),$t,(fe,Se)=>{const ut=xe(()=>n.afflictions.includes(a(Se)));var qe=Zs();qe.__click=()=>n.onToggle(a(Se));var T=t(qe),M=s(T);{var ze=Ue=>{cs(Ue,{size:14,class:"text-red-400"})};y(M,Ue=>{a(ut)&&Ue(ze)})}e(qe),_(Ue=>{tt(qe,1,`flex items-center justify-between px-3 py-2 rounded-lg border text-xs font-bold transition-all ${a(ut)?"bg-red-500/20 border-red-500 text-red-100":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-750"}`),r(T,`${Ue??""} `)},[()=>o()(`character.afflictions.${a(Se)}`)]),d(fe,qe)}),e(ae);var V=s(ae,2),we=t(V),ke=t(we),Rt=t(ke,!0);e(ke);var kt=s(ke,2);{var Ht=fe=>{var Se=Xs(),ut=t(Se,!0);e(Se),_(qe=>r(ut,qe),[()=>o()("session.affliction_modal.none_selected")]),d(fe,Se)},$e=fe=>{var Se=Ks();Ze(Se,21,()=>n.afflictions,$t,(ut,qe)=>{var T=Ys(),M=t(T),ze=t(M);e(M);var Ue=s(M,2),dt=t(Ue,!0);e(Ue),e(T),_((Ot,rt)=>{r(ze,`${Ot??""}:`),r(dt,rt)},[()=>o()(`character.afflictions.${a(qe)}`),()=>o()(`sofww.afflictions.${a(qe).toLowerCase().replace(" ","_")}.effect`)]),d(ut,T)}),e(Se),d(fe,Se)};y(kt,fe=>{n.afflictions.length===0?fe(Ht):fe($e,!1)})}e(we);var Ne=s(we,2),Xe=t(Ne);Xe.__click=function(...fe){n.onClose?.apply(this,fe)};var at=t(Xe,!0);e(Xe),e(Ne),e(V),_((fe,Se)=>{r(Rt,fe),r(at,Se)},[()=>o()("session.affliction_modal.effects"),()=>o()("session.affliction_modal.done")]),d(me,ye)},$$slots:{default:!0}})}e(f),js(f,Re=>Vs?.(Re)),d(i,f)};y(L,i=>{n.isOpen&&i(W)})}d(Q,p),ia(),D()}na(["click"]);var sr=c('<div class="absolute top-0 right-0 bg-gradient-to-l from-yellow-600/20 to-transparent border-l border-b border-yellow-500/30 text-yellow-500 text-[9px] font-black tracking-widest px-3 py-1 rounded-bl-xl z-20 uppercase shadow-[0_0_10px_rgba(234,179,8,0.2)]"> </div>'),rr=c('<div class="absolute inset-0 bg-red-950/40 animate-pulse z-0 pointer-events-none"></div>'),ir=c('<span class="text-[9px] font-black bg-red-950/40 text-red-500 px-1.5 py-0.5 rounded border border-red-900/30 uppercase tracking-wider flex-shrink-0"> </span>'),nr=c("<button><!></button>"),or=c('<button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800/50 text-slate-600 hover:text-red-400 hover:bg-red-950/30 border border-slate-700/50 transition-colors"><!></button>'),lr=c('<div><div class="absolute inset-0 bg-gradient-to-b from-white/20 to-transparent"></div></div>'),dr=c('<div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-emerald-400/30 to-emerald-500/20 z-10"><div class="absolute inset-0 bg-gradient-to-b from-white/10 to-transparent"></div></div>'),vr=c('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),cr=c('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-20"><span class="text-[9px] font-black uppercase text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] tracking-widest leading-none mt-0.5"> </span></div>'),ur=c('<div class="flex flex-col items-center justify-between bg-cyan-950/20 border border-cyan-500/30 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-cyan-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div>'),br=c('<button class="text-[9px] bg-red-500/10 text-red-400 px-1.5 py-0.5 rounded border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/40 transition-all flex items-center gap-1 group/btn"> <!></button>'),_r=c('<div class="bg-slate-900/50 p-2 rounded border border-slate-800/50 text-center"><span class="text-[9px] text-slate-500 uppercase font-black block mb-0.5"> </span> <div class="text-white font-bold font-mono text-lg leading-none"> </div> <div> </div></div>'),xr=c('<div class="grid grid-cols-2 gap-4 mb-4"><div class="p-3 rounded-xl bg-purple-950/20 border border-purple-500/30 flex justify-between items-center group/ins"><div><span class="text-[9px] text-purple-400 uppercase font-black block"> </span> <span class="text-white font-bold text-lg font-mono leading-none"> </span></div> <!></div> <div class="p-3 rounded-xl bg-red-950/20 border border-red-500/30 flex justify-between items-center group/cor"><div><span class="text-[9px] text-red-400 uppercase font-black block"> </span> <span class="text-white font-bold text-lg font-mono leading-none"> </span></div> <!></div></div>'),pr=c("<!> ",1),mr=c('<div><div class="text-emerald-500 text-[10px] font-black uppercase mb-2 flex items-center gap-2"> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="flex flex-wrap gap-2"></div></div>'),fr=c('<div class="text-sm bg-slate-900/30 p-2 rounded border border-slate-800/30"><span class="font-bold text-slate-300"> </span> <span class="text-slate-400 text-xs block mt-1 leading-relaxed"> </span></div>'),gr=c('<div><div> <span class="h-px flex-1 bg-current opacity-20"></span></div> <div class="grid gap-2"></div></div>'),hr=c('<div class="border-t border-slate-800/50 bg-slate-950/30 p-4"><div class="mb-4"><div class="text-slate-500 font-bold uppercase text-[10px] mb-2 flex items-center gap-2"><span> </span> <div class="h-px flex-1 bg-slate-800"></div></div> <div class="grid grid-cols-4 gap-2"></div></div> <!> <div class="grid grid-cols-2 gap-4 mb-4"><div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div> <div class="p-2 rounded bg-slate-900/50 border border-slate-800/50 flex flex-col items-center"><span class="text-[9px] text-slate-500 uppercase font-black"> </span> <span class="text-white font-bold"> </span></div></div> <div class="space-y-4"><!> <!></div></div>'),yr=c('<div><!> <!> <div class="relative z-10 p-4"><div class="flex items-start gap-4 mb-3"><div class="relative flex-shrink-0"><div><!></div> <button><!></button></div> <div class="flex-1 min-w-0"><div class="flex justify-between items-start mb-1"><div class="flex flex-col min-w-0 mr-2"><div class="flex items-center gap-2"><h3> </h3> <!></div></div> <div class="flex gap-1 flex-shrink-0"><button class="w-7 h-7 flex items-center justify-center rounded bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700 border border-slate-700/50 transition-colors"><!></button> <!></div></div>  <div class="relative w-full h-3.5 sm:h-4 bg-slate-950 rounded-full border border-white/5 overflow-hidden shadow-inner group-hover:border-white/20 transition-all mb-2"><div></div> <!> <!> <!></div> <div class="flex flex-col sm:flex-row gap-3"><div class="flex items-start gap-1.5"><div class="flex flex-col items-center justify-between bg-slate-900 border border-slate-700 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm"><span class="text-[9px] font-black text-slate-400 uppercase tracking-wider mb-0.5"> </span> <span class="text-xl font-bold text-white font-mono leading-none"> </span></div> <div class="flex flex-col items-center justify-between bg-red-950/30 border border-red-900/50 rounded-lg p-1.5 w-[4.5rem] h-[3.75rem] shadow-sm relative group/dmg"><span class="text-[9px] font-black text-red-400 uppercase tracking-wider mb-0.5"> </span> <input type="number" class="w-full bg-transparent text-center text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none placeholder-red-800"/> <span class="absolute -top-1 -right-1 flex h-2 w-2 opacity-0 group-hover/dmg:opacity-100 transition-opacity"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span></div> <div><span> </span> <div class="flex items-baseline gap-0.5 justify-center w-full"><input type="number" class="w-full bg-transparent text-right text-white font-mono font-bold text-xl focus:outline-none p-0 leading-none"/> <span class="text-[10px] text-slate-500 font-mono self-end mb-0.5 opacity-70"> </span></div></div> <!></div> <div class="flex flex-wrap gap-1.5 items-center flex-1"><!> <button class="text-[10px] sm:text-[9px] font-bold text-slate-500 hover:text-indigo-400 px-1.5 py-0.5 rounded border border-transparent hover:border-indigo-500/30 hover:bg-indigo-500/10 transition-all flex items-center gap-1 whitespace-nowrap"><!> </button></div></div></div></div></div>  <!> <!></div>');function wr(Q,n){ra(n,!0);const o=()=>qt(ta,"$t",ne),[ne,D]=xa();let p=Kt(n,"updateEnemy",3,(x,u)=>{}),L=Kt(n,"updatePlayer",3,(x,u)=>{}),W=Kt(n,"removeFromCombat",3,x=>{}),i=xe(()=>n.entity.type==="player"),f=xe(()=>n.entity.system==="sofdl"),Z=xe(()=>n.entity.damage||0),Re=xe(()=>n.entity.normalHealth||n.entity.health||10),me=xe(()=>n.entity.currentHealth??a(Re)),Te=xe(()=>a(Z)>=a(me)),ye=xe(()=>a(Z)>=a(me)/2&&!a(Te)),ae=xe(()=>a(me)>0?Math.min(100,Math.max(0,a(Z)/a(me)*100)):100),V=bt(!1),we=bt(!1);Ra(()=>{const x=n.entity.afflictions||[],u=x.includes("Incapacitated");if(a(Te)&&!u){const m={afflictions:[...x,"Incapacitated"]};n.entity.type==="player"?ke(m):p()(n.entity.instanceId,m)}else if(!a(Te)&&u){const m={afflictions:x.filter(be=>be!=="Incapacitated")};n.entity.type==="player"?ke(m):p()(n.entity.instanceId,m)}});function ke(x){if(n.entity.type!=="player")return;const u=Wa.get(n.entity.id);u&&Wa.set(n.entity.id,{...u,...x}),L()(n.entity.id,x),Ma({id:n.entity.id,...x})}function Rt(x){const u=parseInt(x.target.value);if(isNaN(u))return;const m={damage:Math.max(0,u)};n.entity.type==="player"?ke(m):p()(n.entity.instanceId,m)}function kt(x){const u=parseInt(x.target.value);if(isNaN(u))return;const g=Math.max(0,u);let m=a(Z);g<a(Z)&&(m=g);const be={currentHealth:g,damage:m};n.entity.type==="player"?ke(be):p()(n.entity.instanceId,be)}function Ht(){const x=!n.entity.acted;n.entity.type==="player"?ke({acted:x}):p()(n.entity.instanceId,{acted:x})}function $e(){n.entity.type==="player"&&ke({initiative:!n.entity.initiative})}function Ne(x){const u=n.entity.afflictions||[],m={afflictions:u.includes(x)?u.filter(be=>be!==x):[...u,x]};n.entity.type==="player"?ke(m):p()(n.entity.instanceId,m)}var Xe=yr(),at=t(Xe);{var fe=x=>{var u=sr(),g=t(u,!0);e(u),_(m=>r(g,m),[()=>o()("session.combat_card.initiative")]),d(x,u)};y(at,x=>{a(i)&&n.entity.initiative&&x(fe)})}var Se=s(at,2);{var ut=x=>{var u=rr();d(x,u)};y(Se,x=>{a(Te)&&x(ut)})}var qe=s(Se,2),T=t(qe),M=t(T),ze=t(M),Ue=t(ze);Ba(Ue,()=>n.entity.imageUrl,x=>{{let u=xe(()=>n.entity.name.charAt(0));ja(x,{get hash(){return n.entity.imageUrl},get alt(){return n.entity.name},size:"custom",get fallbackText(){return a(u)}})}}),e(ze);var dt=s(ze,2);dt.__click=Ht;var Ot=t(dt);{var rt=x=>{Xa(x,{size:14,class:""})},yt=x=>{var u=At(),g=Ge(u);{var m=Pe=>{cs(Pe,{size:14})},be=Pe=>{_s(Pe,{size:14})};y(g,Pe=>{n.entity.acted?Pe(m):Pe(be,!1)},!0)}d(x,u)};y(Ot,x=>{a(Te)?x(rt):x(yt,!1)})}e(dt),e(M);var zt=s(M,2),ee=t(zt),pe=t(ee),He=t(pe),We=t(He),_t=t(We,!0);e(We);var Qe=s(We,2);{var ce=x=>{var u=ir(),g=t(u);e(u),_(()=>r(g,`Dif ${n.entity.difficulty??""}`)),d(x,u)};y(Qe,x=>{a(i)||x(ce)})}e(He),e(pe);var Ee=s(pe,2),q=t(Ee);q.__click=()=>k(V,!a(V));var ue=t(q);{var Me=x=>{Bs(x,{size:14})},De=x=>{qs(x,{size:14})};y(ue,x=>{a(V)?x(Me):x(De,!1)})}e(q);var Fe=s(q,2);{var ot=x=>{var u=nr();u.__click=$e;var g=t(u);Gs(g,{size:14}),e(u),_(m=>{tt(u,1,`w-7 h-7 flex items-center justify-center rounded transition-all ${n.entity.initiative?"bg-yellow-500 text-yellow-950 shadow-lg shadow-yellow-500/20":"bg-slate-800 text-slate-500 hover:text-white hover:bg-slate-700"}`),_e(u,"title",m)},[()=>o()("session.combat_card.initiative")]),d(x,u)},Be=x=>{var u=or();u.__click=()=>W()(n.entity.instanceId);var g=t(u);ma(g,{size:14}),e(u),d(x,u)};y(Fe,x=>{a(i)?x(ot):x(Be,!1)})}e(Ee),e(ee);var it=s(ee,2),wt=t(it),Ut=s(wt,2);{var It=x=>{var u=lr();_(()=>{tt(u,1,`absolute top-0 left-0 h-full transition-all duration-500 ease-out z-10
                            ${a(Te)?"bg-gradient-to-r from-red-600 via-red-500 to-rose-500 animate-pulse":a(ae)>=80?"bg-gradient-to-r from-red-600 to-rose-500":a(ye)?"bg-gradient-to-r from-amber-600 to-orange-500":"bg-gradient-to-r from-orange-500 to-amber-400"}`),ps(u,`width: ${a(ae)??""}%`)}),d(x,u)};y(Ut,x=>{a(ae)>0&&x(It)})}var Pt=s(Ut,2);{var $=x=>{var u=dr();d(x,u)};y(Pt,x=>{a(Z)===0&&x($)})}var B=s(Pt,2);{var A=x=>{var u=vr(),g=t(u),m=t(g,!0);e(g),e(u),_(be=>r(m,be),[()=>o()("session.combat_card.incapacitated")]),d(x,u)},Ie=x=>{var u=At(),g=Ge(u);{var m=be=>{var Pe=cr(),Je=t(Pe),Ve=t(Je,!0);e(Je),e(Pe),_(xt=>r(Ve,xt),[()=>o()("session.combat_card.injured")]),d(be,Pe)};y(g,be=>{a(ye)&&be(m)},!0)}d(x,u)};y(B,x=>{a(Te)?x(A):x(Ie,!1)})}e(it);var Ye=s(it,2),Ke=t(Ye),st=t(Ke),ft=t(st),jt=t(ft,!0);e(ft);var Et=s(ft,2),et=t(Et,!0);e(Et),e(st);var U=s(st,2),j=t(U),R=t(j,!0);e(j);var ve=s(j,2);ht(ve),ve.__input=Rt,ba(2),e(U);var J=s(U,2),P=t(J),K=t(P,!0);e(P);var Ae=s(P,2),oe=t(Ae);ht(oe),oe.__input=kt;var de=s(oe,2),G=t(de);e(de),e(Ae),e(J);var Oe=s(J,2);{var le=x=>{var u=ur(),g=t(u),m=t(g,!0);e(g);var be=s(g,2),Pe=t(be,!0);e(be),e(u),_(Je=>{r(m,Je),r(Pe,n.entity.perception||10)},[()=>o()("sofdl.attributes.perception")]),d(x,u)};y(Oe,x=>{a(f)&&x(le)})}e(Ke);var Le=s(Ke,2),lt=t(Le);Ze(lt,17,()=>n.entity.afflictions||[],$t,(x,u)=>{var g=br();g.__click=()=>Ne(a(u));var m=t(g),be=s(m);ma(be,{size:8,class:"opacity-50 group-hover/btn:opacity-100"}),e(g),_(()=>r(m,`${a(u)??""} `)),d(x,g)});var nt=s(lt,2);nt.__click=()=>k(we,!0);var vt=t(nt);ea(vt,{size:10});var Mt=s(vt);e(nt),e(Le),e(Ye),e(zt),e(T),e(qe);var Ct=s(qe,2);{var Bt=x=>{var u=hr(),g=t(u),m=t(g),be=t(m),Pe=t(be,!0);e(be),ba(2),e(m);var Je=s(m,2);Ze(Je,21,()=>a(f)?["strength","agility","intellect","will"]:["str","agi","int","wil"],$t,(X,I)=>{const re=xe(()=>a(f)?n.entity.attributes?.[a(I)]??10:n.entity.stats?.[a(I)]??n.entity.attributes?.[a(I)]??10),ge=xe(()=>a(re)-10);var je=_r(),E=t(je),Y=t(E,!0);e(E);var h=s(E,2),ie=t(h,!0);e(h);var O=s(h,2),F=t(O);e(O),e(je),_(N=>{r(Y,N),r(ie,a(re)),tt(O,1,`text-[9px] font-bold ${a(ge)>=0?"text-emerald-500":"text-red-500"}`),r(F,`${a(ge)>=0?"+":""}${a(ge)??""}`)},[()=>a(f)?a(I).slice(0,3):a(I)]),d(X,je)}),e(Je),e(g);var Ve=s(g,2);{var xt=X=>{var I=xr(),re=t(I),ge=t(re),je=t(ge),E=t(je,!0);e(je);var Y=s(je,2),h=t(Y,!0);e(Y),e(ge);var ie=s(ge,2);Es(ie,{size:20,class:"text-purple-500/30 group-hover/ins:text-purple-500 transition-colors"}),e(re);var O=s(re,2),F=t(O),N=t(F),S=t(N,!0);e(N);var H=s(N,2),he=t(H,!0);e(H),e(F);var Ce=s(F,2);Xa(Ce,{size:20,class:"text-red-500/30 group-hover/cor:text-red-500 transition-colors"}),e(O),e(I),_((mt,gt)=>{r(E,mt),r(h,n.entity.insanity||0),r(S,gt),r(he,n.entity.corruption||0)},[()=>o()("sofdl.attributes.insanity"),()=>o()("sofdl.attributes.corruption")]),d(X,I)};y(Ve,X=>{a(f)&&X(xt)})}var pt=s(Ve,2),Nt=t(pt),Dt=t(Nt),Tt=t(Dt,!0);e(Dt);var Jt=s(Dt,2),Wt=t(Jt,!0);e(Jt),e(Nt);var Vt=s(Nt,2),l=t(Vt),v=t(l,!0);e(l);var b=s(l,2),z=t(b,!0);e(b),e(Vt),e(pt);var te=s(pt,2),w=t(te);{var C=X=>{var I=mr(),re=t(I),ge=t(re);ba(),e(re);var je=s(re,2);Ze(je,21,()=>n.entity.senses,$t,(E,Y)=>{const h=xe(()=>{const[F,N]=a(Y).split(":");return{key:F,val:N}}),ie=xe(()=>o()(`character.senses.list.${a(h).key}`)+(a(h).val?` ${a(h).val}`:"")),O=xe(()=>o()(`character.senses.descriptions.${a(h).key}`));Ms(E,{get text(){return a(O)},class:"text-xs bg-emerald-950/30 text-emerald-200 px-3 py-1.5 rounded border border-emerald-900/50 font-bold flex items-center gap-2 cursor-help whitespace-nowrap",children:(F,N)=>{var S=pr(),H=Ge(S);qa(H,{size:12,class:"text-emerald-500 flex-shrink-0"});var he=s(H);_(()=>r(he,` ${a(ie)??""}`)),d(F,S)},$$slots:{default:!0}})}),e(je),e(I),_(E=>r(ge,`${E??""} `),[()=>o()("character.senses.title")]),d(X,I)};y(w,X=>{n.entity.senses&&n.entity.senses.length>0&&X(C)})}var se=s(w,2);Ze(se,16,()=>[{key:"traits",label:"Traços",color:"text-amber-500"},{key:"actions",label:"Ações",color:"text-red-400"},{key:"reactions",label:"Reações",color:"text-indigo-400"},{key:"end_of_round",label:"Fim da Rodada",color:"text-emerald-400"}],$t,(X,I)=>{var re=At(),ge=Ge(re);{var je=E=>{var Y=gr(),h=t(Y),ie=t(h);ba(),e(h);var O=s(h,2);Ze(O,21,()=>n.entity[I.key],$t,(F,N)=>{var S=fr(),H=t(S),he=t(H,!0);e(H);var Ce=s(H,2),mt=t(Ce,!0);e(Ce),e(S),_(()=>{r(he,a(N).name),r(mt,a(N).description||a(N).effect)}),d(F,S)}),e(O),e(Y),_(()=>{tt(h,1,`${I.color??""} text-[10px] font-black uppercase mb-2 flex items-center gap-2`),r(ie,`${I.label??""} `)}),d(E,Y)};y(ge,E=>{n.entity[I.key]&&n.entity[I.key].length>0&&E(je)})}d(X,re)}),e(te),e(u),_((X,I,re)=>{r(Pe,X),r(Tt,I),r(Wt,n.entity.size||1),r(v,re),r(z,n.entity.speed||10)},[()=>o()("session.combat_card.attributes"),()=>o()("session.combat_card.size"),()=>o()("session.combat_card.speed")]),d(x,u)};y(Ct,x=>{a(V)&&x(Bt)})}var Lt=s(Ct,2);{let x=xe(()=>n.entity.afflictions||[]);ar(Lt,{get isOpen(){return a(we)},onClose:()=>k(we,!1),get afflictions(){return a(x)},onToggle:Ne})}e(Xe),_((x,u,g,m,be)=>{tt(Xe,1,`group relative overflow-hidden transition-all duration-300 rounded-2xl border ${a(i)?"bg-slate-900/80 border-indigo-500/30 hover:border-indigo-500/50 hover:shadow-indigo-900/20":"bg-slate-950/80 border-red-900/30 hover:border-red-800/50 hover:shadow-red-900/10"} shadow-lg backdrop-blur-sm`),tt(ze,1,`w-14 h-14 rounded-2xl overflow-hidden border-2 shadow-xl transition-transform group-hover:scale-105 ${a(Te)?"border-red-600 grayscale brightness-50":a(i)?"border-indigo-500/50":"border-red-900/50"}`),tt(dt,1,`absolute -bottom-2 -right-2 w-7 h-7 rounded-lg flex items-center justify-center border shadow-lg transition-all hover:scale-110 z-20 ${n.entity.acted?"bg-slate-800 border-slate-600 text-slate-500":a(i)?"bg-indigo-600 border-indigo-400 text-white":"bg-red-600 border-red-400 text-white"}`),_e(dt,"title",x),tt(We,1,`text-base font-bold truncate leading-snug ${a(i)?"text-white":"text-red-100 font-serif tracking-wide"}`),r(_t,n.entity.name),tt(wt,1,`absolute inset-0 w-full ${a(Z)===0?"bg-emerald-900/20":"bg-slate-900/50"}`),r(jt,u),r(et,n.entity.defense||10),r(R,g),Ua(ve,a(Z)),tt(J,1,`flex flex-col items-center justify-between border rounded-lg p-1.5 w-[5.5rem] h-[3.75rem] shadow-sm relative transition-colors ${a(Te)?"bg-red-950/50 border-red-500":a(ye)?"bg-orange-950/30 border-orange-500":"bg-emerald-950/30 border-emerald-900/50"}`),tt(P,1,`text-[9px] font-black uppercase tracking-wider mb-0.5 ${a(Te)?"text-red-400":a(ye)?"text-orange-400":"text-emerald-400"}`),r(K,m),Ua(oe,a(me)),r(G,`/${a(Re)??""}`),r(Mt,` ${be??""}`)},[()=>n.entity.acted?o()("session.combat_card.acted"):o()("session.combat_card.act"),()=>o()("session.combat_card.defense"),()=>o()("session.combat_card.damage"),()=>o()("session.combat_card.health"),()=>o()("session.combat_card.add_affliction")]),d(Q,Xe),ia(),D()}na(["click","input"]);function kr(Q,{from:n,to:o},ne={}){var{delay:D=0,duration:p=$e=>Math.sqrt($e)*120,easing:L=Ts}=ne,W=getComputedStyle(Q),i=W.transform==="none"?"":W.transform,[f,Z]=W.transformOrigin.split(" ").map(parseFloat);f/=Q.clientWidth,Z/=Q.clientHeight;var Re=zr(Q),me=Q.clientWidth/o.width/Re,Te=Q.clientHeight/o.height/Re,ye=n.left+n.width*f,ae=n.top+n.height*Z,V=o.left+o.width*f,we=o.top+o.height*Z,ke=(ye-V)*me,Rt=(ae-we)*Te,kt=n.width/o.width,Ht=n.height/o.height;return{delay:D,duration:typeof p=="function"?p(Math.sqrt(ke*ke+Rt*Rt)):p,easing:L,css:($e,Ne)=>{var Xe=Ne*ke,at=Ne*Rt,fe=$e+Ne*kt,Se=$e+Ne*Ht;return`transform: ${i} translate(${Xe}px, ${at}px) scale(${fe}, ${Se});`}}}function zr(Q){if("currentCSSZoom"in Q)return Q.currentCSSZoom;for(var n=Q,o=1;n!==null;)o*=+getComputedStyle(n).zoom,n=n.parentElement;return o}function Cr(Q,n=1,o=0){const ne=[];let D=0;for(let i=0;i<n;i++){const f=Math.floor(Math.random()*Q)+1;ne.push(f),D+=f}let p=`${n}d${Q}`,L=[],W=0;if(o!==0)if(Q===20){const i=Math.abs(o);for(let Z=0;Z<i;Z++)L.push(Math.floor(Math.random()*6)+1);const f=Math.max(...L);o>0?(W=f,D+=f,p+=` + ${f} [Boon]`):(W=-f,D-=f,p+=` - ${f} [Bane]`)}else W=o,D+=o,p+=o>0?` + ${o}`:` - ${Math.abs(o)}`;return{total:D,results:ne,bonusRolls:L,formula:p,crit:Q===20&&ne.includes(20),modifierTotal:W}}function $r(Q,n,o){const ne=o.map(i=>({...i,type:"enemy"}));if(Q==="standard"){const i=n.filter(me=>me.initiative).map(me=>({...me,type:"player",isFast:!0})),f=n.filter(me=>!me.initiative).map(me=>({...me,type:"player",isFast:!1})),Z=ne.filter(me=>me.initiative).map(me=>({...me,isFast:!0})),Re=ne.filter(me=>!me.initiative).map(me=>({...me,isFast:!1}));return[...i,...Z,...f,...Re]}if(Q==="individual")return[...n.map(f=>({...f,type:"player",totalInit:(f.initiativeRoll||0)+(f.attributes?.agility||10)-10})),...ne.map(f=>({...f,type:"enemy",totalInit:(f.initiativeRoll||0)+(f.attributes?.agility||10)-10}))].sort((f,Z)=>Z.totalInit-f.totalInit);const D=n.filter(i=>i&&i.initiative).map(i=>({...i,type:"player"})),p=n.filter(i=>i&&!i.initiative).map(i=>({...i,type:"player"})),L=[...D,...ne,...p],W=new Set;return L.filter(i=>{if(!i)return!1;const f=i.type==="player"?i.id:i.instanceId;return W.has(f)?!1:(W.add(f),!0)})}var Or=c('<span class="text-[10px] bg-slate-800 text-slate-400 px-1.5 py-0.5 rounded-full"> </span>'),jr=c('<div class="p-3 rounded-xl border border-amber-500/30 bg-amber-500/5 flex items-center gap-3 transition-all hover:bg-amber-500/10 shadow-sm"><div class="flex-1"><div class="font-bold text-sm text-amber-200 leading-none"> </div> <div class="text-[9px] text-amber-500/60 font-medium mt-1 uppercase tracking-tighter"> </div></div> <div class="flex items-center gap-1.5"><button class="p-2 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white transition-all shadow-lg active:scale-90" title="Aprovar"><!></button> <button class="p-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white transition-all shadow-lg active:scale-90" title="Recusar"><!></button></div></div>'),Er=c('<div class="space-y-2 animate-in fade-in slide-in-from-top-2"><div class="flex items-center gap-2 px-1"><div class="w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"></div> <span class="text-[10px] font-black text-amber-500 uppercase tracking-wider"> </span></div> <!> <div class="h-px bg-slate-800/50 mx-2 my-2"></div></div>'),Mr=c('<span class="text-indigo-400 font-bold uppercase tracking-tighter mr-1"> </span>'),Ir=c('<div><div></div> <div class="flex-1"><div> </div> <div class="text-[10px] text-slate-500 font-medium"><!> </div></div> <div class="flex items-center gap-1"><button><!></button> <button class="text-slate-600 hover:text-red-400 p-1.5 hover:bg-red-400/10 rounded-lg transition-all"><!></button></div></div>'),Sr=c('<div class="text-xs text-slate-600 italic p-6 border-2 border-dashed border-slate-800 rounded-xl text-center"> </div>'),Rr=c('<button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-xl font-black uppercase text-[10px] tracking-[0.2em] shadow-lg shadow-indigo-900/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2"><!> </button> <p class="text-[9px] text-slate-600 text-center font-bold uppercase tracking-tighter"> </p>',1),Nr=c('<div class="flex justify-center p-3 bg-white rounded-xl mb-2 animate-in zoom-in-95 duration-200 shadow-xl mx-auto w-32 h-32"><img class="w-24 h-24"/></div>'),Dr=c('<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-green-500 text-white text-[10px] font-bold rounded shadow-lg animate-in fade-in slide-in-from-bottom-1 whitespace-nowrap"><!> </div>'),Ar=c('<div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-1"><!> </span></div> <button class="text-slate-500 hover:text-white transition-colors p-1"><!></button></div> <!> <div class="relative group"><div class="flex gap-1"><div class="flex-1 bg-slate-950 border border-slate-800 rounded-lg p-2 text-[10px] text-slate-400 font-mono truncate cursor-pointer hover:border-slate-700 transition-colors flex items-center"> </div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-all active:scale-95 shadow-lg shadow-indigo-900/20 relative"><!> <!></button></div></div> <button class="w-full text-[9px] text-slate-600 hover:text-red-400 font-bold uppercase tracking-widest transition-colors mt-1"> </button>',1),Tr=c('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all cursor-move hover:bg-slate-800/50" draggable="true"><div class="truncate flex-1 flex items-center gap-2"><!> <div class="min-w-0 flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800 hover:bg-slate-800"><!></button></div>'),Ur=c('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),Pr=c("<!> <!>",1),Hr=c('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 group hover:border-indigo-500/30 transition-all cursor-move hover:bg-slate-800/50" draggable="true"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-slate-500 hover:text-indigo-400 p-1 ml-2 bg-slate-900 rounded border border-slate-800 hover:bg-slate-800"><!></button></div>'),Lr=c('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),Fr=c("<!> <!>",1),qr=c('<button class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-green-900/20"><!> </button>'),Br=c('<div class="flex items-center gap-4"><button class="p-2 hover:bg-slate-700 rounded text-slate-400"><!></button> <div class="text-center"><div class="text-[10px] font-bold text-slate-500 uppercase"> </div><div class="text-3xl font-mono font-bold text-white leading-none"> </div></div> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded font-bold flex items-center gap-2"><!> </button> <div class="h-8 w-px bg-slate-700 mx-2"></div> <button class="text-red-400 hover:text-red-300 text-xs font-bold px-3 py-2 border border-red-900/30 rounded bg-red-900/10"> </button></div>'),Jr=c("<div><!></div>"),Gr=c('<div class="text-center text-slate-500 italic py-10"> </div>'),Wr=c('<div class="text-sm"><span class="font-bold text-yellow-500"> </span> <span class="text-slate-300"> </span></div>'),Qr=c('<div class="bg-slate-900 border border-slate-700 rounded-lg p-4"><h4 class="font-bold text-white mb-2 pb-2 border-b border-slate-800 flex items-center gap-2"><!> </h4> <div class="space-y-2"></div></div>'),Vr=c('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-lg border border-slate-700 shadow-2xl p-6 relative" role="dialog" aria-modal="true"><div class="flex items-center gap-3 mb-6"><div class="p-3 bg-yellow-900/20 rounded-full border border-yellow-500/30 text-yellow-500"><!></div> <div><h3 class="font-bold text-white text-xl"> </h3> <p class="text-slate-400 text-sm"> </p></div></div> <div class="space-y-4 mb-8 max-h-[60vh] overflow-y-auto custom-scrollbar"></div> <div class="flex gap-3"><button class="flex-1 py-1.5 rounded bg-slate-700 hover:bg-slate-600 text-white font-bold text-sm"> </button> <button class="flex-1 py-1.5 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-sm"> </button></div></div></div>'),Zr=c('<button class="w-full text-left flex items-center gap-3 p-3 bg-slate-900 border border-slate-700 hover:border-indigo-500 hover:bg-indigo-500/10 rounded-xl group transition-all"><div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-sm font-bold text-slate-500 group-hover:text-indigo-400 border border-slate-700 group-hover:border-indigo-500/30"> </div> <div class="flex-1"><div class="font-bold text-white group-hover:text-indigo-300"> </div> <div class="text-[10px] text-slate-500"> </div></div> <div class="bg-slate-800 p-2 rounded-lg text-slate-500 group-hover:bg-indigo-500 group-hover:text-white transition-colors"><!></div></button>'),Xr=c('<div class="text-center py-8"><div class="w-12 h-12 bg-slate-700/50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-500"><!></div> <p class="text-slate-500 text-sm font-bold"> </p> <p class="text-[10px] text-slate-600 mt-1"> </p></div>'),Yr=c('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" aria-label="Fechar" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-md border border-slate-700 shadow-2xl p-6" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-6"><div><h3 class="font-bold text-white text-lg"> </h3> <p class="text-xs text-slate-400"> </p></div> <button class="bg-slate-700 hover:bg-slate-600 p-2 rounded-lg text-white transition-colors"><!></button></div> <div class="space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2"><!> <!></div></div></div>'),Kr=c('<div class="flex justify-between items-center bg-slate-950 p-3 rounded-xl border border-slate-800 group active:border-indigo-500/50 transition-all"><div class="truncate flex-1 flex flex-col"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-white hover:bg-indigo-600 p-2 bg-slate-800 rounded-lg border border-slate-700"><!></button></div>'),ei=c('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),ti=c("<!> <!>",1),ai=c('<div class="flex justify-between items-center bg-slate-950 p-3 rounded-xl border border-slate-800 group active:border-indigo-500/50 transition-all"><div class="truncate flex-1"><div class="text-sm font-bold text-white truncate flex items-center gap-1"> <!></div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-white hover:bg-indigo-600 p-2 bg-slate-800 rounded-lg border border-slate-700"><!></button></div>'),si=c('<div class="text-center text-slate-600 italic text-xs mt-4"> </div>'),ri=c("<!> <!>",1),ii=c('<div class="fixed inset-0 z-50 flex justify-end bg-black/60"><div class="w-full max-w-[300px] h-full bg-slate-900 border-l border-slate-800 p-4 shadow-2xl animate-in slide-in-from-right duration-300"><div class="flex justify-between items-center mb-4"><h3 class="font-bold text-white uppercase tracking-widest text-sm flex items-center gap-2"><!> </h3> <button class="bg-slate-800 p-2 rounded-lg text-slate-400 hover:text-white"><!></button></div> <div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="h-[calc(100%-100px)] overflow-y-auto custom-scrollbar space-y-2"><!></div></div></div>'),ni=c('<div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-full relative"><div class="space-y-6"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col gap-4"><div class="flex justify-between items-center bg-slate-950/50 p-2 rounded-lg border border-slate-800"><h3 class="text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2"><!> <!></h3> <button class="text-[10px] bg-slate-800 hover:bg-slate-700 text-white px-2.5 py-1.5 rounded-md font-bold transition-all border border-slate-700 active:scale-95"> </button></div> <!> <div class="space-y-2 flex-1 overflow-y-auto max-h-[300px] custom-scrollbar pr-1"><div class="space-y-2"><!> <!></div></div> <div class="pt-4 border-t border-slate-800 space-y-3"><!></div></div> <div class="hidden lg:flex flex-col h-[400px] bg-slate-900 border border-slate-800 rounded-xl p-4"><div class="flex items-center gap-2 mb-3 bg-slate-950 p-1 rounded-lg border border-slate-800"><button><!> </button> <button><!> </button></div> <div class="flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-2"><!></div></div></div> <div class="lg:col-span-2 space-y-4" role="region" aria-label="Combat Zone"><div class="bg-slate-900 border border-slate-800 rounded-xl p-4 flex justify-between items-center shadow-lg sticky top-0 z-20"><div class="flex items-center gap-4"><!></div></div> <div class="space-y-3 pb-20"><!> <!></div></div> <div class="hidden lg:flex flex-col gap-4"></div></div> <!> <!> <!> <button class="lg:hidden fixed bottom-24 right-4 bg-slate-800 text-white p-3 rounded-full shadow-lg border border-slate-700 z-40 active:scale-90 transition-transform" aria-label="Add Enemy"><!></button> <!> <!>',1);function oi(Q,n){ra(n,!0);const o=()=>qt(zs,"$liveCharacters",W),ne=()=>qt(Fa,"$liveEnemies",W),D=()=>qt(es,"$liveEncounters",W),p=()=>qt(ta,"$t",W),L=()=>qt(ya,"$isHistoryOpen",W),[W,i]=xa();let f=bt(!1),Z=bt(!1),Re=bt(!1),me=bt(!1);const Te={active:!1,round:1};let ye=bt("enemies"),ae=bt(!1),V=bt(_a([])),we=bt(_a({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));Ga(()=>{if(n.campaign?.id){gs(n.campaign.id,!0);const l=Ta(ta)("common.labels.master");Qa.update(b=>({...b,campaignId:n.campaign.id,name:n.campaign.gmName||l}));const v=setInterval(()=>{const b=Qt.get(n.campaign.id)||n.campaign,z=Ta(ta)("common.labels.master");Pa(n.campaign.id,{name:b.name,gmName:b.gmName||z})},3e4);return()=>{clearInterval(v),hs(),Qa.update(b=>({...b,campaignId:null}))}}});const ke=xe(()=>typeof window<"u"?`${window.location.origin}${ss("/campaigns/[id]/invite",{id:n.campaign?.id})}`:"");function Rt(){a(ke)&&(navigator.clipboard.writeText(a(ke)),k(Re,!0),setTimeout(()=>{k(Re,!1)},2e3))}let kt=xe(()=>n.campaign?.sessionRoster||[]),Ht=xe(()=>n.campaign?.combat||Te),$e=xe(()=>n.campaign?.activeEnemies||[]),Ne=xe(()=>n.campaign?.members||[]),Xe=xe(()=>n.campaign?.initiativeStyle||"dle"),at=xe(()=>Array.from(new Set([...a(kt),...a(Ne).map(v=>v.id)])).map(v=>{const b=o().find(te=>te.id===v),z=a(Ne).find(te=>te.id===v);return b&&z?{...b,...z,lastUpdate:z.lastUpdate}:b||z}).filter(Boolean)),fe=xe(()=>a(at).filter(l=>!l.campaignApproval||l.campaignApproval==="approved")),Se=xe(()=>a(at).filter(l=>l.campaignApproval==="pending")),ut=xe(()=>o().filter(l=>!a(kt).includes(l.id)&&!a(Ne).some(v=>v.id===l.id)&&(l.system||wa)===(n.campaign?.system||wa))),qe=xe(()=>ne().filter(l=>{const v=(l.system||wa)===(n.campaign?.system||wa),b=l.campaignId===n.campaign?.id||l.global;return v&&b})),T=xe(()=>D().filter(l=>(l.system||wa)===(n.campaign?.system||wa)&&!0));function M(l){if(!n.campaign?.id)return;const b={...Qt.get(n.campaign.id)||n.campaign,...l};Qt.set(n.campaign.id,b),l.combat&&Ea(n.campaign.id,l.combat),(l.name||l.gmName)&&Pa(n.campaign.id,{name:b.name,gmName:b.gmName})}function ze(l){if(a(kt).includes(l)){const v=a(kt).filter(b=>b!==l);M({sessionRoster:v})}else{const v=[...a(kt),l];M({sessionRoster:v})}}function Ue(l){ue(l,{campaignApproval:"approved"}),Ma({id:l,campaignApproval:"approved"})}function dt(l){Ma({id:l,campaignApproval:"rejected",campaignId:null});const b=((Qt.get(n.campaign.id)||n.campaign).members||[]).filter(z=>z.id!==l);M({members:b})}function Ot(l){const v=a(at).find(b=>b.id===l);k(we,{isOpen:!0,title:p()("session.players.remove_title"),message:p()("session.players.remove_message",{values:{name:v?.name||"este personagem"}}),onConfirm:()=>{const b=Qt.get(n.campaign.id)||n.campaign;Ma({id:l,campaignId:null});const z=(b.sessionRoster||[]).filter(C=>C!==l),te=(b.members||[]).filter(C=>C.id!==l),w=(b.activeEnemies||[]).filter(C=>C.type!=="player"||C.id!==l);M({sessionRoster:z,members:te,activeEnemies:w}),a(we).isOpen=!1}},!0)}function rt(l){const b=(Qt.get(n.campaign.id)||n.campaign).activeEnemies||[],z={...l,instanceId:Oa(),damage:0,currentHealth:l.health,afflictions:[],acted:!1,initiative:!1};M({activeEnemies:[...b,z]})}function yt(l){const b=(Qt.get(n.campaign.id)||n.campaign).activeEnemies||[];let z=[];l.enemies.forEach(te=>{const w=ne().find(C=>C.id===te.enemyId);if(w)for(let C=0;C<te.count;C++)z.push({...w,instanceId:Oa(),damage:0,currentHealth:w.health,afflictions:[],acted:!1,initiative:!1})}),M({activeEnemies:[...b,...z]})}function zt(){M({combat:{active:!0,round:1}}),Ea(n.campaign.id,{active:!0,round:1})}function ee(){const l=a($e).filter(v=>v.damage<(v.currentHealth??v.health)&&v.endOfRound&&v.endOfRound.length>0).map(v=>({name:v.name,effects:v.endOfRound}));if(l.length>0){k(V,l,!0),k(ae,!0);return}pe()}function pe(){const l=Qt.get(n.campaign.id)||n.campaign,v=(l.combat?.round||1)+1,b=(l.activeEnemies||[]).map(z=>({...z,acted:!1}));M({combat:{...l.combat,round:v},activeEnemies:b}),Ea(n.campaign.id,{active:!0,round:v}),k(ae,!1)}function He(l){M({combat:{active:!1,round:1}}),Ea(n.campaign.id,{active:!1,round:1})}function We(l){const v=Qt.get(n.campaign.id)||n.campaign;M({activeEnemies:(v.activeEnemies||[]).filter(b=>b.instanceId!==l)})}function _t(l,v){const b=Qt.get(n.campaign.id)||n.campaign;M({activeEnemies:(b.activeEnemies||[]).map(z=>z.instanceId===l?{...z,...v}:z)})}function Qe(){const l=Qt.get(n.campaign.id)||n.campaign,v=l.combat?.round||1;v>1&&M({combat:{...l.combat,round:v-1}})}let ce=bt(_a(Date.now()));Ga(()=>{const l=setInterval(()=>{k(ce,Date.now(),!0)},1e4);return()=>clearInterval(l)});let Ee=xe(()=>(()=>{const l=a(fe).filter(v=>a(kt).includes(v.id));return $r(a(Xe),l,a($e))})());function q(l){return l.lastUpdate?a(ce)-l.lastUpdate<6e4:!1}function ue(l,v){const b=Qt.get(n.campaign.id)||n.campaign,z=b.members||[],te=z.findIndex(I=>I.id===l);let w=z;te!==-1&&(w=[...z],w[te]={...w[te],...v});const C=b.activeEnemies||[],se=C.findIndex(I=>I.id===l&&I.type==="player");let X=C;se!==-1&&(X=[...C],X[se]={...X[se],...v}),M({members:w,activeEnemies:X})}function Me(l,v,b){l.dataTransfer&&(l.dataTransfer.setData("application/json",JSON.stringify({item:v,type:b})),l.dataTransfer.effectAllowed="copy")}function De(l){return l.preventDefault(),!1}function Fe(l){l.preventDefault();const v=l.dataTransfer?.getData("application/json");if(v)try{const{item:b,type:z}=JSON.parse(v);z==="enemy"?rt(b):z==="encounter"&&yt(b)}catch(b){console.error("Drop error",b)}}var ot=ni(),Be=Ge(ot),it=t(Be),wt=t(it),Ut=t(wt),It=t(Ut),Pt=t(It);ts(Pt,{size:14,class:"text-indigo-500"});var $=s(Pt),B=s($);{var A=l=>{var v=Or(),b=t(v,!0);e(v),_(()=>r(b,a(fe).length)),d(l,v)};y(B,l=>{a(fe).length>0&&l(A)})}e(It);var Ie=s(It,2);Ie.__click=()=>k(f,!a(f));var Ye=t(Ie,!0);e(Ie),e(Ut);var Ke=s(Ut,2);{var st=l=>{var v=Er(),b=t(v),z=s(t(b),2),te=t(z);e(z),e(b);var w=s(b,2);Ze(w,17,()=>a(Se),C=>C.id,(C,se)=>{var X=jr(),I=t(X),re=t(I),ge=t(re,!0);e(re);var je=s(re,2),E=t(je,!0);e(je),e(I);var Y=s(I,2),h=t(Y);h.__click=()=>Ue(a(se).id);var ie=t(h);Za(ie,{size:14}),e(h);var O=s(h,2);O.__click=()=>dt(a(se).id);var F=t(O);sa(F,{size:14}),e(O),e(Y),e(X),_(N=>{r(ge,a(se).name),r(E,N)},[()=>p()("session.players.new_request")]),d(C,X)}),ba(2),e(v),_(C=>r(te,`${C??""} (${a(Se).length??""})`),[()=>p()("session.players.waiting_approval")]),d(l,v)};y(Ke,l=>{a(Se).length>0&&l(st)})}var ft=s(Ke,2),jt=t(ft),Et=t(jt);Ze(Et,17,()=>a(fe),l=>l.id,(l,v)=>{const b=xe(()=>q(a(v))),z=xe(()=>a(kt).includes(a(v).id));var te=Ir(),w=t(te),C=s(w,2),se=t(C),X=t(se,!0);e(se);var I=s(se,2),re=t(I);{var ge=S=>{var H=Mr(),he=t(H,!0);e(H),_(Ce=>r(he,Ce),[()=>p()("common.labels.session")]),d(S,H)};y(re,S=>{a(z)&&S(ge)})}var je=s(re);e(I),e(C);var E=s(C,2),Y=t(E);Y.__click=()=>ze(a(v).id);var h=t(Y);{var ie=S=>{rs(S,{size:14})},O=S=>{ea(S,{size:14})};y(h,S=>{a(z)?S(ie):S(O,!1)})}e(Y);var F=s(Y,2);F.__click=()=>Ot(a(v).id);var N=t(F);sa(N,{size:14}),e(F),e(E),e(te),_((S,H,he)=>{tt(te,1,`p-2.5 rounded-xl border flex items-center gap-3 transition-all ${a(b)?"bg-indigo-900/10 border-indigo-500/20":"bg-slate-900/50 border-slate-800"} ${a(b)||a(z)?"opacity-100":"opacity-40"} hover:border-indigo-500/40 group shadow-sm`),tt(w,1,`w-2 h-2 rounded-full ${a(b)?"bg-green-500 shadow-[0_0_8px_rgba(74,222,128,0.4)]":"bg-slate-700"}`),tt(se,1,`font-bold text-sm ${a(b)?"text-white":"text-slate-500"} group-hover:text-indigo-300 transition-colors`),r(X,a(v).name),r(je,` ${S??""} ${a(v).level??""} • ${a(v).ancestry??""}`),tt(Y,1,`p-1.5 rounded-lg transition-all ${a(z)?"text-amber-400 hover:bg-amber-400/10":"text-slate-500 hover:text-indigo-400 hover:bg-indigo-400/10"}`),_e(Y,"title",H),_e(F,"title",he)},[()=>p()("common.labels.level"),()=>a(z)?p()("session.players.remove_from_session"):p()("session.players.add_to_session"),()=>p()("session.players.kick_from_campaign")]),d(l,te)});var et=s(Et,2);{var U=l=>{var v=Sr(),b=t(v,!0);e(v),_(z=>r(b,z),[()=>p()("session.players.none")]),d(l,v)};y(et,l=>{a(fe).length===0&&l(U)})}e(jt),e(ft);var j=s(ft,2),R=t(j);{var ve=l=>{var v=Rr(),b=Ge(v);b.__click=()=>M({isPublished:!0});var z=t(b);ua(z,{size:14});var te=s(z);e(b);var w=s(b,2),C=t(w,!0);e(w),_((se,X)=>{r(te,` ${se??""}`),r(C,X)},[()=>p()("session.publish.publish_session"),()=>p()("session.publish.make_visible")]),d(l,v)},J=l=>{var v=Ar(),b=Ge(v),z=t(b),te=t(z),w=t(te);as(w,{size:10,class:"animate-pulse"});var C=s(w);e(te),e(z);var se=s(z,2);se.__click=()=>k(me,!a(me));var X=t(se);Qs(X,{size:14}),e(se),e(b);var I=s(b,2);{var re=H=>{var he=Nr(),Ce=t(he);e(he),_((mt,gt)=>{_e(Ce,"src",mt),_e(Ce,"alt",gt)},[()=>`https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(a(ke))}`,()=>p()("session.publish.qr_alt")]),d(H,he)};y(I,H=>{a(me)&&H(re)})}var ge=s(I,2),je=t(ge),E=t(je);E.__click=Rt;var Y=t(E,!0);e(E);var h=s(E,2);h.__click=Rt;var ie=t(h);{var O=H=>{var he=Dr(),Ce=t(he);Za(Ce,{size:10,class:"inline mr-1"});var mt=s(Ce);e(he),_(gt=>r(mt,` ${gt??""}`),[()=>p()("common.buttons.copied")]),d(H,he)};y(ie,H=>{a(Re)&&H(O)})}var F=s(ie,2);Js(F,{size:14}),e(h),e(je),e(ge);var N=s(ge,2);N.__click=()=>M({isPublished:!1});var S=t(N,!0);e(N),_((H,he,Ce,mt)=>{r(C,` ${H??""}`),_e(se,"title",he),r(Y,a(ke)),_e(h,"aria-label",Ce),r(S,mt)},[()=>p()("session.publish.public_session"),()=>p()("session.publish.qr_code"),()=>p()("session.publish.copy_link"),()=>p()("session.publish.remove_public")]),d(l,v)};y(R,l=>{n.campaign?.isPublished?l(J,!1):l(ve)})}e(j),e(wt);var P=s(wt,2),K=t(P),Ae=t(K);Ae.__click=()=>k(ye,"enemies");var oe=t(Ae);ga(oe,{size:14});var de=s(oe);e(Ae);var G=s(Ae,2);G.__click=()=>k(ye,"encounters");var Oe=t(G);La(Oe,{size:14});var le=s(Oe);e(G),e(K);var Le=s(K,2),lt=t(Le);{var nt=l=>{var v=Pr(),b=Ge(v);Ze(b,17,()=>a(qe),w=>w.id,(w,C)=>{var se=Tr(),X=t(se),I=t(X);Ws(I,{size:12,class:"text-slate-600 cursor-grab"});var re=s(I,2),ge=t(re),je=t(ge),E=s(je);{var Y=N=>{ua(N,{size:10,class:"text-indigo-400"})};y(E,N=>{a(C).global&&N(Y)})}e(ge);var h=s(ge,2),ie=t(h);e(h),e(re),e(X);var O=s(X,2);O.__click=()=>rt(a(C));var F=t(O);ea(F,{size:16}),e(O),e(se),_(N=>{r(je,`${a(C).name??""} `),r(ie,`${N??""} ${a(C).difficulty??""}`)},[()=>p()("session.enemies.difficulty")]),ha("dragstart",se,N=>Me(N,a(C),"enemy")),d(w,se)});var z=s(b,2);{var te=w=>{var C=Ur(),se=t(C,!0);e(C),_(X=>r(se,X),[()=>p()("session.enemies.none")]),d(w,C)};y(z,w=>{a(qe).length===0&&w(te)})}d(l,v)},vt=l=>{var v=Fr(),b=Ge(v);Ze(b,17,()=>a(T),w=>w.id,(w,C)=>{var se=Hr(),X=t(se),I=t(X),re=t(I),ge=s(re);{var je=O=>{ua(O,{size:10,class:"text-indigo-400"})};y(ge,O=>{a(C).global&&O(je)})}e(I);var E=s(I,2),Y=t(E);e(E),e(X);var h=s(X,2);h.__click=()=>yt(a(C));var ie=t(h);Ha(ie,{size:14}),e(h),e(se),_((O,F)=>{r(re,`${a(C).name??""} `),r(Y,`${O??""} ${F??""}`)},[()=>a(C).enemies?.reduce((O,F)=>O+F.count,0)||0,()=>p()("session.enemies.title")]),ha("dragstart",se,O=>Me(O,a(C),"encounter")),d(w,se)});var z=s(b,2);{var te=w=>{var C=Lr(),se=t(C,!0);e(C),_(X=>r(se,X),[()=>p()("session.enemies.no_encounters")]),d(w,C)};y(z,w=>{a(T).length===0&&w(te)})}d(l,v)};y(lt,l=>{a(ye)==="enemies"?l(nt):l(vt,!1)})}e(Le),e(P),e(it);var Mt=s(it,2),Ct=t(Mt),Bt=t(Ct),Lt=t(Bt);{var x=l=>{var v=qr();v.__click=zt;var b=t(v);_s(b,{size:20});var z=s(b);e(v),_(te=>r(z,` ${te??""}`),[()=>p()("session.combat.start")]),d(l,v)},u=l=>{var v=Br(),b=t(v);b.__click=Qe;var z=t(b);Na(z,{size:20}),e(b);var te=s(b,2),w=t(te),C=t(w,!0);e(w);var se=s(w),X=t(se,!0);e(se),e(te);var I=s(te,2);I.__click=ee;var re=t(I);Is(re,{size:16});var ge=s(re);e(I);var je=s(I,4);je.__click=()=>He();var E=t(je,!0);e(je),e(v),_((Y,h,ie,O,F)=>{_e(b,"title",Y),r(C,h),r(X,a(Ht).round),_e(I,"title",ie),r(ge,` ${O??""}`),r(E,F)},[()=>p()("session.combat.previous"),()=>p()("session.combat.round"),()=>p()("session.combat.next"),()=>p()("session.combat.next"),()=>p()("session.combat.end")]),d(l,v)};y(Lt,l=>{a(Ht).active?l(u,!1):l(x)})}e(Bt),e(Ct);var g=s(Ct,2),m=t(g);Ze(m,25,()=>a(Ee),l=>l.type==="player"?l.id:l.instanceId,(l,v)=>{var b=Jr(),z=t(b);wr(z,{get entity(){return a(v)},updateEnemy:_t,removeFromCombat:We,updatePlayer:ue}),e(b),$s(b,()=>kr,()=>({duration:300})),d(l,b)});var be=s(m,2);{var Pe=l=>{var v=Gr(),b=t(v,!0);e(v),_(z=>r(b,z),[()=>p()("session.combat.empty")]),d(l,v)};y(be,l=>{a(Ee).length===0&&l(Pe)})}e(g),e(Mt),ba(2),e(Be);var Je=s(Be,2);{var Ve=l=>{var v=Vr();v.__click=O=>{O.target===O.currentTarget&&k(ae,!1)};var b=t(v),z=t(b),te=t(z),w=t(te);Ss(w,{size:24}),e(te);var C=s(te,2),se=t(C),X=t(se,!0);e(se);var I=s(se,2),re=t(I,!0);e(I),e(C),e(z);var ge=s(z,2);Ze(ge,21,()=>a(V),$t,(O,F)=>{var N=Qr(),S=t(N),H=t(S);ga(H,{size:14,class:"text-slate-500"});var he=s(H);e(S);var Ce=s(S,2);Ze(Ce,21,()=>a(F).effects,$t,(mt,gt)=>{var St=Wr(),Ft=t(St),Gt=t(Ft);e(Ft);var Yt=s(Ft,2),aa=t(Yt,!0);e(Yt),e(St),_(()=>{r(Gt,`${a(gt).name??""}:`),r(aa,a(gt).desc)}),d(mt,St)}),e(Ce),e(N),_(()=>r(he,` ${a(F).name??""}`)),d(O,N)}),e(ge);var je=s(ge,2),E=t(je);E.__click=()=>k(ae,!1);var Y=t(E,!0);e(E);var h=s(E,2);h.__click=pe;var ie=t(h,!0);e(h),e(je),e(b),e(v),_((O,F,N,S)=>{r(X,O),r(re,F),r(Y,N),r(ie,S)},[()=>p()("session.end_of_round.title"),()=>p()("session.end_of_round.summary"),()=>p()("common.buttons.cancel"),()=>p()("session.end_of_round.advance")]),d(l,v)};y(Je,l=>{a(ae)&&l(Ve)})}var xt=s(Je,2);{var pt=l=>{var v=Yr();v.__click=h=>{h.target===h.currentTarget&&k(f,!1)};var b=t(v),z=t(b),te=t(z),w=t(te),C=t(w,!0);e(w);var se=s(w,2),X=t(se,!0);e(se),e(te);var I=s(te,2);I.__click=()=>k(f,!1);var re=t(I);ma(re,{size:16}),e(I),e(z);var ge=s(z,2),je=t(ge);Ze(je,17,()=>a(ut),$t,(h,ie)=>{var O=Zr();O.__click=()=>ze(a(ie).id);var F=t(O),N=t(F,!0);e(F);var S=s(F,2),H=t(S),he=t(H,!0);e(H);var Ce=s(H,2),mt=t(Ce);e(Ce),e(S);var gt=s(S,2),St=t(gt);ea(St,{size:16}),e(gt),e(O),_((Ft,Gt)=>{r(N,Ft),r(he,a(ie).name),r(mt,`${Gt??""} ${a(ie).level??""} • ${a(ie).ancestry??""}`)},[()=>a(ie).name.charAt(0),()=>p()("common.labels.level")]),d(h,O)});var E=s(je,2);{var Y=h=>{var ie=Xr(),O=t(ie),F=t(O);ga(F,{size:24}),e(O);var N=s(O,2),S=t(N,!0);e(N);var H=s(N,2),he=t(H,!0);e(H),e(ie),_((Ce,mt)=>{r(S,Ce),r(he,mt)},[()=>p()("session.manage_session.no_available"),()=>p()("session.manage_session.all_in_session")]),d(h,ie)};y(E,h=>{a(ut).length===0&&h(Y)})}e(ge),e(b),e(v),_((h,ie)=>{r(C,h),r(X,ie)},[()=>p()("session.manage_session.title"),()=>p()("session.manage_session.description")]),d(l,v)};y(xt,l=>{a(f)&&l(pt)})}var Nt=s(xt,2);{var Dt=l=>{var v=ii();v.__click=S=>{S.target===S.currentTarget&&k(Z,!1)};var b=t(v),z=t(b),te=t(z),w=t(te);ga(w,{size:16});var C=s(w);e(te);var se=s(te,2);se.__click=()=>k(Z,!1);var X=t(se);ma(X,{size:18}),e(se),e(z);var I=s(z,2),re=t(I);re.__click=()=>k(ye,"enemies");var ge=t(re);ga(ge,{size:14});var je=s(ge);e(re);var E=s(re,2);E.__click=()=>k(ye,"encounters");var Y=t(E);La(Y,{size:14});var h=s(Y);e(E),e(I);var ie=s(I,2),O=t(ie);{var F=S=>{var H=ti(),he=Ge(H);Ze(he,17,()=>a(qe),gt=>gt.id,(gt,St)=>{var Ft=Kr(),Gt=t(Ft),Yt=t(Gt),aa=t(Yt),za=s(aa);{var Zt=Xt=>{ua(Xt,{size:10,class:"text-indigo-400"})};y(za,Xt=>{a(St).global&&Xt(Zt)})}e(Yt);var fa=s(Yt,2),Ca=t(fa);e(fa),e(Gt);var ca=s(Gt,2);ca.__click=()=>{rt(a(St)),k(Z,!1)};var $a=t(ca);ea($a,{size:16}),e(ca),e(Ft),_(Xt=>{r(aa,`${a(St).name??""} `),r(Ca,`${Xt??""} ${a(St).difficulty??""}`)},[()=>p()("session.enemies.difficulty")]),d(gt,Ft)});var Ce=s(he,2);{var mt=gt=>{var St=ei(),Ft=t(St,!0);e(St),_(Gt=>r(Ft,Gt),[()=>p()("session.enemies.none")]),d(gt,St)};y(Ce,gt=>{a(qe).length===0&&gt(mt)})}d(S,H)},N=S=>{var H=ri(),he=Ge(H);Ze(he,17,()=>a(T),gt=>gt.id,(gt,St)=>{var Ft=ai(),Gt=t(Ft),Yt=t(Gt),aa=t(Yt),za=s(aa);{var Zt=Xt=>{ua(Xt,{size:10,class:"text-indigo-400"})};y(za,Xt=>{a(St).global&&Xt(Zt)})}e(Yt);var fa=s(Yt,2),Ca=t(fa);e(fa),e(Gt);var ca=s(Gt,2);ca.__click=()=>{yt(a(St)),k(Z,!1)};var $a=t(ca);Ha($a,{size:16}),e(ca),e(Ft),_((Xt,Da)=>{r(aa,`${a(St).name??""} `),r(Ca,`${Xt??""} ${Da??""}`)},[()=>a(St).enemies?.reduce((Xt,Da)=>Xt+Da.count,0)||0,()=>p()("session.enemies.title")]),d(gt,Ft)});var Ce=s(he,2);{var mt=gt=>{var St=si(),Ft=t(St,!0);e(St),_(Gt=>r(Ft,Gt),[()=>p()("session.enemies.no_encounters")]),d(gt,St)};y(Ce,gt=>{a(T).length===0&&gt(mt)})}d(S,H)};y(O,S=>{a(ye)==="enemies"?S(F):S(N,!1)})}e(ie),e(b),e(v),_((S,H,he)=>{r(C,` ${S??""}`),tt(re,1,`flex-1 text-xs font-bold py-2 rounded flex items-center justify-center gap-2 transition-colors ${a(ye)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),r(je,` ${H??""}`),tt(E,1,`flex-1 text-xs font-bold py-2 rounded flex items-center justify-center gap-2 transition-colors ${a(ye)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),r(h,` ${he??""}`)},[()=>p()("session.enemies.title"),()=>p()("session.enemies.title"),()=>p()("session.enemies.encounters")]),d(l,v)};y(Nt,l=>{a(Z)&&l(Dt)})}var Tt=s(Nt,2);Tt.__click=()=>k(Z,!0);var Jt=t(Tt);ga(Jt,{size:24}),e(Tt);var Wt=s(Tt,2);is(Wt,{get isOpen(){return L()},onClose:()=>ya.set(!1)});var Vt=s(Wt,2);Ka(Vt,{get isOpen(){return a(we).isOpen},get title(){return a(we).title},get message(){return a(we).message},get onConfirm(){return a(we).onConfirm},onCancel:()=>a(we).isOpen=!1}),_((l,v,b,z)=>{r($,` ${l??""} `),r(Ye,v),tt(Ae,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(ye)==="enemies"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),r(de,` ${b??""}`),tt(G,1,`flex-1 text-xs font-bold py-1.5 rounded flex items-center justify-center gap-2 transition-colors ${a(ye)==="encounters"?"bg-indigo-600 text-white":"text-slate-500 hover:text-white"}`),r(le,` ${z??""}`)},[()=>p()("session.players.title"),()=>a(f)?p()("session.players.close"):p()("session.players.add"),()=>p()("session.enemies.title"),()=>p()("session.enemies.encounters")]),ha("dragover",Mt,De),ha("drop",Mt,Fe),d(Q,ot),ia(),i()}na(["click"]);var li=c('<span class="text-[10px] text-indigo-300 uppercase font-bold mb-2 block"> </span>'),di=c('<div><!> <div class="flex items-center justify-between bg-black/40 rounded-xl p-1.5 border border-white/5"><button type="button" class="w-10 h-10 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition-all active:scale-90 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Diminuir"><!></button> <div class="flex flex-col items-center min-w-[3rem]"><span class="text-2xl font-black text-white leading-none tracking-tighter"> </span></div> <button type="button" class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all active:scale-90 shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Aumentar"><!></button></div></div>');function xs(Q,n){ra(n,!0);function o(){const ae=n.steps.indexOf(n.value);if(ae>0)n.onUpdate(n.steps[ae-1]);else if(ae===-1){const V=[...n.steps].reverse().find(we=>we<n.value);V!==void 0?n.onUpdate(V):n.onUpdate(n.steps[0])}}function ne(){const ae=n.steps.indexOf(n.value);if(ae!==-1&&ae<n.steps.length-1)n.onUpdate(n.steps[ae+1]);else if(ae===-1){const V=n.steps.find(we=>we>n.value);V!==void 0?n.onUpdate(V):n.onUpdate(n.steps[n.steps.length-1])}}var D=di(),p=t(D);{var L=ae=>{var V=li(),we=t(V,!0);e(V),_(()=>r(we,n.label)),d(ae,V)};y(p,ae=>{n.label&&ae(L)})}var W=s(p,2),i=t(W);i.__click=o;var f=t(i);rs(f,{size:18}),e(i);var Z=s(i,2),Re=t(Z),me=t(Re,!0);e(Re),e(Z);var Te=s(Z,2);Te.__click=ne;var ye=t(Te);ea(ye,{size:18}),e(Te),e(W),e(D),_(()=>{i.disabled=n.value<=n.steps[0],r(me,n.value),Te.disabled=n.value>=n.steps[n.steps.length-1]}),d(Q,D),ia()}na(["click"]);var vi=c('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),ci=c('<div class="text-xs text-slate-500 italic mt-2 leading-relaxed opacity-75"> </div>'),ui=c('<span class="text-slate-400"> </span>'),bi=c('<span class="text-slate-400"> </span>'),_i=c('<div class="text-sm mb-4"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span></div>'),xi=c('<div class="mb-3 text-sm"><span class="font-bold text-indigo-400"> </span> <span class="text-slate-300 ml-1"> </span></div>'),pi=c('<span class="text-slate-300"> </span>'),mi=c('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-400"> </span> <span class="text-white ml-1"> </span> <!></div>'),fi=c('<div class="mt-4"><h4 class="text-red-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),gi=c('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-300 ml-1"> </span></div>'),hi=c('<div class="mt-4"><h4 class="text-orange-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),yi=c('<div class="mb-2 text-sm"><span class="font-bold text-white"> </span> <span class="text-slate-300 ml-1"> </span></div>'),wi=c('<div class="mt-4"><h4 class="text-yellow-500 font-bold text-xs uppercase mb-2 tracking-wider"> </h4> <!></div>'),ki=c('<div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl"><div class="flex items-start gap-3 mb-4"><!> <div class="flex-1 min-w-0"><div class="flex items-baseline gap-2"><h2 class="text-xl font-bold text-white font-serif tracking-wide"> </h2> <span class="text-red-500 font-bold text-sm"> </span></div> <div class="text-sm text-slate-400 mt-1"> </div> <!></div></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <!></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <span class="text-slate-500 font-bold ml-3"> </span> <span class="text-white ml-1"> </span></div> <div class="text-sm mb-3"><span class="text-white"><span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> <span class="text-slate-500 font-bold"> </span> </span></div> <div class="text-sm mb-3"><span class="text-slate-500 font-bold"> </span> <span class="text-white ml-1"> </span> <!></div> <!> <div class="border-t border-slate-700 my-4"></div> <!> <!> <!> <!></div>'),zi=c('<div class="space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div><label for="enemy-desc-text" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc-text" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-desc" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div class="flex items-center gap-2 mt-4"><input id="enemy-global" type="checkbox" class="w-4 h-4 bg-slate-900 border-slate-700 rounded focus:ring-indigo-500"/> <label for="enemy-global" class="text-sm font-bold text-slate-400 select-none cursor-pointer flex items-center gap-2"><!> </label></div></div>'),Ci=c('<div class="bg-slate-900 p-3 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1 text-ellipsis overflow-hidden whitespace-nowrap"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),$i=c('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col"><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div> <div><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-health" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-defense" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-perception" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-perception" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3 border-b border-indigo-500/20 pb-2"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3 pt-4 border-t border-slate-800"><div><label for="enemy-speed-notes" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-speed-notes" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-senses" type="text" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[80px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div></div></div>'),Oi=c('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),ji=c('<div class="flex gap-2 items-start"><div class="flex-1 space-y-2"><div class="grid grid-cols-2 gap-2"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <select class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm"><option> </option><option> </option></select></div> <div class="grid grid-cols-2 gap-2"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600"/> <input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600"/></div> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Ei=c('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Mi=c('<div class="flex gap-2 items-start"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Ii=c('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="p-4 bg-slate-900 rounded border border-indigo-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-indigo-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-red-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-red-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-orange-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-orange-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div> <div class="p-4 bg-slate-900 rounded border border-yellow-500/30"><div class="mb-3"><h4 class="font-bold text-sm uppercase text-yellow-400"> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div></div>'),Si=c('<div class="flex-1 flex items-start justify-center p-4 min-h-0 animate-in fade-in slide-in-from-right-2 duration-300"><!></div>'),Ri=c('<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 lg:p-4" role="button" aria-label="Close" tabindex="-1"><div class="bg-slate-900 w-full h-full lg:rounded-xl lg:max-w-6xl lg:h-[90vh] border-0 lg:border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><div class="flex items-center gap-3"><button class="lg:hidden text-slate-400 hover:text-white p-1 rounded-full hover:bg-slate-800 transition-colors"><!></button> <h3 id="modal-title" class="font-bold text-white text-lg"> </h3></div> <button class="hidden lg:block text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50 overflow-x-auto"><button> </button> <button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3 safe-area-bottom"><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-start justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><!></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function Ni(Q,n){ra(n,!0);const o=()=>qt(ta,"$t",ne),[ne,D]=xa(),p=T=>{var M=ki(),ze=t(M),Ue=t(ze);{var dt=u=>{var g=vi(),m=t(g);ja(m,{get hash(){return a(i).imageUrl},get alt(){return a(i).name},size:"custom"}),e(g),d(u,g)};y(Ue,u=>{a(i).imageUrl&&u(dt)})}var Ot=s(Ue,2),rt=t(Ot),yt=t(rt),zt=t(yt,!0);e(yt);var ee=s(yt,2),pe=t(ee);e(ee),e(rt);var He=s(rt,2),We=t(He);e(He);var _t=s(He,2);{var Qe=u=>{var g=ci(),m=t(g,!0);e(g),_(()=>r(m,a(i).description)),d(u,g)};y(_t,u=>{a(i).description&&u(Qe)})}e(Ot),e(ze);var ce=s(ze,2),Ee=t(ce),q=t(Ee,!0);e(Ee);var ue=s(Ee,2),Me=t(ue);e(ue);var De=s(ue,2);{var Fe=u=>{var g=ui(),m=t(g);e(g),_(()=>r(m,`; ${a(i).senses??""}`)),d(u,g)};y(De,u=>{a(i).senses&&u(Fe)})}e(ce);var ot=s(ce,2),Be=t(ot),it=t(Be,!0);e(Be);var wt=s(Be,2),Ut=t(wt,!0);e(wt);var It=s(wt,2),Pt=t(It,!0);e(It);var $=s(It,2),B=t($,!0);e($),e(ot);var A=s(ot,2),Ie=t(A),Ye=t(Ie),Ke=t(Ye,!0);e(Ye);var st=s(Ye),ft=s(st),jt=t(ft,!0);e(ft);var Et=s(ft),et=s(Et),U=t(et,!0);e(et);var j=s(et),R=s(j),ve=t(R,!0);e(R);var J=s(R);e(Ie),e(A);var P=s(A,2),K=t(P),Ae=t(K,!0);e(K);var oe=s(K,2),de=t(oe,!0);e(oe);var G=s(oe,2);{var Oe=u=>{var g=bi(),m=t(g);e(g),_(()=>r(m,`; ${a(i).speedNotes??""}`)),d(u,g)};y(G,u=>{a(i).speedNotes&&u(Oe)})}e(P);var le=s(P,2);{var Le=u=>{var g=_i(),m=t(g),be=t(m,!0);e(m);var Pe=s(m,2),Je=t(Pe,!0);e(Pe),e(g),_(Ve=>{r(be,Ve),r(Je,a(i).immunities)},[()=>o()("session.enemy_modal.immunities")]),d(u,g)};y(le,u=>{a(i).immunities&&u(Le)})}var lt=s(le,4);{var nt=u=>{var g=At(),m=Ge(g);Ze(m,17,()=>a(i).traits,$t,(be,Pe)=>{var Je=xi(),Ve=t(Je),xt=t(Ve,!0);e(Ve);var pt=s(Ve,2),Nt=t(pt,!0);e(pt),e(Je),_(()=>{r(xt,a(Pe).name),r(Nt,a(Pe).desc)}),d(be,Je)}),d(u,g)};y(lt,u=>{a(i).traits.length>0&&u(nt)})}var vt=s(lt,2);{var Mt=u=>{var g=fi(),m=t(g),be=t(m,!0);e(m);var Pe=s(m,2);Ze(Pe,17,()=>a(i).attackOptions,$t,(Je,Ve)=>{var xt=mi(),pt=t(xt),Nt=t(pt,!0);e(pt);var Dt=s(pt,2),Tt=t(Dt);e(Dt);var Jt=s(Dt,2),Wt=t(Jt);e(Jt);var Vt=s(Jt,2);{var l=v=>{var b=pi(),z=t(b);e(b),_(()=>r(z,`; ${a(Ve).desc??""}`)),d(v,b)};y(Vt,v=>{a(Ve).desc&&v(l)})}e(xt),_(v=>{r(Nt,a(Ve).name),r(Tt,`(${v??""})`),r(Wt,`${a(Ve).attackRoll??""} (${a(Ve).damage??""})`)},[()=>a(Ve).type==="melee"?o()("session.enemy_modal.melee").toLowerCase():o()("session.enemy_modal.ranged").toLowerCase()]),d(Je,xt)}),e(g),_(Je=>r(be,Je),[()=>o()("session.enemy_modal.attack_options")]),d(u,g)};y(vt,u=>{a(i).attackOptions.length>0&&u(Mt)})}var Ct=s(vt,2);{var Bt=u=>{var g=hi(),m=t(g),be=t(m,!0);e(m);var Pe=s(m,2);Ze(Pe,17,()=>a(i).specialAttacks,$t,(Je,Ve)=>{var xt=gi(),pt=t(xt),Nt=t(pt,!0);e(pt);var Dt=s(pt,2),Tt=t(Dt,!0);e(Dt),e(xt),_(()=>{r(Nt,a(Ve).name),r(Tt,a(Ve).desc)}),d(Je,xt)}),e(g),_(Je=>r(be,Je),[()=>o()("session.enemy_modal.special_attacks")]),d(u,g)};y(Ct,u=>{a(i).specialAttacks.length>0&&u(Bt)})}var Lt=s(Ct,2);{var x=u=>{var g=wi(),m=t(g),be=t(m,!0);e(m);var Pe=s(m,2);Ze(Pe,17,()=>a(i).endOfRound,$t,(Je,Ve)=>{var xt=yi(),pt=t(xt),Nt=t(pt,!0);e(pt);var Dt=s(pt,2),Tt=t(Dt,!0);e(Dt),e(xt),_(()=>{r(Nt,a(Ve).name),r(Tt,a(Ve).desc)}),d(Je,xt)}),e(g),_(Je=>r(be,Je),[()=>o()("session.enemy_modal.end_of_round")]),d(u,g)};y(Lt,u=>{a(i).endOfRound.length>0&&u(x)})}e(M),_((u,g,m,be,Pe,Je,Ve,xt,pt,Nt,Dt,Tt,Jt,Wt,Vt,l,v)=>{r(zt,u),r(pe,`${g??""} ${a(i).difficulty??""}`),r(We,`${m??""} ${be??""} ${a(i).descriptors??""}`),r(q,Pe),r(Me,`${a(i).perception??""} (${Je??""})`),r(it,Ve),r(Ut,a(i).defense),r(Pt,xt),r(B,a(i).health),r(Ke,pt),r(st,` ${a(i).attributes.strength??""} (${Nt??""}), `),r(jt,Dt),r(Et,` ${a(i).attributes.agility??""} (${Tt??""}), `),r(U,Jt),r(j,` ${a(i).attributes.intellect??""} (${Wt??""}), `),r(ve,Vt),r(J,` ${a(i).attributes.will??""} (${l??""})`),r(Ae,v),r(de,a(i).speed)},[()=>a(i).name||o()("session.enemy_modal.enemy_default"),()=>o()("session.enemies.difficulty").toUpperCase(),()=>o()("session.enemy_modal.size"),()=>we(a(i).size),()=>o()("sofdl.attributes.perception"),()=>V(a(i).perception),()=>o()("session.enemy_modal.defense"),()=>o()("session.enemy_modal.health"),()=>o()("sofdl.attributes.strength"),()=>V(a(i).attributes.strength),()=>o()("sofdl.attributes.agility"),()=>V(a(i).attributes.agility),()=>o()("sofdl.attributes.intellect"),()=>V(a(i).attributes.intellect),()=>o()("sofdl.attributes.will"),()=>V(a(i).attributes.will),()=>o()("session.enemy_modal.speed")]),d(T,M)};let L=Kt(n,"isOpen",3,!1),W=Kt(n,"initialData",3,"{}"),i=bt(_a(ae())),f=bt("general"),Z=bt(!1),Re=bt(""),me=bt(void 0);function Te(T){const M=T.target.files;if(M&&M.length>0){const ze=M[0],Ue=new FileReader;Ue.onload=()=>{k(Re,Ue.result,!0),k(Z,!0)},Ue.readAsDataURL(ze)}T.target&&(T.target.value="")}async function ye(T){try{const M=await os(T);a(i).imageUrl=M,k(Z,!1)}catch(M){console.error(M),alert(M.message||"Erro ao salvar imagem")}}function ae(){return{name:"",difficulty:1,size:1,description:"",descriptors:"",perception:10,senses:"",defense:10,health:10,attributes:{strength:10,agility:10,intellect:10,will:10},speed:10,speedNotes:"",immunities:"",traits:[],attackOptions:[],specialAttacks:[],endOfRound:[],imageUrl:"",global:!1}}function V(T){const M=T-10;return M>=0?`+${M}`:`${M}`}function we(T){return T===.125?"1/8":T===.5?"1/2":T}Ra(()=>{if(L()&&W())try{const T=JSON.parse(W());Object.keys(T).length===0?k(i,ae(),!0):k(i,{...ae(),...T},!0)}catch{k(i,ae(),!0)}});function ke(){a(i).traits=[...a(i).traits,{name:"",desc:""}]}function Rt(T){a(i).traits=a(i).traits.filter((M,ze)=>ze!==T)}function kt(){a(i).attackOptions=[...a(i).attackOptions,{name:"",type:"melee",attackRoll:"+0",damage:"1d6",desc:""}]}function Ht(T){a(i).attackOptions=a(i).attackOptions.filter((M,ze)=>ze!==T)}function $e(){a(i).specialAttacks=[...a(i).specialAttacks,{name:"",desc:""}]}function Ne(T){a(i).specialAttacks=a(i).specialAttacks.filter((M,ze)=>ze!==T)}function Xe(){a(i).endOfRound=[...a(i).endOfRound,{name:"",desc:""}]}function at(T){a(i).endOfRound=a(i).endOfRound.filter((M,ze)=>ze!==T)}function fe(T){}var Se=At(),ut=Ge(Se);{var qe=T=>{var M=Ri(),ze=Ge(M);ze.__click=fe;var Ue=t(ze),dt=t(Ue),Ot=t(dt),rt=t(Ot),yt=t(rt);yt.__click=function(...et){n.onClose?.apply(this,et)};var zt=t(yt);Na(zt,{size:24}),e(yt);var ee=s(yt,2),pe=t(ee,!0);e(ee),e(rt);var He=s(rt,2);He.__click=function(...et){n.onClose?.apply(this,et)};var We=t(He);ma(We,{size:20}),e(He),e(Ot);var _t=s(Ot,2),Qe=t(_t);Qe.__click=()=>k(f,"general");var ce=t(Qe,!0);e(Qe);var Ee=s(Qe,2);Ee.__click=()=>k(f,"stats");var q=t(Ee,!0);e(Ee);var ue=s(Ee,2);ue.__click=()=>k(f,"abilities");var Me=t(ue,!0);e(ue);var De=s(ue,2);De.__click=()=>k(f,"preview");var Fe=t(De,!0);e(De),e(_t);var ot=s(_t,2),Be=t(ot);{var it=et=>{var U=zi(),j=t(U),R=t(j);R.__click=()=>a(me)?.click();var ve=t(R),J=t(ve);Ba(J,()=>a(i).imageUrl,m=>{ja(m,{get hash(){return a(i).imageUrl},get alt(){return a(i).name},size:"custom",fallbackText:"?"})}),e(ve);var P=s(ve,2),K=t(P);ls(K,{size:20,class:"text-white"}),e(P),e(R);var Ae=s(R,2),oe=t(Ae),de=t(oe,!0);e(oe);var G=s(oe,2);ht(G),e(Ae),e(j);var Oe=s(j,2),le=t(Oe),Le=t(le,!0);e(le);var lt=s(le,2);pa(lt),e(Oe);var nt=s(Oe,2),vt=t(nt),Mt=t(vt,!0);e(vt);var Ct=s(vt,2);ht(Ct),e(nt);var Bt=s(nt,2),Lt=t(Bt);ht(Lt);var x=s(Lt,2),u=t(x);ua(u,{size:14});var g=s(u);e(x),e(Bt),e(U),_((m,be,Pe,Je,Ve,xt)=>{r(de,m),r(Le,be),_e(lt,"placeholder",Pe),r(Mt,Je),_e(Ct,"placeholder",Ve),r(g,` ${xt??""}`)},[()=>o()("session.enemy_modal.name"),()=>o()("session.enemy_modal.description"),()=>o()("session.enemy_modal.description_placeholder"),()=>o()("session.enemy_modal.descriptors"),()=>o()("session.enemy_modal.descriptors_placeholder"),()=>o()("session.enemy_modal.global_enemy")]),ct(G,()=>a(i).name,m=>a(i).name=m),ct(lt,()=>a(i).description,m=>a(i).description=m),ct(Ct,()=>a(i).descriptors,m=>a(i).descriptors=m),Ya(Lt,()=>a(i).global,m=>a(i).global=m),d(et,U)},wt=et=>{var U=At(),j=Ge(U);{var R=J=>{var P=$i(),K=t(P),Ae=t(K),oe=t(Ae),de=t(oe,!0);e(oe);var G=s(oe,2);{let E=xe(()=>a(i).difficulty??0);xs(G,{get value(){return a(E)},onUpdate:Y=>a(i).difficulty=Y,steps:[0,1,5,10,25,50,100,250,500,750,1e3]})}e(Ae);var Oe=s(Ae,2),le=t(Oe),Le=t(le,!0);e(le);var lt=s(le,2);{let E=xe(()=>a(i).size||1);ds(lt,{get value(){return a(E)},onUpdate:Y=>a(i).size=Y})}e(Oe),e(K);var nt=s(K,2),vt=t(nt),Mt=t(vt),Ct=t(Mt,!0);e(Mt);var Bt=s(Mt,2);ht(Bt),e(vt);var Lt=s(vt,2),x=t(Lt),u=t(x,!0);e(x);var g=s(x,2);ht(g),e(Lt),e(nt);var m=s(nt,2),be=t(m),Pe=t(be),Je=t(Pe,!0);e(Pe);var Ve=s(Pe,2);ht(Ve),e(be);var xt=s(be,2),pt=t(xt),Nt=t(pt,!0);e(pt);var Dt=s(pt,2);ht(Dt),e(xt),e(m);var Tt=s(m,2),Jt=t(Tt),Wt=t(Jt,!0);e(Jt);var Vt=s(Jt,2);Ze(Vt,5,()=>[{key:"strength",label:o()("sofdl.attributes.strength")},{key:"agility",label:o()("sofdl.attributes.agility")},{key:"intellect",label:o()("sofdl.attributes.intellect")},{key:"will",label:o()("sofdl.attributes.will")}],$t,(E,Y)=>{var h=Ci(),ie=t(h),O=t(ie,!0);e(ie);var F=s(ie,2);ht(F);var N=s(F,2),S=t(N,!0);e(N),e(h),_((H,he)=>{_e(ie,"for",`attr-${a(Y).key??""}`),_e(ie,"title",a(Y).label),r(O,H),_e(F,"id",`attr-${a(Y).key??""}`),tt(N,1,`text-xs font-bold ${a(i).attributes[a(Y).key]-10>=0?"text-green-500":"text-red-500"}`),r(S,he)},[()=>a(Y).label.substring(0,3),()=>V(a(i).attributes[a(Y).key])]),ct(F,()=>a(i).attributes[a(Y).key],H=>a(i).attributes[a(Y).key]=H),d(E,h)}),e(Vt),e(Tt);var l=s(Tt,2),v=t(l),b=t(v),z=t(b,!0);e(b);var te=s(b,2);ht(te),e(v);var w=s(v,2),C=t(w),se=t(C,!0);e(C);var X=s(C,2);ht(X),e(w);var I=s(w,2),re=t(I),ge=t(re,!0);e(re);var je=s(re,2);pa(je),e(I),e(l),e(P),_((E,Y,h,ie,O,F,N,S,H,he,Ce,mt,gt)=>{r(de,E),r(Le,Y),r(Ct,h),r(u,ie),r(Je,O),r(Nt,F),r(Wt,N),r(z,S),_e(te,"placeholder",H),r(se,he),_e(X,"placeholder",Ce),r(ge,mt),_e(je,"placeholder",gt)},[()=>o()("session.enemy_modal.difficulty"),()=>o()("session.enemy_modal.size"),()=>o()("session.enemy_modal.speed"),()=>o()("session.enemy_modal.health"),()=>o()("session.enemy_modal.defense"),()=>o()("sofdl.attributes.perception"),()=>o()("session.enemy_modal.main_attributes"),()=>o()("session.enemy_modal.speed_notes"),()=>o()("session.enemy_modal.speed_notes_placeholder"),()=>o()("session.enemy_modal.senses"),()=>o()("session.enemy_modal.senses_placeholder_sotdl"),()=>o()("session.enemy_modal.immunities"),()=>o()("session.enemy_modal.immunities_placeholder_sotdl")]),ct(Bt,()=>a(i).speed,E=>a(i).speed=E),ct(g,()=>a(i).health,E=>a(i).health=E),ct(Ve,()=>a(i).defense,E=>a(i).defense=E),ct(Dt,()=>a(i).perception,E=>a(i).perception=E),ct(te,()=>a(i).speedNotes,E=>a(i).speedNotes=E),ct(X,()=>a(i).senses,E=>a(i).senses=E),ct(je,()=>a(i).immunities,E=>a(i).immunities=E),d(J,P)},ve=J=>{var P=At(),K=Ge(P);{var Ae=de=>{var G=Ii(),Oe=t(G),le=t(Oe),Le=t(le),lt=t(Le,!0);e(Le),e(le);var nt=s(le,2),vt=t(nt);Ze(vt,17,()=>a(i).traits,$t,(Y,h,ie)=>{var O=Oi(),F=t(O),N=t(F);ht(N);var S=s(N,2);pa(S),e(F);var H=s(F,2);H.__click=()=>Rt(ie);var he=t(H);sa(he,{size:16}),e(H),e(O),_((Ce,mt)=>{_e(N,"placeholder",Ce),_e(S,"placeholder",mt)},[()=>o()("session.enemy_modal.name_placeholder"),()=>o()("session.enemy_modal.desc_placeholder")]),ct(N,()=>a(h).name,Ce=>a(h).name=Ce),ct(S,()=>a(h).desc,Ce=>a(h).desc=Ce),d(Y,O)});var Mt=s(vt,2);Mt.__click=ke;var Ct=t(Mt),Bt=t(Ct);ea(Bt,{size:16}),e(Ct);var Lt=s(Ct);e(Mt),e(nt),e(Oe);var x=s(Oe,2),u=t(x),g=t(u),m=t(g,!0);e(g),e(u);var be=s(u,2),Pe=t(be);Ze(Pe,17,()=>a(i).attackOptions,$t,(Y,h,ie)=>{var O=ji(),F=t(O),N=t(F),S=t(N);ht(S);var H=s(S,2),he=t(H),Ce=t(he,!0);e(he),he.value=he.__value="melee";var mt=s(he),gt=t(mt,!0);e(mt),mt.value=mt.__value="ranged",e(H),e(N);var St=s(N,2),Ft=t(St);ht(Ft);var Gt=s(Ft,2);ht(Gt),e(St);var Yt=s(St,2);pa(Yt),e(F);var aa=s(F,2);aa.__click=()=>Ht(ie);var za=t(aa);sa(za,{size:16}),e(aa),e(O),_((Zt,fa,Ca,ca,$a,Xt)=>{_e(S,"placeholder",Zt),r(Ce,fa),r(gt,Ca),_e(Ft,"placeholder",ca),_e(Gt,"placeholder",$a),_e(Yt,"placeholder",Xt)},[()=>o()("session.enemy_modal.name_placeholder"),()=>o()("session.enemy_modal.melee"),()=>o()("session.enemy_modal.ranged"),()=>o()("session.enemy_modal.attack_placeholder"),()=>o()("session.enemy_modal.damage_placeholder"),()=>o()("session.enemy_modal.desc_effects_placeholder")]),ct(S,()=>a(h).name,Zt=>a(h).name=Zt),ms(H,()=>a(h).type,Zt=>a(h).type=Zt),ct(Ft,()=>a(h).attackRoll,Zt=>a(h).attackRoll=Zt),ct(Gt,()=>a(h).damage,Zt=>a(h).damage=Zt),ct(Yt,()=>a(h).desc,Zt=>a(h).desc=Zt),d(Y,O)});var Je=s(Pe,2);Je.__click=kt;var Ve=t(Je),xt=t(Ve);ea(xt,{size:16}),e(Ve);var pt=s(Ve);e(Je),e(be),e(x);var Nt=s(x,2),Dt=t(Nt),Tt=t(Dt),Jt=t(Tt,!0);e(Tt),e(Dt);var Wt=s(Dt,2),Vt=t(Wt);Ze(Vt,17,()=>a(i).specialAttacks,$t,(Y,h,ie)=>{var O=Ei(),F=t(O),N=t(F);ht(N);var S=s(N,2);pa(S),e(F);var H=s(F,2);H.__click=()=>Ne(ie);var he=t(H);sa(he,{size:16}),e(H),e(O),_((Ce,mt)=>{_e(N,"placeholder",Ce),_e(S,"placeholder",mt)},[()=>o()("session.enemy_modal.name_placeholder"),()=>o()("session.enemy_modal.desc_placeholder")]),ct(N,()=>a(h).name,Ce=>a(h).name=Ce),ct(S,()=>a(h).desc,Ce=>a(h).desc=Ce),d(Y,O)});var l=s(Vt,2);l.__click=$e;var v=t(l),b=t(v);ea(b,{size:16}),e(v);var z=s(v);e(l),e(Wt),e(Nt);var te=s(Nt,2),w=t(te),C=t(w),se=t(C,!0);e(C),e(w);var X=s(w,2),I=t(X);Ze(I,17,()=>a(i).endOfRound,$t,(Y,h,ie)=>{var O=Mi(),F=t(O),N=t(F);ht(N);var S=s(N,2);pa(S),e(F);var H=s(F,2);H.__click=()=>at(ie);var he=t(H);sa(he,{size:16}),e(H),e(O),_((Ce,mt)=>{_e(N,"placeholder",Ce),_e(S,"placeholder",mt)},[()=>o()("session.enemy_modal.name_placeholder"),()=>o()("session.enemy_modal.desc_placeholder")]),ct(N,()=>a(h).name,Ce=>a(h).name=Ce),ct(S,()=>a(h).desc,Ce=>a(h).desc=Ce),d(Y,O)});var re=s(I,2);re.__click=Xe;var ge=t(re),je=t(ge);ea(je,{size:16}),e(ge);var E=s(ge);e(re),e(X),e(te),e(G),_((Y,h,ie,O,F,N,S,H)=>{r(lt,Y),r(Lt,` ${h??""}`),r(m,ie),r(pt,` ${O??""}`),r(Jt,F),r(z,` ${N??""}`),r(se,S),r(E,` ${H??""}`)},[()=>o()("session.enemy_modal.traits"),()=>o()("common.buttons.add"),()=>o()("session.enemy_modal.attack_options"),()=>o()("common.buttons.add"),()=>o()("session.enemy_modal.special_attacks"),()=>o()("common.buttons.add"),()=>o()("session.enemy_modal.end_of_round"),()=>o()("common.buttons.add")]),d(de,G)},oe=de=>{var G=At(),Oe=Ge(G);{var le=Le=>{var lt=Si(),nt=t(lt);p(nt),e(lt),d(Le,lt)};y(Oe,Le=>{a(f)==="preview"&&Le(le)},!0)}d(de,G)};y(K,de=>{a(f)==="abilities"?de(Ae):de(oe,!1)},!0)}d(J,P)};y(j,J=>{a(f)==="stats"?J(R):J(ve,!1)},!0)}d(et,U)};y(Be,et=>{a(f)==="general"?et(it):et(wt,!1)})}e(ot);var Ut=s(ot,2),It=t(Ut);It.__click=()=>n.onSave(a(i));var Pt=t(It);Ja(Pt,{size:18});var $=s(Pt);e(It),e(Ut),e(dt);var B=s(dt,2),A=t(B),Ie=t(A),Ye=t(Ie);qa(Ye,{size:14});var Ke=s(Ye);e(Ie),e(A);var st=s(A,2),ft=t(st);p(ft),e(st),e(B),e(Ue),e(ze);var jt=s(ze,2);jt.__change=Te,us(jt,et=>k(me,et),()=>a(me));var Et=s(jt,2);ns(Et,{get isOpen(){return a(Z)},get imageUrl(){return a(Re)},onClose:()=>k(Z,!1),onCrop:ye}),_((et,U,j,R,ve,J,P)=>{r(pe,et),tt(Qe,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(f)==="general"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(ce,U),tt(Ee,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(f)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(q,j),tt(ue,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(f)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(Me,R),tt(De,1,`lg:hidden flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(f)==="preview"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(Fe,ve),r($,` ${J??""}`),r(Ke,` ${P??""}`)},[()=>o()("session.enemy_modal.title"),()=>o()("session.enemy_modal.tab_general"),()=>o()("session.enemy_modal.tab_stats"),()=>o()("session.enemy_modal.tab_abilities"),()=>o()("session.enemy_modal.preview"),()=>o()("common.buttons.save"),()=>o()("session.enemy_modal.preview")]),Ia(3,Ue,()=>Sa,()=>({y:20,duration:300})),Ia(3,ze,()=>Sa,()=>({duration:200,opacity:1})),d(T,M)};y(ut,T=>{L()&&T(qe)})}d(Q,Se),ia(),D()}na(["click","change"]);var Di=c('<div class="w-16 h-16 rounded-lg overflow-hidden border border-slate-700 shadow-lg flex-shrink-0"><!></div>'),Ai=c('<div class="bg-slate-950 p-2 rounded border border-slate-800"><div class="text-[10px] text-slate-500 uppercase font-bold mb-1"> </div> <div class="text-white font-bold"> <span> </span></div></div>'),Ti=c('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Ui=c('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Pi=c('<div class="flex gap-2"><span class="font-bold text-slate-500 uppercase"> </span> <span class="text-white"> </span></div>'),Hi=c('<div class="mb-2 pl-3 border-l-2 border-indigo-900"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Li=c('<div><h4 class="font-bold text-indigo-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Fi=c('<div class="mb-2 pl-3 border-l-2 border-red-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),qi=c('<div><h4 class="font-bold text-red-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Bi=c('<div class="mb-2 pl-3 border-l-2 border-orange-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Ji=c('<div><h4 class="font-bold text-orange-400 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Gi=c('<div class="mb-2 pl-3 border-l-2 border-yellow-900/50"><span class="font-bold text-white"> </span> <span class="text-slate-300"> </span></div>'),Wi=c('<div><h4 class="font-bold text-yellow-500 uppercase text-xs mb-2 tracking-wider"> </h4> <!></div>'),Qi=c('<div class="w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl p-5 shadow-2xl relative"><div class="absolute -top-3 -right-3 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-red-400"> </div> <div class="flex items-center gap-3 mb-4"><!> <div class="flex-1 min-w-0"><h2 class="text-2xl font-bold text-white mb-1 font-serif tracking-wide truncate"> </h2> <div class="h-1 w-20 bg-red-600 rounded-full"></div></div></div> <div class="grid grid-cols-2 gap-4 mb-4 text-sm"><div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold text-lg"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div> <div class="bg-slate-950 p-2 rounded border border-slate-800 flex justify-between items-center"><span class="text-slate-500 uppercase font-bold text-[10px]"> </span> <span class="text-white font-mono font-bold"> </span></div></div> <div class="grid grid-cols-4 gap-2 mb-6 text-center font-mono text-slate-300"></div> <div class="mb-6 space-y-2 text-xs"><!> <!> <!></div> <div class="space-y-5 text-sm"><!> <!> <!> <!></div></div>'),Vi=c('<div class="space-y-4 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="flex items-center gap-4"><div class="relative group cursor-pointer"><div class="w-16 h-16 rounded-xl overflow-hidden border border-slate-700"><!></div> <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"><!></div></div> <div class="flex-1"><label for="enemy-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="enemy-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white font-bold text-lg"/></div></div> <div><label for="enemy-desc" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <textarea id="enemy-desc" class="w-full bg-slate-900 border border-slate-700 rounded p-3 text-white text-sm min-h-[100px] resize-none focus:border-indigo-500 focus:outline-none transition-colors"></textarea></div> <div class="flex items-center gap-2"><input id="enemy-global" type="checkbox" class="w-4 h-4 bg-slate-900 border-slate-700 rounded focus:ring-indigo-500"/> <label for="enemy-global" class="text-sm font-bold text-slate-400 select-none cursor-pointer flex items-center gap-2"><!> </label></div></div>'),Zi=c('<div class="bg-slate-900 p-2 rounded border border-slate-700 text-center"><label class="text-[10px] text-slate-500 uppercase font-bold block mb-1 text-ellipsis overflow-hidden whitespace-nowrap"> </label> <input type="number" class="w-full bg-transparent text-center font-bold text-white text-xl focus:outline-none mb-1"/> <div> </div></div>'),Xi=c('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col"><label for="enemy-diff" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div> <div class="flex flex-col"><label for="enemy-size" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <!></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-defense" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-defense" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-health" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-health" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="enemy-damage" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-damage" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div> <div><label for="enemy-speed" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-speed" type="number" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white"/></div></div> <div><h4 class="text-indigo-400 font-bold text-sm uppercase mb-3 text-center border-b border-indigo-500/20 pb-2"> </h4> <div class="grid grid-cols-4 gap-3"></div></div> <div class="space-y-3 pt-4 border-t border-slate-800"><div><label for="enemy-senses" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-senses" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-langs" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-langs" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div> <div><label for="enemy-immune" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label><input id="enemy-immune" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm"/></div></div></div>'),Yi=c('<div class="flex gap-2 items-start animate-in fade-in slide-in-from-left-2"><div class="flex-1 space-y-1"><input class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-bold placeholder-slate-600 focus:border-indigo-500 focus:outline-none"/> <textarea class="w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm placeholder-slate-600 resize-none focus:border-indigo-500 focus:outline-none" rows="2"></textarea></div> <button class="mt-1 text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded"><!></button></div>'),Ki=c('<div><div class="mb-3"><h4> </h4></div> <div class="space-y-3"><!> <button class="w-full py-3 border-2 border-dashed border-slate-700 rounded hover:border-slate-500 hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 text-slate-500 hover:text-white font-bold text-sm group"><div class="p-1 rounded-full bg-slate-800 group-hover:bg-slate-700 transition-colors"><!></div> </button></div></div>'),en=c('<div class="space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"></div>'),tn=c('<div class="flex-1 flex items-start justify-center p-4 min-h-0 animate-in fade-in slide-in-from-right-2 duration-300"><!></div>'),an=c('<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 lg:p-4" role="button" tabindex="-1"><div class="bg-slate-900 w-full h-full lg:rounded-xl lg:max-w-6xl lg:h-[90vh] border-0 lg:border border-slate-700 shadow-2xl overflow-hidden flex flex-col lg:flex-row" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="w-full lg:w-1/2 flex flex-col h-full border-r border-slate-700"><div class="p-4 border-b border-slate-700 bg-slate-900 flex justify-between items-center"><div class="flex items-center gap-3"><button class="lg:hidden text-slate-400 hover:text-white p-1 rounded-full hover:bg-slate-800 transition-colors"><!></button> <h3 id="modal-title" class="font-bold text-white text-lg"> </h3></div> <button class="hidden lg:block text-slate-400 hover:text-white"><!></button></div> <div class="flex border-b border-slate-700 bg-slate-900/50 overflow-x-auto"><button> </button> <button> </button> <button> </button> <button> </button></div> <div class="flex-1 overflow-y-auto p-6 custom-scrollbar bg-slate-800/50"><!></div> <div class="p-4 border-t border-slate-700 bg-slate-900 flex justify-end gap-3 safe-area-bottom"><button class="px-6 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-white font-bold flex items-center gap-2 transition-colors"><!> </button></div></div> <div class="hidden lg:flex w-1/2 bg-slate-950 flex-col border-l border-slate-800"><div class="p-4 border-b border-slate-800 bg-slate-950"><h3 class="font-bold text-slate-500 text-xs uppercase flex items-center gap-2"><!> </h3></div> <div class="flex-1 p-8 overflow-y-auto flex items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-slate-950"><!></div></div></div></div> <input type="file" hidden="" accept="image/*"/> <!>',1);function sn(Q,n){ra(n,!0);const o=()=>qt(ta,"$t",ne),[ne,D]=xa(),p=$e=>{var Ne=Qi(),Xe=t(Ne),at=t(Xe);e(Xe);var fe=s(Xe,2),Se=t(fe);{var ut=U=>{var j=Di(),R=t(j);ja(R,{get hash(){return a(i).imageUrl},get alt(){return a(i).name},size:"custom"}),e(j),d(U,j)};y(Se,U=>{a(i).imageUrl&&U(ut)})}var qe=s(Se,2),T=t(qe),M=t(T,!0);e(T),ba(2),e(qe),e(fe);var ze=s(fe,2),Ue=t(ze),dt=t(Ue),Ot=t(dt,!0);e(dt);var rt=s(dt,2),yt=t(rt,!0);e(rt),e(Ue);var zt=s(Ue,2),ee=t(zt),pe=t(ee,!0);e(ee);var He=s(ee,2),We=t(He,!0);e(He),e(zt);var _t=s(zt,2),Qe=t(_t),ce=t(Qe,!0);e(Qe);var Ee=s(Qe,2),q=t(Ee,!0);e(Ee),e(_t);var ue=s(_t,2),Me=t(ue),De=t(Me,!0);e(Me);var Fe=s(Me,2),ot=t(Fe,!0);e(Fe),e(ue),e(ze);var Be=s(ze,2);Ze(Be,20,()=>["str","agi","int","wil"],$t,(U,j)=>{var R=Ai(),ve=t(R),J=t(ve,!0);e(ve);var P=s(ve,2),K=t(P),Ae=s(K),oe=t(Ae);e(Ae),e(P),e(R),_(()=>{r(J,j),r(K,`${a(i).stats[j]??""} `),tt(Ae,1,`text-xs ${a(i).stats[j]-10>=0?"text-green-500":"text-red-500"}`),r(oe,`(${a(i).stats[j]-10>=0?"+":""}${a(i).stats[j]-10})`)}),d(U,R)}),e(Be);var it=s(Be,2),wt=t(it);{var Ut=U=>{var j=Ti(),R=t(j),ve=t(R);e(R);var J=s(R,2),P=t(J,!0);e(J),e(j),_(K=>{r(ve,`${K??""}:`),r(P,a(i).senses)},[()=>o()("session.enemy_modal.senses")]),d(U,j)};y(wt,U=>{a(i).senses&&U(Ut)})}var It=s(wt,2);{var Pt=U=>{var j=Ui(),R=t(j),ve=t(R);e(R);var J=s(R,2),P=t(J,!0);e(J),e(j),_(K=>{r(ve,`${K??""}:`),r(P,a(i).languages)},[()=>o()("session.enemy_modal.languages")]),d(U,j)};y(It,U=>{a(i).languages&&U(Pt)})}var $=s(It,2);{var B=U=>{var j=Pi(),R=t(j),ve=t(R);e(R);var J=s(R,2),P=t(J,!0);e(J),e(j),_(K=>{r(ve,`${K??""}:`),r(P,a(i).immune)},[()=>o()("session.enemy_modal.immunities")]),d(U,j)};y($,U=>{a(i).immune&&U(B)})}e(it);var A=s(it,2),Ie=t(A);{var Ye=U=>{var j=Li(),R=t(j),ve=t(R,!0);e(R);var J=s(R,2);Ze(J,17,()=>a(i).traits,$t,(P,K,Ae,oe)=>{var de=Hi(),G=t(de),Oe=t(G);e(G);var le=s(G,2),Le=t(le,!0);e(le),e(de),_(()=>{r(Oe,`${a(K).name??""}:`),r(Le,a(K).desc)}),d(P,de)}),e(j),_(P=>r(ve,P),[()=>o()("session.enemy_modal.traits")]),d(U,j)};y(Ie,U=>{a(i).traits.length>0&&U(Ye)})}var Ke=s(Ie,2);{var st=U=>{var j=qi(),R=t(j),ve=t(R,!0);e(R);var J=s(R,2);Ze(J,17,()=>a(i).actions,$t,(P,K,Ae,oe)=>{var de=Fi(),G=t(de),Oe=t(G);e(G);var le=s(G,2),Le=t(le,!0);e(le),e(de),_(()=>{r(Oe,`${a(K).name??""}:`),r(Le,a(K).desc)}),d(P,de)}),e(j),_(P=>r(ve,P),[()=>o()("session.enemy_modal.actions")]),d(U,j)};y(Ke,U=>{a(i).actions.length>0&&U(st)})}var ft=s(Ke,2);{var jt=U=>{var j=Ji(),R=t(j),ve=t(R,!0);e(R);var J=s(R,2);Ze(J,17,()=>a(i).reactions,$t,(P,K,Ae,oe)=>{var de=Bi(),G=t(de),Oe=t(G);e(G);var le=s(G,2),Le=t(le,!0);e(le),e(de),_(()=>{r(Oe,`${a(K).name??""}:`),r(Le,a(K).desc)}),d(P,de)}),e(j),_(P=>r(ve,P),[()=>o()("session.enemy_modal.reactions")]),d(U,j)};y(ft,U=>{a(i).reactions.length>0&&U(jt)})}var Et=s(ft,2);{var et=U=>{var j=Wi(),R=t(j),ve=t(R,!0);e(R);var J=s(R,2);Ze(J,17,()=>a(i).endOfRound,$t,(P,K,Ae,oe)=>{var de=Gi(),G=t(de),Oe=t(G);e(G);var le=s(G,2),Le=t(le,!0);e(le),e(de),_(()=>{r(Oe,`${a(K).name??""}:`),r(Le,a(K).desc)}),d(P,de)}),e(j),_(P=>r(ve,P),[()=>o()("session.enemy_modal.end_of_round")]),d(U,j)};y(Et,U=>{a(i).endOfRound.length>0&&U(et)})}e(A),e(Ne),_((U,j,R,ve,J,P)=>{r(at,`${U??""} ${a(i).difficulty??""}`),r(M,j),r(Ot,R),r(yt,a(i).defense),r(pe,ve),r(We,a(i).health),r(ce,J),r(q,a(i).size),r(De,P),r(ot,a(i).speed)},[()=>o()("session.enemy_modal.difficulty"),()=>a(i).name||o()("session.enemy_modal.enemy_default"),()=>o()("session.enemy_modal.defense"),()=>o()("session.enemy_modal.health"),()=>o()("session.enemy_modal.size"),()=>o()("session.enemy_modal.speed")]),d($e,Ne)};let L=Kt(n,"isOpen",3,!1),W=Kt(n,"initialData",3,"{}"),i=bt(_a(ae())),f=bt("general"),Z=bt(!1),Re=bt(""),me=bt(void 0);function Te($e){const Ne=$e.target.files;if(Ne&&Ne.length>0){const Xe=Ne[0],at=new FileReader;at.onload=()=>{k(Re,at.result,!0),k(Z,!0)},at.readAsDataURL(Xe)}$e.target&&($e.target.value="")}async function ye($e){try{const Ne=await os($e);a(i).imageUrl=Ne,k(Z,!1)}catch(Ne){console.error(Ne),alert(Ne.message||"Erro ao salvar imagem")}}function ae(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",imageUrl:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[],global:!1}}Ra(()=>{if(L()&&W())try{const $e=JSON.parse(W());Object.keys($e).length===0?k(i,ae(),!0):k(i,{...ae(),...$e},!0)}catch{k(i,ae(),!0)}});function V($e){a(i)[$e]=[...a(i)[$e],{name:"",desc:""}]}function we($e,Ne){a(i)[$e]=a(i)[$e].filter((Xe,at)=>at!==Ne)}function ke($e){}var Rt=At(),kt=Ge(Rt);{var Ht=$e=>{var Ne=an(),Xe=Ge(Ne);Xe.__click=ke;var at=t(Xe),fe=t(at),Se=t(fe),ut=t(Se),qe=t(ut);qe.__click=function(...A){n.onClose?.apply(this,A)};var T=t(qe);Na(T,{size:24}),e(qe);var M=s(qe,2),ze=t(M,!0);e(M),e(ut);var Ue=s(ut,2);Ue.__click=function(...A){n.onClose?.apply(this,A)};var dt=t(Ue);ma(dt,{size:20}),e(Ue),e(Se);var Ot=s(Se,2),rt=t(Ot);rt.__click=()=>k(f,"general");var yt=t(rt,!0);e(rt);var zt=s(rt,2);zt.__click=()=>k(f,"stats");var ee=t(zt,!0);e(zt);var pe=s(zt,2);pe.__click=()=>k(f,"abilities");var He=t(pe,!0);e(pe);var We=s(pe,2);We.__click=()=>k(f,"preview");var _t=t(We,!0);e(We),e(Ot);var Qe=s(Ot,2),ce=t(Qe);{var Ee=A=>{var Ie=Vi(),Ye=t(Ie),Ke=t(Ye);Ke.__click=()=>a(me)?.click();var st=t(Ke),ft=t(st);Ba(ft,()=>a(i).imageUrl,le=>{ja(le,{get hash(){return a(i).imageUrl},get alt(){return a(i).name},size:"custom",fallbackText:"?"})}),e(st);var jt=s(st,2),Et=t(jt);ls(Et,{size:20,class:"text-white"}),e(jt),e(Ke);var et=s(Ke,2),U=t(et),j=t(U,!0);e(U);var R=s(U,2);ht(R),e(et),e(Ye);var ve=s(Ye,2),J=t(ve),P=t(J,!0);e(J);var K=s(J,2);pa(K),e(ve);var Ae=s(ve,2),oe=t(Ae);ht(oe);var de=s(oe,2),G=t(de);ua(G,{size:14});var Oe=s(G);e(de),e(Ae),e(Ie),_((le,Le,lt,nt)=>{r(j,le),r(P,Le),_e(K,"placeholder",lt),r(Oe,` ${nt??""}`)},[()=>o()("session.enemy_modal.name"),()=>o()("session.enemy_modal.description"),()=>o()("session.enemy_modal.description_placeholder"),()=>o()("session.enemy_modal.global_enemy")]),ct(R,()=>a(i).name,le=>a(i).name=le),ct(K,()=>a(i).description,le=>a(i).description=le),Ya(oe,()=>a(i).global,le=>a(i).global=le),d(A,Ie)},q=A=>{var Ie=At(),Ye=Ge(Ie);{var Ke=ft=>{var jt=Xi(),Et=t(jt),et=t(Et),U=t(et),j=t(U,!0);e(U);var R=s(U,2);{let w=xe(()=>a(i).difficulty??1);xs(R,{get value(){return a(w)},onUpdate:C=>a(i).difficulty=C,steps:[1,2,4,8,16,32,64,128]})}e(et);var ve=s(et,2),J=t(ve),P=t(J,!0);e(J);var K=s(J,2);{let w=xe(()=>a(i).size||1);ds(K,{get value(){return a(w)},onUpdate:C=>a(i).size=C})}e(ve),e(Et);var Ae=s(Et,2),oe=t(Ae),de=t(oe),G=t(de,!0);e(de);var Oe=s(de);ht(Oe),e(oe);var le=s(oe,2),Le=t(le),lt=t(Le,!0);e(Le);var nt=s(Le);ht(nt),e(le),e(Ae);var vt=s(Ae,2),Mt=t(vt),Ct=t(Mt),Bt=t(Ct,!0);e(Ct);var Lt=s(Ct);ht(Lt),e(Mt);var x=s(Mt,2),u=t(x),g=t(u,!0);e(u);var m=s(u);ht(m),e(x),e(vt);var be=s(vt,2),Pe=t(be),Je=t(Pe,!0);e(Pe);var Ve=s(Pe,2);Ze(Ve,20,()=>["str","agi","int","wil"],$t,(w,C)=>{var se=Zi(),X=t(se),I=t(X,!0);e(X);var re=s(X,2);ht(re);var ge=s(re,2),je=t(ge);e(ge),e(se),_(E=>{_e(X,"for",`attr-${C??""}`),r(I,E),_e(re,"id",`attr-${C??""}`),tt(ge,1,`text-xs font-bold ${a(i).stats[C]-10>=0?"text-green-500":"text-red-500"}`),r(je,`${a(i).stats[C]-10>=0?"+":""}${a(i).stats[C]-10}`)},[()=>o()("sofww.attributes."+C).substring(0,3)]),ct(re,()=>a(i).stats[C],E=>a(i).stats[C]=E),d(w,se)}),e(Ve),e(be);var xt=s(be,2),pt=t(xt),Nt=t(pt),Dt=t(Nt,!0);e(Nt);var Tt=s(Nt);ht(Tt),e(pt);var Jt=s(pt,2),Wt=t(Jt),Vt=t(Wt,!0);e(Wt);var l=s(Wt);ht(l),e(Jt);var v=s(Jt,2),b=t(v),z=t(b,!0);e(b);var te=s(b);ht(te),e(v),e(xt),e(jt),_((w,C,se,X,I,re,ge,je,E,Y,h,ie,O)=>{r(j,w),r(P,C),r(G,se),r(lt,X),r(Bt,I),r(g,re),r(Je,ge),r(Dt,je),_e(Tt,"placeholder",E),r(Vt,Y),_e(l,"placeholder",h),r(z,ie),_e(te,"placeholder",O)},[()=>o()("session.enemy_modal.difficulty"),()=>o()("session.enemy_modal.size"),()=>o()("session.enemy_modal.defense"),()=>o()("session.enemy_modal.health"),()=>o()("session.enemy_modal.damage"),()=>o()("session.enemy_modal.speed"),()=>o()("session.enemy_modal.main_attributes"),()=>o()("session.enemy_modal.senses"),()=>o()("session.enemy_modal.senses_placeholder"),()=>o()("session.enemy_modal.languages"),()=>o()("session.enemy_modal.languages_placeholder"),()=>o()("session.enemy_modal.immunities"),()=>o()("session.enemy_modal.immunities_placeholder")]),ct(Oe,()=>a(i).defense,w=>a(i).defense=w),ct(nt,()=>a(i).health,w=>a(i).health=w),ct(Lt,()=>a(i).damage,w=>a(i).damage=w),ct(m,()=>a(i).speed,w=>a(i).speed=w),ct(Tt,()=>a(i).senses,w=>a(i).senses=w),ct(l,()=>a(i).languages,w=>a(i).languages=w),ct(te,()=>a(i).immune,w=>a(i).immune=w),d(ft,jt)},st=ft=>{var jt=At(),Et=Ge(jt);{var et=j=>{var R=en();Ze(R,20,()=>[{key:"traits",label:"traits",color:"text-indigo-400",border:"border-indigo-500/30"},{key:"actions",label:"actions",color:"text-red-400",border:"border-red-500/30"},{key:"reactions",label:"reactions",color:"text-orange-400",border:"border-orange-500/30"},{key:"endOfRound",label:"end_of_round",color:"text-yellow-400",border:"border-yellow-500/30"}],$t,(ve,J)=>{var P=Ki(),K=t(P),Ae=t(K),oe=t(Ae,!0);e(Ae),e(K);var de=s(K,2),G=t(de);Ze(G,17,()=>a(i)[J.key],$t,(nt,vt,Mt)=>{var Ct=Yi(),Bt=t(Ct),Lt=t(Bt);ht(Lt);var x=s(Lt,2);pa(x),e(Bt);var u=s(Bt,2);u.__click=()=>we(J.key,Mt);var g=t(u);sa(g,{size:16}),e(u),e(Ct),_((m,be)=>{_e(Lt,"placeholder",m),_e(x,"placeholder",be)},[()=>o()("session.enemy_modal.name_placeholder"),()=>o()("session.enemy_modal.desc_placeholder")]),ct(Lt,()=>a(vt).name,m=>a(vt).name=m),ct(x,()=>a(vt).desc,m=>a(vt).desc=m),d(nt,Ct)});var Oe=s(G,2);Oe.__click=()=>V(J.key);var le=t(Oe),Le=t(le);ea(Le,{size:16}),e(le);var lt=s(le);e(Oe),e(de),e(P),_((nt,vt)=>{tt(P,1,`p-4 bg-slate-900 rounded border ${J.border??""}`),tt(Ae,1,`font-bold text-sm uppercase ${J.color??""}`),r(oe,nt),r(lt,` ${vt??""}`)},[()=>o()("session.enemy_modal."+J.label),()=>o()("common.buttons.add")]),d(ve,P)}),e(R),d(j,R)},U=j=>{var R=At(),ve=Ge(R);{var J=P=>{var K=tn(),Ae=t(K);p(Ae),e(K),d(P,K)};y(ve,P=>{a(f)==="preview"&&P(J)},!0)}d(j,R)};y(Et,j=>{a(f)==="abilities"?j(et):j(U,!1)},!0)}d(ft,jt)};y(Ye,ft=>{a(f)==="stats"?ft(Ke):ft(st,!1)},!0)}d(A,Ie)};y(ce,A=>{a(f)==="general"?A(Ee):A(q,!1)})}e(Qe);var ue=s(Qe,2),Me=t(ue);Me.__click=()=>n.onSave(a(i));var De=t(Me);Ja(De,{size:18});var Fe=s(De);e(Me),e(ue),e(fe);var ot=s(fe,2),Be=t(ot),it=t(Be),wt=t(it);qa(wt,{size:14});var Ut=s(wt);e(it),e(Be);var It=s(Be,2),Pt=t(It);p(Pt),e(It),e(ot),e(at),e(Xe);var $=s(Xe,2);$.__change=Te,us($,A=>k(me,A),()=>a(me));var B=s($,2);ns(B,{get isOpen(){return a(Z)},get imageUrl(){return a(Re)},onClose:()=>k(Z,!1),onCrop:ye}),_((A,Ie,Ye,Ke,st,ft,jt,Et)=>{_e(Xe,"aria-label",A),r(ze,Ie),tt(rt,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(f)==="general"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(yt,Ye),tt(zt,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(f)==="stats"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(ee,Ke),tt(pe,1,`flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(f)==="abilities"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(He,st),tt(We,1,`lg:hidden flex-1 py-3 px-4 text-sm font-bold border-b-2 whitespace-nowrap transition-colors ${a(f)==="preview"?"border-indigo-500 text-indigo-400 bg-slate-800":"border-transparent text-slate-500 hover:text-white"}`),r(_t,ft),r(Fe,` ${jt??""}`),r(Ut,` ${Et??""}`)},[()=>o()("session.enemy_modal.close"),()=>o()("session.enemy_modal.title"),()=>o()("session.enemy_modal.tab_general"),()=>o()("session.enemy_modal.tab_stats"),()=>o()("session.enemy_modal.tab_abilities"),()=>o()("session.enemy_modal.preview"),()=>o()("common.buttons.save"),()=>o()("session.enemy_modal.preview")]),Ia(3,at,()=>Sa,()=>({y:20,duration:300})),Ia(3,Xe,()=>Sa,()=>({duration:200,opacity:1})),d($e,Ne)};y(kt,$e=>{L()&&$e(Ht)})}d(Q,Rt),ia(),D()}na(["click","change"]);var rn=c('<div class="flex justify-between items-center bg-slate-800 p-2 rounded border border-slate-700"><div class="flex-1"><div class="text-sm font-bold text-white"> </div> <div class="text-[10px] text-slate-400"> </div></div> <div class="flex items-center gap-2"><input type="number" min="1" class="w-12 bg-slate-900 border border-slate-600 rounded text-center text-white"/> <button class="text-red-400 hover:text-red-300"><!></button></div></div>'),nn=c('<div class="text-center text-slate-600 italic text-sm py-4"> </div>'),on=c('<div class="flex justify-between items-center bg-slate-950 p-2 rounded border border-slate-800 hover:border-indigo-500/30 transition-colors"><div><div class="text-sm font-bold text-white max-w-[120px] truncate"> </div> <div class="text-[10px] text-slate-500"> </div></div> <button class="text-indigo-400 hover:text-white p-1 bg-slate-900 rounded border border-slate-800"><!></button></div>'),ln=c('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4" role="button" tabindex="-1"><div class="bg-slate-800 rounded-xl w-full max-w-2xl p-6 border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]" role="dialog" aria-modal="true" aria-labelledby="encounter-modal-title"><div class="flex justify-between items-center mb-6"><h3 id="encounter-modal-title" class="text-xl font-bold text-white"> </h3> <button class="text-slate-400 hover:text-white"><!></button></div> <div class="space-y-4 mb-6"><div><label for="encounter-name" class="text-xs text-slate-500 uppercase font-bold block mb-1"> </label> <input id="encounter-name" class="w-full bg-slate-900 border border-slate-700 rounded p-2 text-white outline-hidden focus:border-indigo-500"/></div></div> <div class="flex-1 flex gap-4 min-h-0"><div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"><!> <!></div></div> <div class="flex-1 bg-slate-900 border border-slate-800 rounded-lg p-3 flex flex-col"><h4 class="text-xs text-slate-500 uppercase font-bold mb-2"> </h4> <div class="flex-1 overflow-y-auto space-y-2 custom-scrollbar"></div></div></div> <div class="flex gap-3 mt-6 pt-4 border-t border-slate-700"><button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded font-bold"> </button> <button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded font-bold flex items-center justify-center gap-2"><!> </button></div></div></div>');function dn(Q,n){ra(n,!0);const o=()=>qt(ta,"$t",D),ne=()=>qt(Fa,"$liveEnemies",D),[D,p]=xa();let L=Kt(n,"isOpen",3,!1),W=Kt(n,"initialData",3,"{}"),i=bt(_a({name:"",enemies:[]}));Ra(()=>{if(L()&&W())try{const V=JSON.parse(W());k(i,{name:V.name||"",enemies:V.enemies||[]},!0)}catch{k(i,{name:"",enemies:[]},!0)}});function f(V){a(i).enemies.find(ke=>ke.enemyId===V)?a(i).enemies=a(i).enemies.map(ke=>ke.enemyId===V?{...ke,count:ke.count+1}:ke):a(i).enemies=[...a(i).enemies,{enemyId:V,count:1}]}function Z(V){a(i).enemies=a(i).enemies.filter((we,ke)=>ke!==V)}function Re(V,we){const ke=Math.max(1,parseInt(we)||1);a(i).enemies[V].count=ke}function me(V){}var Te=At(),ye=Ge(Te);{var ae=V=>{var we=ln();we.__click=me;var ke=t(we),Rt=t(ke),kt=t(Rt),Ht=t(kt,!0);e(kt);var $e=s(kt,2);$e.__click=function(...q){n.onClose?.apply(this,q)};var Ne=t($e);ma(Ne,{size:20}),e($e),e(Rt);var Xe=s(Rt,2),at=t(Xe),fe=t(at),Se=t(fe,!0);e(fe);var ut=s(fe,2);ht(ut),e(at),e(Xe);var qe=s(Xe,2),T=t(qe),M=t(T),ze=t(M,!0);e(M);var Ue=s(M,2),dt=t(Ue);Ze(dt,17,()=>a(i).enemies,$t,(q,ue,Me)=>{const De=xe(()=>ne().find(A=>A.id===a(ue).enemyId));var Fe=rn(),ot=t(Fe),Be=t(ot),it=t(Be,!0);e(Be);var wt=s(Be,2),Ut=t(wt);e(wt),e(ot);var It=s(ot,2),Pt=t(It);ht(Pt),Pt.__input=A=>Re(Me,A.target.value);var $=s(Pt,2);$.__click=()=>Z(Me);var B=t($);sa(B,{size:16}),e($),e(It),e(Fe),_(A=>{r(it,A),r(Ut,`Dif ${(a(De)?a(De).difficulty:"?")??""}`),Ua(Pt,a(ue).count)},[()=>a(De)?a(De).name:o()("session.encounter_modal.unknown")]),d(q,Fe)});var Ot=s(dt,2);{var rt=q=>{var ue=nn(),Me=t(ue,!0);e(ue),_(De=>r(Me,De),[()=>o()("session.encounter_modal.none_added")]),d(q,ue)};y(Ot,q=>{a(i).enemies.length===0&&q(rt)})}e(Ue),e(T);var yt=s(T,2),zt=t(yt),ee=t(zt,!0);e(zt);var pe=s(zt,2);Ze(pe,5,ne,q=>q.id,(q,ue)=>{var Me=on(),De=t(Me),Fe=t(De),ot=t(Fe,!0);e(Fe);var Be=s(Fe,2),it=t(Be);e(Be),e(De);var wt=s(De,2);wt.__click=()=>f(a(ue).id);var Ut=t(wt);ea(Ut,{size:16}),e(wt),e(Me),_(()=>{r(ot,a(ue).name),r(it,`Dif ${a(ue).difficulty??""}`)}),d(q,Me)}),e(pe),e(yt),e(qe);var He=s(qe,2),We=t(He);We.__click=function(...q){n.onClose?.apply(this,q)};var _t=t(We,!0);e(We);var Qe=s(We,2);Qe.__click=()=>n.onSave(a(i));var ce=t(Qe);Ja(ce,{size:18});var Ee=s(ce);e(Qe),e(He),e(ke),e(we),_((q,ue,Me,De,Fe,ot,Be,it)=>{_e(we,"aria-label",q),r(Ht,ue),r(Se,Me),_e(ut,"placeholder",De),r(ze,Fe),r(ee,ot),r(_t,Be),r(Ee,` ${it??""}`)},[()=>o()("session.encounter_modal.close"),()=>o()("session.encounter_modal.title"),()=>o()("session.encounter_modal.name"),()=>o()("session.encounter_modal.name_placeholder"),()=>o()("session.encounter_modal.enemies_in_encounter"),()=>o()("session.encounter_modal.add_enemies"),()=>o()("common.buttons.cancel"),()=>o()("session.encounter_modal.save_encounter")]),ct(ut,()=>a(i).name,q=>a(i).name=q),d(V,we)};y(ye,V=>{L()&&V(ae)})}d(Q,Te),ia(),p()}na(["click","input"]);var vn=c('<div class="text-[10px] text-slate-400 flex items-center gap-1.5 bg-slate-950 p-1 px-1.5 rounded-lg border border-slate-800/50"><span class="text-indigo-400 font-black"> </span> <span class="font-medium truncate max-w-[80px]"> </span></div>'),cn=c('<div class="text-[10px] text-slate-600 italic"> </div>'),un=c('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-4 transition-all hover:border-indigo-500/30 group relative flex flex-col justify-between shadow-lg hover:shadow-indigo-500/10" role="region"><div class="flex-1"><div class="flex items-center gap-2 mb-2"><div class="font-bold text-white text-base group-hover:text-indigo-400 transition-colors uppercase tracking-tight truncate"> </div> <!></div> <div class="flex flex-wrap gap-1"><!> <!></div></div> <div class="flex gap-2 mt-3 pt-3 border-t border-slate-800/50"><button class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-1.5 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-indigo-900/20"><!> </button> <button class="p-1.5 text-slate-400 hover:text-white bg-slate-800/50 rounded-lg border border-slate-800 transition-all" title="Editar"><!></button> <button class="p-1.5 text-slate-400 hover:text-red-400 bg-slate-800/50 rounded-lg border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),bn=c('<button class="text-[10px] font-bold text-indigo-400 hover:text-indigo-300 mt-1 uppercase tracking-wider"> </button>'),_n=c('<div class="mb-4 flex-1"><p> </p> <!></div>'),xn=c('<div class="mb-4 flex-1 text-[10px] text-slate-600 italic"> </div>'),pn=c('<div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 hover:border-indigo-500/30 transition-all relative group cursor-move hover:shadow-lg hover:shadow-indigo-500/10 active:scale-[0.98] flex flex-col" draggable="true" role="listitem"><div class="flex justify-between items-start mb-3"><div class="flex items-center gap-2"><h3 class="font-bold text-lg text-white group-hover:text-indigo-400 transition-colors"> </h3> <!></div> <span class="text-[10px] font-black bg-indigo-500/10 text-indigo-400 border border-indigo-400/20 px-2 py-1 rounded-lg uppercase"> </span></div> <!> <div class="mt-auto flex gap-2 pt-4 border-t border-slate-800/50"><button class="flex-1 bg-slate-800/50 hover:bg-slate-800 text-white py-2 rounded-xl text-xs font-bold border border-slate-800 transition-all"> </button> <button class="bg-slate-800/50 hover:bg-red-900/20 text-slate-500 hover:text-red-400 px-3 rounded-xl border border-slate-800 hover:border-red-900/30 transition-all"><!></button></div></div>'),mn=c('<div class="text-center text-slate-500 italic col-span-3"> </div>'),fn=c('<div><div class="mb-12"><div class="flex justify-between items-center mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[120px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!></div></div> <div class="mb-6"><h3 class="text-sm font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-6"><!> </h3></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><button class="min-h-[180px] border-2 border-dashed border-slate-800 rounded-2xl flex flex-col items-center justify-center text-slate-500 hover:border-indigo-500 hover:text-indigo-400 transition-all hover:bg-indigo-500/5 gap-2 group"><!> <span class="font-bold text-sm"> </span></button> <!> <!></div> <!> <!> <!></div>');function gn(Q,n){ra(n,!0);const o=()=>qt(Fa,"$liveEnemies",p),ne=()=>qt(es,"$liveEncounters",p),D=()=>qt(ta,"$t",p),[p,L]=xa();let W=bt(!1),i=bt(null),f=bt("{}"),Z=bt(!1),Re=bt(null),me=bt("{}"),Te=bt(_a({isOpen:!1,title:"",message:"",onConfirm:()=>{}}));function ye(){return{name:"",difficulty:1,defense:10,health:10,damage:0,size:1,speed:10,description:"",senses:"",languages:"",immune:"",stats:{str:10,agi:10,int:10,wil:10},traits:[],actions:[],reactions:[],endOfRound:[]}}function ae($=null){k(i,$?$.id:null,!0),$?k(f,JSON.stringify($),!0):a(Se)==="sofdl"?k(f,"{}"):k(f,JSON.stringify(ye()),!0),k(W,!0)}let V=_a(new Set);function we($){V.has($)?V.delete($):V.add($)}function ke($){const B=a(i)||Oa(),A=Qt.get(n.campId);Va.set(B,{...$,id:B,campaignId:n.campId,system:A?.system||"sofww"}),k(W,!1)}function Rt($){const B=o().find(A=>A.id===$);k(Te,{isOpen:!0,title:"Excluir Inimigo",message:`Tem certeza que deseja excluir permanentemente o inimigo "${B?.name||"este inimigo"}"?`,onConfirm:()=>{Va.delete($),a(Te).isOpen=!1}},!0)}function kt($=null){k(Re,$?$.id:null,!0),k(me,JSON.stringify($||{name:"",enemies:[]}),!0),k(Z,!0)}function Ht($){const B=a(Re)||Oa();Aa.set(B,{...$,id:B,system:a(Se)}),k(Z,!1)}function $e($){const B=ne().find(A=>A.id===$);k(Te,{isOpen:!0,title:"Excluir Encontro",message:`Tem certeza que deseja excluir permanentemente o encontro "${B?.name||"este encontro"}"?`,onConfirm:()=>{Aa.delete($),a(Te).isOpen=!1}},!0)}function Ne($){const B=Qt.get(n.campId);if(!B)return;const A=B.activeEnemies||[];let Ie=[];$.enemies.forEach(Ye=>{const Ke=o().find(st=>st.id===Ye.enemyId);if(Ke)for(let st=0;st<Ye.count;st++)Ie.push({...Ke,instanceId:Oa(),damage:0,currentHealth:Ke.health,afflictions:[],acted:!1,initiative:!1})}),Qt.set(n.campId,{...B,activeEnemies:[...A,...Ie]})}function Xe($,B){$.dataTransfer.setData("text/plain",B.id),$.dataTransfer.effectAllowed="copy"}function at($){return $.preventDefault(),!1}function fe($,B){$.preventDefault();const A=$.dataTransfer.getData("text/plain");if(!A)return;const Ie=B.enemies||[],Ye=Ie.find(st=>st.enemyId===A);let Ke;Ye?Ke=Ie.map(st=>st.enemyId===A?{...st,count:st.count+1}:st):Ke=[...Ie,{enemyId:A,count:1}],Aa.set(B.id,{...B,enemies:Ke})}let Se=xe(()=>Qt.get(n.campId)?.system||"sofww"),ut=xe(()=>o().filter($=>{const A=($.system||"sofww")===a(Se),Ie=$.global===!0,Ye=$.campaignId===n.campId;return A&&(Ie||Ye)})),qe=xe(()=>ne().filter($=>{const A=($.system||"sofww")===a(Se),Ie=$.global===!0,Ye=$.campaignId===n.campId;return A&&(Ie||Ye)}));var T=fn(),M=t(T),ze=t(M),Ue=t(ze),dt=t(Ue);La(dt,{size:16});var Ot=s(dt);e(Ue),e(ze);var rt=s(ze,2),yt=t(rt);yt.__click=()=>kt();var zt=t(yt);ea(zt,{size:28,class:"group-hover:scale-110 transition-transform"});var ee=s(zt,2),pe=t(ee,!0);e(ee),e(yt);var He=s(yt,2);Ze(He,17,()=>a(qe),$=>$.id,($,B)=>{var A=un(),Ie=t(A),Ye=t(Ie),Ke=t(Ye),st=t(Ke,!0);e(Ke);var ft=s(Ke,2);{var jt=G=>{ua(G,{size:12,class:"text-indigo-400"})};y(ft,G=>{a(B).global&&G(jt)})}e(Ye);var Et=s(Ye,2),et=t(Et);Ze(et,17,()=>a(B).enemies||[],$t,(G,Oe)=>{const le=xe(()=>o().find(Ct=>Ct.id===a(Oe).enemyId));var Le=vn(),lt=t(Le),nt=t(lt);e(lt);var vt=s(lt,2),Mt=t(vt,!0);e(vt),e(Le),_(()=>{r(nt,`${a(Oe).count??""}x`),r(Mt,a(le)?a(le).name:"...")}),d(G,Le)});var U=s(et,2);{var j=G=>{var Oe=cn(),le=t(Oe,!0);e(Oe),_(Le=>r(le,Le),[()=>D()("session.bestiary.empty_encounter")]),d(G,Oe)};y(U,G=>{a(B).enemies?.length||G(j)})}e(Et),e(Ie);var R=s(Ie,2),ve=t(R);ve.__click=()=>Ne(a(B));var J=t(ve);Ha(J,{size:12,fill:"currentColor"});var P=s(J);e(ve);var K=s(ve,2);K.__click=()=>kt(a(B));var Ae=t(K);Us(Ae,{size:14}),e(K);var oe=s(K,2);oe.__click=()=>$e(a(B).id);var de=t(oe);sa(de,{size:14}),e(oe),e(R),e(A),_(G=>{_e(A,"aria-label",`Encontro ${a(B).name??""}`),r(st,a(B).name),r(P,` ${G??""}`)},[()=>D()("session.bestiary.start")]),ha("dragover",A,at),ha("drop",A,G=>fe(G,a(B))),d($,A)}),e(rt),e(M);var We=s(M,2),_t=t(We),Qe=t(_t);ga(Qe,{size:16});var ce=s(Qe);e(_t),e(We);var Ee=s(We,2),q=t(Ee);q.__click=()=>ae();var ue=t(q);ea(ue,{size:32,class:"group-hover:scale-110 transition-transform"});var Me=s(ue,2),De=t(Me,!0);e(Me),e(q);var Fe=s(q,2);Ze(Fe,17,()=>a(ut),$=>$.id,($,B)=>{var A=pn(),Ie=t(A),Ye=t(Ie),Ke=t(Ye),st=t(Ke,!0);e(Ke);var ft=s(Ke,2);{var jt=oe=>{ua(oe,{size:14,class:"text-indigo-400"})};y(ft,oe=>{a(B).global&&oe(jt)})}e(Ye);var Et=s(Ye,2),et=t(Et);e(Et),e(Ie);var U=s(Ie,2);{var j=oe=>{var de=_n(),G=t(de),Oe=t(G,!0);e(G);var le=s(G,2);{var Le=lt=>{var nt=bn();nt.__click=()=>we(a(B).id);var vt=t(nt,!0);e(nt),_(Mt=>r(vt,Mt),[()=>V.has(a(B).id)?D()("session.bestiary.see_less"):D()("session.bestiary.see_more")]),d(lt,nt)};y(le,lt=>{a(B).description.length>120&&lt(Le)})}e(de),_(lt=>{tt(G,1,`text-xs text-slate-400 leading-relaxed ${lt??""}`),r(Oe,a(B).description)},[()=>V.has(a(B).id)?"":"line-clamp-3"]),d(oe,de)},R=oe=>{var de=xn(),G=t(de,!0);e(de),_(Oe=>r(G,Oe),[()=>D()("session.bestiary.no_description")]),d(oe,de)};y(U,oe=>{a(B).description?oe(j):oe(R,!1)})}var ve=s(U,2),J=t(ve);J.__click=()=>ae(a(B));var P=t(J,!0);e(J);var K=s(J,2);K.__click=()=>Rt(a(B).id);var Ae=t(K);sa(Ae,{size:14}),e(K),e(ve),e(A),_((oe,de)=>{r(st,a(B).name),r(et,`${oe??""} ${a(B).difficulty??""}`),r(P,de)},[()=>D()("session.bestiary.level"),()=>D()("common.buttons.edit")]),ha("dragstart",A,oe=>Xe(oe,a(B))),d($,A)});var ot=s(Fe,2);{var Be=$=>{var B=mn(),A=t(B,!0);e(B),_(Ie=>r(A,Ie),[()=>D()("session.bestiary.no_enemies")]),d($,B)};y(ot,$=>{a(ut).length===0&&$(Be)})}e(Ee);var it=s(Ee,2);{var wt=$=>{Ni($,{get isOpen(){return a(W)},get initialData(){return a(f)},onClose:()=>k(W,!1),onSave:ke})},Ut=$=>{sn($,{get isOpen(){return a(W)},get initialData(){return a(f)},onClose:()=>k(W,!1),onSave:ke})};y(it,$=>{a(Se)==="sofdl"?$(wt):$(Ut,!1)})}var It=s(it,2);dn(It,{get isOpen(){return a(Z)},get initialData(){return a(me)},onClose:()=>k(Z,!1),onSave:Ht});var Pt=s(It,2);Ka(Pt,{get isOpen(){return a(Te).isOpen},get title(){return a(Te).title},get message(){return a(Te).message},get onConfirm(){return a(Te).onConfirm},onCancel:()=>a(Te).isOpen=!1}),e(T),_(($,B,A,Ie)=>{r(Ot,` ${$??""}`),r(pe,B),r(ce,` ${A??""}`),r(De,Ie)},[()=>D()("session.bestiary.encounters_title"),()=>D()("session.bestiary.new_encounter"),()=>D()("session.bestiary.title"),()=>D()("session.bestiary.new_enemy")]),d(Q,T),ia(),L()}na(["click"]);var hn=c('<div class="flex items-center gap-1 text-slate-400 ml-1"><!> <span class="text-xs"> </span></div>'),yn=c('<div class="flex items-center gap-1 text-emerald-400"><!> <span class="text-xs font-bold hidden sm:block"> </span></div> <!>',1),wn=c('<div class="flex items-center gap-1 text-slate-500"><!> <span class="text-xs hidden sm:block"> </span></div>'),kn=c('<span class="absolute -top-1 -right-1 flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border border-slate-900"></span></span>'),zn=c('<header class="bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-40 shadow-2xl"><div class="max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-3"><div class="flex items-center justify-between gap-2 sm:gap-4"><div class="flex items-center gap-1 sm:gap-3 shrink-0"><button class="p-2 text-slate-400 hover:text-white hover:bg-white/5 rounded-full transition-all flex items-center gap-1 group"><!> <!></button> <div class="flex flex-col"><h1 class="text-base sm:text-lg font-black text-white leading-tight truncate max-w-[140px] sm:max-w-none"> </h1> <span class="text-xs text-indigo-400 font-mono font-black uppercase tracking-wider"> </span></div></div> <div class="hidden md:flex bg-slate-950/50 p-1 rounded-xl border border-white/5"><button><!> <span class="hidden min-[400px]:block"> </span></button> <button><!> <span class="hidden min-[400px]:block"> </span></button></div> <div class="flex items-center gap-1 sm:gap-2"><div class="flex items-center gap-2 mr-2 border-r border-white/10 pr-2"><!></div> <button class="p-2 sm:p-2.5 text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-all"><!></button> <button class="p-2 sm:p-2.5 bg-indigo-600/10 text-indigo-400 border border-indigo-400/20 rounded-lg hover:bg-indigo-600 hover:text-white transition-all relative"><!> <!></button></div></div></div></header>');function Cn(Q,n){ra(n,!0);const o=()=>qt(ta,"$t",L),ne=()=>qt(ys,"$syncState",L),D=()=>qt(ya,"$isHistoryOpen",L),p=()=>qt(ws,"$hasUnreadRolls",L),[L,W]=xa();let i=Kt(n,"campaignName",3,""),f=Kt(n,"gmName",3,"Mestre"),Z=Kt(n,"activeSubTab",3,"session"),Re=Kt(n,"onTabChange",3,()=>{}),me=Kt(n,"onOpenSettings",3,()=>{});var Te=zn(),ye=t(Te),ae=t(ye),V=t(ae),we=t(V);we.__click=()=>Ls(ss("/"));var ke=t(we);Na(ke,{size:20,class:"group-hover:-translate-x-0.5 transition-transform"});var Rt=s(ke,2);Rs(Rt,{size:18,class:"hidden sm:block opacity-50"}),e(we);var kt=s(we,2),Ht=t(kt),$e=t(Ht,!0);e(Ht);var Ne=s(Ht,2),Xe=t(Ne,!0);e(Ne),e(kt),e(V);var at=s(V,2),fe=t(at);fe.__click=()=>Re()("session");var Se=t(fe);{let ce=xe(()=>Z()==="session"?"opacity-100":"opacity-50");vs(Se,{size:14,get class(){return a(ce)}})}var ut=s(Se,2),qe=t(ut,!0);e(ut),e(fe);var T=s(fe,2);T.__click=()=>Re()("bestiary");var M=t(T);{let ce=xe(()=>Z()==="bestiary"?"opacity-100":"opacity-50");bs(M,{size:14,get class(){return a(ce)}})}var ze=s(M,2),Ue=t(ze,!0);e(ze),e(T),e(at);var dt=s(at,2),Ot=t(dt),rt=t(Ot);{var yt=ce=>{var Ee=yn(),q=Ge(Ee),ue=t(q);as(ue,{size:16});var Me=s(ue,2),De=t(Me,!0);e(Me),e(q);var Fe=s(q,2);{var ot=Be=>{var it=hn(),wt=t(it);ts(wt,{size:14});var Ut=s(wt,2),It=t(Ut,!0);e(Ut),e(it),_(Pt=>{_e(it,"title",Pt),r(It,ne().peers.length)},[()=>o()("common.status.peers",{values:{count:ne().peers.length}})]),d(Be,it)};y(Fe,Be=>{ne().peers.length>0&&Be(ot)})}_((Be,it)=>{_e(q,"title",Be),r(De,it)},[()=>o()("common.status.connected"),()=>o()("common.status.connected")]),d(ce,Ee)},zt=ce=>{var Ee=wn(),q=t(Ee);Fs(q,{size:16});var ue=s(q,2),Me=t(ue,!0);e(ue),e(Ee),_((De,Fe)=>{_e(Ee,"title",De),r(Me,Fe)},[()=>o()("common.status.offline"),()=>o()("common.status.offline")]),d(ce,Ee)};y(rt,ce=>{ne().isConnected?ce(yt):ce(zt,!1)})}e(Ot);var ee=s(Ot,2);ee.__click=function(...ce){me()?.apply(this,ce)};var pe=t(ee);Ps(pe,{size:20}),e(ee);var He=s(ee,2);He.__click=()=>ya.update(ce=>!ce);var We=t(He);Ns(We,{size:20});var _t=s(We,2);{var Qe=ce=>{var Ee=kn();d(ce,Ee)};y(_t,ce=>{p()&&ce(Qe)})}e(He),e(dt),e(ae),e(ye),e(Te),_((ce,Ee,q,ue,Me,De,Fe,ot)=>{_e(we,"aria-label",ce),_e(we,"title",Ee),r($e,i()),r(Xe,f()),tt(fe,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${Z()==="session"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),_e(fe,"aria-pressed",Z()==="session"),r(qe,q),tt(T,1,`flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-lg text-xs font-black transition-all ${Z()==="bestiary"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:text-slate-300"}`),_e(T,"aria-pressed",Z()==="bestiary"),r(Ue,ue),_e(ee,"aria-label",Me),_e(ee,"title",De),_e(He,"aria-label",Fe),_e(He,"title",ot),_e(He,"aria-pressed",D())},[()=>o()("character.header.back_dashboard"),()=>o()("character.header.back_dashboard"),()=>o()("common.labels.session"),()=>o()("common.labels.bestiary"),()=>o()("common.buttons.settings"),()=>o()("common.buttons.settings"),()=>o()("character.header.history"),()=>o()("character.header.history")]),d(Q,Te),ia(),W()}na(["click"]);var $n=c('<!> <!> <main class="max-w-7xl mx-auto p-4 md:p-8 animate-in slide-in-from-bottom-4 duration-500"><!></main>',1),On=c('<div class="flex flex-col items-center justify-center min-h-screen p-4 text-center"><div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ghost"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg></div> <h1 class="text-2xl font-black text-white mb-2 uppercase tracking-tight"> </h1> <p class="text-slate-400 mb-8 max-w-md"> </p> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="19 12H5"></path></svg> </button></div>'),jn=c('<div class="flex items-center justify-center min-h-screen"><div class="relative w-16 h-16"><div class="absolute inset-0 border-4 border-indigo-500/20 rounded-full"></div> <div class="absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div></div></div>'),En=c('<div class="fixed bottom-24 left-1/2 -translate-x-1/2 md:left-8 md:translate-x-0 z-[60] flex flex-col items-center gap-2"><div class="bg-slate-900/95 backdrop-blur-md border border-white/10 rounded-2xl p-2 flex items-center gap-2 shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-200"><button class="bg-indigo-600/20 hover:bg-indigo-600 text-indigo-400 hover:text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-indigo-500/20"><span class="text-[10px] opacity-70">d20</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">1d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">2d6</span> <!></button> <button class="bg-slate-800 hover:bg-slate-700 text-white font-bold w-12 h-12 rounded-xl flex flex-col items-center justify-center transition-all active:scale-95 shadow-lg border border-white/5"><span class="text-[10px] opacity-70">3d6</span> <!></button> <div class="w-px h-8 bg-white/10 mx-1"></div> <button class="w-10 h-10 flex items-center justify-center text-slate-500 hover:text-white transition-colors"><!></button></div></div>  <div class="fixed inset-0 bg-black/40 z-[55]"></div>',1),Mn=c('<div class="min-h-screen bg-slate-950 text-slate-100 font-sans pb-20"><!> <!> <!> <div class="hidden md:block fixed bottom-8 left-8 z-[60]"><button class="w-16 h-16 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-[0_0_20px_rgba(79,70,229,0.4)] flex items-center justify-center transition-all active:scale-90 border-2 border-white/10 group" title="Rolagens Rápidas"><!></button></div> <nav class="md:hidden fixed bottom-0 left-0 right-0 z-50 px-4 pb-6 pt-2 pointer-events-none"><div class="max-w-md mx-auto relative h-16 pointer-events-auto"><div class="absolute inset-0 bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden"><div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-indigo-500/30 to-transparent"></div></div> <div class="relative h-full flex items-center justify-around px-2"><button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none">Sessão</span></button> <div class="relative w-16 h-16 -mt-10 flex items-center justify-center"><div class="absolute inset-0 bg-indigo-600/20 rounded-full blur-xl animate-pulse"></div> <button class="relative w-14 h-14 bg-indigo-600 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(79,70,229,0.5)] border-4 border-slate-900 transition-all active:scale-90 hover:bg-indigo-500 z-10" aria-label="Rolar Dados"><!></button></div> <button><!> <span class="text-[9px] font-black uppercase tracking-widest leading-none">Bestiário</span></button></div></div></nav> <!></div>');function Xn(Q,n){ra(n,!0);const o=()=>qt(fs,"$page",L),ne=()=>qt(Cs,"$liveCampaigns",L),D=()=>qt(ta,"$t",L),p=()=>qt(ya,"$isHistoryOpen",L),[L,W]=xa();let i=bt("session"),f=bt(!1),Z=xe(()=>o().params.id),Re=xe(()=>ne().find(ee=>ee.id===a(Z))),me=xe(()=>!!a(Re));function Te(ee){if(!a(Z)||!a(Re))return;const pe={...a(Re),...ee};Qt.set(a(Z),pe),Pa(a(Z),{name:pe.name,gmName:pe.gmName}),k(f,!1)}let ye=bt(!1),ae=bt(_a({isOpen:!1,sides:20,count:1,modifier:0}));function V(ee,pe=1){k(ae,{isOpen:!0,sides:ee,count:pe,modifier:0},!0)}function we(ee){if(!a(Re))return;const pe=Cr(a(ae).sides,a(ae).count,ee);let He="";a(ae).count>1&&(He+=`Dados: [${pe.results.join(", ")}] `),pe.bonusRolls?.length>0&&(He+=`Bonus Rolls: [${pe.bonusRolls.join(", ")}] -> ${Math.abs(pe.modifierTotal)}`);const We=a(Re).gmName||Ta(ta)("common.labels.master");ks.addToHistory({source:"GM",charName:We,name:`${a(ae).count}d${a(ae).sides} ${ee?ee>0?`+${ee}`:ee:""}`,description:He.trim()||null,total:pe.total,formula:pe.formula,crit:pe.crit}),ya.set(!0),a(ae).isOpen=!1}var ke=Mn(),Rt=t(ke);{var kt=ee=>{var pe=$n(),He=Ge(pe);Cn(He,{get campaignName(){return a(Re).name},get gmName(){return a(Re).gmName},get activeSubTab(){return a(i)},onTabChange:q=>k(i,q,!0),onOpenSettings:()=>k(f,!0)});var We=s(He,2);{let q=xe(()=>JSON.stringify(a(Re)));Hs(We,{get isOpen(){return a(f)},get initialData(){return a(q)},onClose:()=>k(f,!1),onSave:Te})}var _t=s(We,2),Qe=t(_t);{var ce=q=>{oi(q,{get campaign(){return a(Re)}})},Ee=q=>{var ue=At(),Me=Ge(ue);{var De=Fe=>{gn(Fe,{get campId(){return a(Z)}})};y(Me,Fe=>{a(i)==="bestiary"&&Fe(De)},!0)}d(q,ue)};y(Qe,q=>{a(i)==="session"?q(ce):q(Ee,!1)})}e(_t),d(ee,pe)},Ht=ee=>{var pe=At(),He=Ge(pe);{var We=Qe=>{var ce=On(),Ee=s(t(ce),2),q=t(Ee,!0);e(Ee);var ue=s(Ee,2),Me=t(ue,!0);e(ue);var De=s(ue,2);De.__click=()=>window.history.back();var Fe=s(t(De));e(De),e(ce),_((ot,Be,it)=>{r(q,ot),r(Me,Be),r(Fe,` ${it??""}`)},[()=>D()("campaign.not_found.title"),()=>D()("campaign.not_found.message"),()=>D()("common.buttons.back")]),d(Qe,ce)},_t=Qe=>{var ce=jn();d(Qe,ce)};y(He,Qe=>{a(me)&&!a(Re)?Qe(We):Qe(_t,!1)},!0)}d(ee,pe)};y(Rt,ee=>{a(me)&&a(Re)?ee(kt):ee(Ht,!1)})}var $e=s(Rt,2);is($e,{get isOpen(){return p()},onClose:()=>ya.set(!1)});var Ne=s($e,2);{var Xe=ee=>{var pe=En(),He=Ge(pe),We=t(He),_t=t(We);_t.__click=()=>{V(20),k(ye,!1)};var Qe=s(t(_t),2);ka(Qe,{size:16}),e(_t);var ce=s(_t,2);ce.__click=()=>{V(6),k(ye,!1)};var Ee=s(t(ce),2);ka(Ee,{size:16}),e(ce);var q=s(ce,2);q.__click=()=>{V(6,2),k(ye,!1)};var ue=s(t(q),2);ka(ue,{size:16}),e(q);var Me=s(q,2);Me.__click=()=>{V(6,3),k(ye,!1)};var De=s(t(Me),2);ka(De,{size:16}),e(Me);var Fe=s(Me,4);Fe.__click=()=>k(ye,!1);var ot=t(Fe);ma(ot,{size:20}),e(Fe),e(We),e(He);var Be=s(He,2);Be.__click=()=>k(ye,!1),d(ee,pe)};y(Ne,ee=>{a(ye)&&ee(Xe)})}var at=s(Ne,2),fe=t(at);fe.__click=()=>k(ye,!a(ye));var Se=t(fe);ka(Se,{size:32,class:"group-hover:rotate-12 transition-transform"}),e(fe),e(at);var ut=s(at,2),qe=t(ut),T=s(t(qe),2),M=t(T);M.__click=()=>{k(i,"session"),k(ye,!1)};var ze=t(M);{let ee=xe(()=>a(i)==="session"?"animate-in zoom-in-75 duration-300":"");vs(ze,{size:20,get class(){return a(ee)}})}ba(2),e(M);var Ue=s(M,2),dt=s(t(Ue),2);dt.__click=()=>k(ye,!a(ye));var Ot=t(dt);{let ee=xe(()=>a(ye)?"rotate-90":"rotate-0");ka(Ot,{size:28,get class(){return`text-white ${a(ee)??""} transition-transform duration-300`}})}e(dt),e(Ue);var rt=s(Ue,2);rt.__click=()=>{k(i,"bestiary"),k(ye,!1)};var yt=t(rt);{let ee=xe(()=>a(i)==="bestiary"?"animate-in zoom-in-75 duration-300":"");bs(yt,{size:20,get class(){return a(ee)}})}ba(2),e(rt),e(T),e(qe),e(ut);var zt=s(ut,2);{let ee=xe(()=>`${D()("session.quick.roll_title")} (${a(ae).count}d${a(ae).sides})`),pe=xe(()=>a(ae).sides===20?D()("session.quick.boons_banes"):D()("session.quick.fixed_modifier"));Ds(zt,{get isOpen(){return a(ae).isOpen},get title(){return a(ee)},get label(){return a(pe)},onClose:()=>a(ae).isOpen=!1,onRoll:we,initialModifier:0})}e(ke),_(()=>{tt(M,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(i)==="session"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`),tt(rt,1,`flex flex-col items-center justify-center gap-1 flex-1 transition-all ${a(i)==="bestiary"?"text-indigo-400":"text-slate-500 hover:text-slate-300"}`)}),d(Q,ke),ia(),W()}na(["click"]);export{Xn as component};
